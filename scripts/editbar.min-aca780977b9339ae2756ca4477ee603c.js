function hz(a,b){return aa[a]=b}$k.prototype.vb=hz(0,function(a){a=new Yj(this,a);this.A.push(a);ck(this);return a});function iz(a,b,c){var d=c?a:b;a=c?b:a;return a.A-d.A+(a.A>d.A||a.A===d.A&&a.C>=d.C?0:7)}function jz(a,b){return b===a.C?a:Yf(a.A,b)}function kz(a,b){return b===a.A.C?a:new mg(jz(a.A,b),a.C)}function lz(a,b,c){a=Gf(a,c);a=Hf(uf(a.A+b),0);return eg(c,a)}
function mz(a,b,c){if(0===b%7)return new mg(a.A,a.C+Math.floor(b/7));var d=a.A;c=lz(d,b,c);d=0>b?d.A+1:7-d.A;var e=0;0<b&&b>=d?e=1+Math.floor((b-d)/7):0>b&&-b>=d&&(e=-1-Math.floor((-b-d)/7));return new mg(c,a.C+e)}function nz(a,b){var c=jz(a,0),d=lz(a,b,0),e=0<b;var f=e?xf(c):xf(d);c=e?xf(d):xf(c);f=c-f+(c>=f?0:12);return jz(d,0>b?f+a.C:a.C-f)}function oz(a,b,c,d){a=-(a-35+b.C)-7*ta[d];b=Yf(a%7,0);Bf(b,c)&&(b=jz(b,0>c?-1:1));return new mg(b,Math.floor(a/7))}
function*pz(a,b,c,d,e){a=a.P;var f;if(a)for(f=a.length;f--;){var g=a[f];(b<g.Qa||b===g.Qa&&ze(g.kb,c))&&(d>g.Ua||d===g.Ua&&ze(e,g.jb))&&(yield g)}}function qz(a){var b=a.J;return ze(xl(b.O),dl(b,a.fa))}function rz(a){var b=a.J,c=1===b.track.A?xj(b.S,b.track):b.track;if(null!==c.S){c=c.S;for(var d=c.length,e;d--;)if(e=c[d],e.A===b.O.W&&e.C===a.ga)return e.D}return null}function sz(a){return!(!(a.D||!a.va&&a.ha.xb)||-1===a.Z)}
function xz(a){var b=a.J.N;if(b&&b.length)for(var c=b.length;c--;)if(b[c].v===a.fa&&-1!==Ub(b[c].i,a.ja))return!0;return!1}function Dz(a,b){a=a.A;for(var c=a.length;c--;)if(a[c].ka===b)return a[c];return null}function Ez(a){a=a.T;for(var b=a.length;b--;)if(a[b].C)return!0;return!1}function Fz(a,b){a.A.length?b():a.oa.assign([63],()=>{b()})}function Gz(a){return"https://www.soundslice.com"+em(a)}function Hz(a,b){return(a=Mn(a,b.J.O))?Co(a,b):null}
function Iz(a,b,c,d){var e=null,f=null,g,h;for(g of To(a))if(1===g.G&&(a=Math.abs(g.A-b),null===f||a<f))for(h of Uo(g,c))h.K.fa===d&&(f=a,e=h);return e}function Jz(a,b,c){var d=go(a),e=d.$,f=d.Z,g=e.length,h=0,k,l;for(k=0;k!==g;k++){h+=e[k];if(c<h+f[k])return k;if(0>f[k]&&c<h)for(l of Uo(a.G[zo(a,b)],k))if(c<ir(d,k)+4.13*a.A.A+l.M)return k;h+=f[k]}return g-1}function Kz(a){return/^\d+$/.test(a)}function Lz(a){a=a.A;return 1===a||2===a||23===a||24===a||26===a}
function Mz(a,b){var c=a.C.F;var d=c.F;b.A===d.A&&b.C===d.C&&b.D===d.D&&b.J===d.J&&b.F===d.F?c=!1:(c.F=b,c.G=!0,c.M(),c=!0);c&&(a.F.body.style.cursor=0!==b.A?"pointer":"auto")}
function Nz(a,b,c){for(var d=a.A,e=a.C.A,f=a.C.F.U,g=f.length,h=g,k=null,l=Infinity,m,n;h--;)if(m=f[h],b>=m.G-10&&b<=m.H+10&&c>=m.I-10&&c<=m.M+10){if(b>=m.G&&b<=m.H&&c>=m.I&&c<=m.M)return Mz(a,m),!0;n=qb(b,c,b<m.G?m.G:b>m.H?m.H:b,c<m.I?m.I:c>m.M?m.M:c);n<l&&(k=m,l=n)}if(g&&!k&&!(b>=e.H-12||c>=e.S-12-12)){dv(d,e,b,c,d.Ja,!0);l=cr(d.Ja,e);m=qn(e);g=1.3*e.A;d=go(l);c-=hr(d);f=e.D.T[Jz(l,b-m,c)];if(h=f.D&&f.F)h=g/2,n=rr(d,f),h=c>=n-h&&c<=n+ti(f,d.C.A)+h;b=Iz(l,b-m-l.F,f.index,e.C.ia);e=0;(l=b)&&!(l=h)&&
(l=ir(d,f.index),l=c>=l&&c<=l+4.13*d.C.A);if(l){if(h)e=Math.max(Math.min(Math.floor((c-rr(d,f)+g/2)/g),f.M-1),0),d=(k=Dz(b.K,e))?23:24;else{k=b.K.A;g=k.length;for(l=h=null;g--;)if(n=k[g],m=Math.abs(Pp(b,n)-(c-ir(d,f.index))),null===l||m<l)l=m,h=n;d=(k=h)?1:2}k=new Ut(d,b,k,null,e,0,0,0,0)}}Mz(a,k||Vt);return!1}function Oz(){return!!window.matchMedia&&window.matchMedia("(any-hover: none)").matches}function Pz(a){return function(b){!0!==b.A&&(a(b),b.A=!0)}}function Qz(a,b){return a-b}
function Rz(a){var b=a.H.C,c=b.A.length,d=b.T,e=a.F,f=a.D,g=a.A,h=a.fa,k=a.ja,l=Sz(a),m=a.ka;if(c&&d.length&&!Im(a.H.A)){-1===f?f=0:f>c-1&&(f=c-1);for(-1===g&&(g=0);!d[g]||!d[g].isVisible();)g=(g+1)%d.length;!e||d[g].D&&d[g].F||(e=!1);if(b=b.A[f].T[g]){-1===h?h=0:h>b.A.length-1&&(h=b.A.length-1);b=b.A[h];-1===k||b.length||(k=-1);if(-1===k&&b&&b.length||-1!==k&&k>=b.length)k=0;-1===k&&l?l=null:-1!==k&&(b=b[k],e&&null!==m&&!l?l=Dz(b,m):b&&-1===Ub(b.A,l)&&(l=b.A.length?b.A[0]:null));e?l&&(m=l.ka):m=
null}else k=h=-1,m=l=null}else k=h=g=f=-1,m=l=null;a.F=e;a.D=f;a.A=g;a.fa=h;a.ja=k;a.G=l?Jj(l):-1;a.ka=m}function Sz(a){var b=a.C();return b&&-1!==a.G&&a.G<b.A.length?b.A[a.G]:null}function Tz(a){var b=0,c=a.C(),d=c.J.track;c=c?Hz(a.H.A,c):null;if(c){var e=go(c.A);b=hr(e);a.I?b+=ir(e,d.index):a.F?b+=rr(e,d)+1.3*a.ka*a.H.A.A:(b+=ir(e,d.index),b=(a=Sz(a))?b+Pp(c,a):b+c.A.A.A*c.C)}return b}
function Uz(a,b,c){var d=b.K;a.D=d.J.O.W;a.A=d.J.track.index;a.fa=d.fa;a.ja=d.ja;a.G=Jj(b);a.ka=b.ka;Rz(a);Q(a.H,223,[b,c,!1,!1]);Vz(a.H.G,d,!0,!0,!0)}function Wz(a,b,c){var d=c?Dz(b,c):null;a.D=b.J.O.W;a.A=b.J.track.index;a.fa=b.fa;a.ja=b.ja;a.G=d?Jj(d):-1;a.ka=c;Rz(a);Vz(a.H.G,b,!0,!0,!0)}
class Xz{constructor(a,b,c,d,e,f,g,h,k){this.H=a;this.I=b;this.F=c;this.D=d;this.A=e;this.fa=f;this.ja=g;this.G=h;this.ka=k;Rz(this)}C(){var a=-1===this.D?null:this.H.C.A[this.D];return a&&-1!==this.ja&&this.A<this.H.C.T.length&&(a=a.T[this.A],this.fa<a.A.length&&this.ja<a.A[this.fa].length)?a.A[this.fa][this.ja]:null}}function Vz(a,b,c,d,e){a.G=null;d&&Q(a.C,38,[b,c,e])}
function Yz(a){var b=a.A,c=b.length,d=a.C.C;if(c)for(;c--;)Rz(b[c]),-1===b[c].A&&b.splice(c,1);!b.length&&d.A.length&&d.T.length&&d.A[0].T[0].A.length&&Zz(a,d.A[0].T[0],0,d.T[0].D)}function $z(a){return 0!==a.A.length&&a.A[0].I}function aA(a){a=a.A;for(var b=a.length;b--;)if(a[b].F)return!0;return!1}function bA(a){a=a.A;for(var b=a.length,c=0,d;b--;)if(d=a[b].F,0===c)c=d?1:2;else if(1===c&&!d||2===c&&d){c=3;break}return c}function cA(a){a.G=null;Q(a.C,38,[null,!1,!1])}
function dA(a,b,c){for(var d=a.A,e=d.length;e--;)if(d[e]===b){d.splice(e,1);Vz(a,null,!1,c,!1);break}}function eA(a,b,c,d,e,f,g,h,k,l,m,n){var p=a.A;c=new Xz(a.C,c,b,d,e,f,g,h,k);a:{k=a.A;for(var q=k.length,t;q--;)if(t=k[q],t.F===c.F&&t.D===c.D&&t.A===c.A&&t.fa===c.fa&&t.ja===c.ja&&t.G===c.G&&t.ka===c.ka){k=!0;break a}k=!1}if(!k){if(b&&-1!==h)for(b=p.length;b--;)if(h=p[b],h.F&&h.D===d&&h.A===e&&h.fa===f&&h.ja===g&&h.ka===Sz(c).ka){dA(a,h,m);break}a.A.push(c);Vz(a,c.C(),l,m,n)}}
function fA(a){var b=[];a=a.A;for(var c=a.length;c--;)-1===Ub(b,a[c].A)&&b.push(a[c].A);return b}function gA(a){for(var b=a.G,c=hA(a,!1),d=c.length;d--;)iA(a,c[d],!1);cA(a);a.G=b}function jA(a){var b=hA(a,!1),c=a.C.C,d;b.sort(zh);var e=0;for(d=b.length-1;e<d;e++){var f=b[e];var g=b[e+1];if(f.J.track===g.J.track&&f.fa===g.fa)for(f=Vj(f,c,!0);f&&g!==f;)iA(a,f,!1),f=Vj(f,c,!0)}}function kA(a,b){for(var c=a.A,d=c.length;d--;)c[d].C()===b&&dA(a,c[d],!1)}
function iA(a,b,c){for(var d=a.A,e=b.A,f=d.length,g;f--;)g=d[f],g.I||d.splice(f,1);if(f=e.length)for(;f--;)lA(a,e[f],!1,!0,!0,c);else mA(a,b,null,!1,!0,null,!0,c,!1);if(b.J.track.D)for(f=b.J.track.M;f--;)eA(a,!0,!0,b.J.O.W,b.J.track.index,b.fa,b.ja,-1,f,!0,c,!1)}function hA(a,b){var c=[];a=a.A;for(var d=a.length,e;d--;)(e=a[d].C())&&-1===Ub(c,e)&&(!b||b&&!e.va)&&c.push(e);c.sort(zh);return c}
function nA(a){var b=[],c=a.C.C.A;a=a.A;for(var d=a.length,e;d--;)-1!==a[d].D&&(e=c[a[d].D].T[a[d].A])&&-1===Ub(b,e)&&b.push(e);return b}function oA(a){a.A.length=0;Vz(a,null,!1,!0,!1)}function Zz(a,b,c,d){var e=b.A[c][0],f=e&&e.A.length?e.A[0]:null;eA(a,d,!1,b.O.W,b.track.index,c,e?e.ja:-1,f?Jj(f):-1,f?f.ka:d?0:null,!0,!0,!0)}function lA(a,b,c,d,e,f){var g=b.K;eA(a,c,d,g.J.O.W,g.J.track.index,g.fa,g.ja,Jj(b),c?b.ka:null,e,f,!1)}
function mA(a,b,c,d,e,f,g,h,k){eA(a,d,e,b.J.O.W,b.J.track.index,b.fa,b.ja,c?Jj(c):-1,d?c?c.ka:f:null,g,h,k)}function pA(a,b,c){var d=a.C.A,e=a.F()?null:a.A[0],f=e?d.D.T[e.A]:Dq(go(cr(b,d)));if(f){var g=d.G[b.A];var h=g.D;b=br(b,d)*g.O.Fa.ra;d=h.length;g=null;for(var k=Infinity,l;d--;)l=h[d].K,l.J.track===f&&l.fa===c&&l.ga.ra<=b&&b-l.ga.ra<k&&(g=l,k=b-l.ga.ra);h=g}else h=null;h&&(oA(a),eA(a,e?e.F:f.D,!1,h.J.O.W,f.index,c,h.ja,-1,e?e.ka:f.D?0:null,!0,!0,!0))}
function qA(a,b){a=a.A;for(var c=a.length,d=[],e;c--;)e=a[c],Sz(e)===b&&d.push(e);return d}function rA(a){var b=[];a=a.A;for(var c=a.length,d;c--;)d=a[c].D,-1!==d&&-1===Ub(b,d)&&b.push(d);return b}function sA(a,b,c){for(var d=[],e=a.A,f=e.length,g;f--;)if(g=Sz(e[f]))c&&(g=$i(g,a.C.C)),-1!==Ub(d,g)||!b&&hj(g)||d.push(g);return d}function tA(a){var b=[];a=a.A;for(var c=a.length,d;c--;)d=a[c].ka,null!==d&&-1===Ub(b,d)&&b.push(d);return b}
class uA{constructor(a){this.C=a;this.A=[];this.G=null;cu(a,[32,72],()=>{a.S&&Yz(this)})}F(){return 0===this.A.length}size(){return this.A.length}M(a){for(var b=this.A,c=b.length,d;c--;)if(d=b[c],d.D===a.O.W&&d.A===a.track.index)return!0;return!1}H(a){for(var b=this.A,c=b.length;c--;)if(b[c].C()===a)return!0;return!1}I(a,b){for(var c=this.A,d=c.length,e;d--;)if(e=c[d],Sz(e)===a&&(null===b||e.F===b))return e;return null}D(a){for(var b=null,c=Fe,d=this.A,e=d.length,f=null,g,h,k;e--;)g=d[e].C(),h=g.J.O.W,
k=g.ga,g&&(null===b||a&&(h>b||h===b&&ze(k,c))||!a&&(h<b||h===b&&ze(c,k)))&&(b=h,c=k,f=d[e]);return f}N(){var a=this.A.length;return a?Tz(this.A[a-1]):0}}var vA=[.00390625,.0078125,.015625,.03125,.0625,.125,.25,.5,1,2],wA=[76,77,78,79];const xA=[43,44,248,249,45,48,46,246,62,61,196,81,47,210,277,288];
var yA=[[5,"Common","note",[[14,15,16,17,18,19],[157,158,159,69],[22,73,223,20,86,67]]],[1,"Bars","bar",[[1,2,3,134,5,6,10,68,4,211,11,74,246]]],[10,"Notes","noteaccent",[[12,13,24,25,342,49,50,51,52,53,54,71,63,108,81,220,221,212,213,215,214,55,56]]],[11,"Repeats","startrepeat",[[7,8,9,181,72,262]]],[2,"Tab","tab",[[37,29,30,258,31,32,33,34,35,36,27,28,38,39,40,41,216,217,42]]],[14,"Dynamics","dynamics",[[256,257,118,119,120,122,123,124,125,126,127,128,130,131,132]]],[13,"Performance","pickdown",
[[61,196,57,58,59,60,253,254,329,330,70]]],[3,"Text","text",[[43,44,248,249,45,46,47,210,48,288,62]]],[12,"Format","beamright",[[23,26,243,255,222,251,207,260,273,275,277,344]]]],zA={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",UIKeyInputLeftArrow:"ArrowLeft",UIKeyInputRightArrow:"ArrowRight",UIKeyInputUpArrow:"ArrowUp",UIKeyInputDownArrow:"ArrowDown"},AA={ArrowLeft:"\u21e0",ArrowRight:"\u21e2",ArrowUp:"\u21e1",ArrowDown:"\u21e3",UIKeyInputLeftArrow:"\u21e0",UIKeyInputRightArrow:"\u21e2",
UIKeyInputUpArrow:"\u21e1",UIKeyInputDownArrow:"\u21e3"," ":"Spacebar",Numpad0:"Numpad 0",Numpad1:"Numpad 1",Numpad2:"Numpad 2",Numpad3:"Numpad 3",Numpad4:"Numpad 4",Numpad5:"Numpad 5",Numpad6:"Numpad 6",Numpad7:"Numpad 7",Numpad8:"Numpad 8",Numpad9:"Numpad 9"},BA=[[51,"Toggle accent","noteaccent",!0,!0],[226,"Accidental: Double flat","",!1,!0],[225,"Accidental: Double sharp","",!1,!0],[158,"Accidental: Flat","accflat",!1,!0],[159,"Accidental: Natural","accnatural",!1,!0],[157,"Accidental: Sharp",
"accsharp",!1,!0],[2,"Add bar (after selection)","newbarright",!1,!0],[1,"Add bar (before selection)","newbarleft",!1,!0],[237,"Add bar (end of slice)","",!1,!0],[12,"Insert beat (left)","newbeatleft",!1,!0],[13,"Insert beat (right)","newbeatright",!1,!0],[206,"Add instrument: Generic bass clef","",!1,!0],[101,"Add instrument: Bass guitar","",!1,!0],[265,"Add instrument: Clarinet (Bb)","",!1,!0],[219,"Add instrument: Drum kit","",!1,!0],[100,"Add instrument: Guitar","",!1,!0],[204,"Add instrument: Mandolin",
"",!1,!0],[64,"Add instrument: Other","",!1,!0],[103,"Add instrument","",!1,!1],[102,"Add instrument: Piano (grand staff)","",!1,!0],[271,"Add instrument: Single-line percussion","",!1,!0],[205,"Add instrument: Generic treble clef","",!1,!0],[289,"Add instrument: Ukulele","",!1,!0],[290,"Add instrument: Accordion","",!1,!0],[291,"Add instrument: Saxophone (soprano)","",!1,!0],[306,"Add instrument: Saxophone (alto)","",!1,!0],[308,"Add instrument: Saxophone (tenor)","",!1,!0],[311,"Add instrument: Saxophone (baritone)",
"",!1,!0],[292,"Add instrument: Trumpet","",!1,!0],[293,"Add instrument: Trombone","",!1,!0],[294,"Add instrument: Violin","",!1,!0],[295,"Add instrument: Viola","",!1,!0],[296,"Add instrument: Flute","",!1,!0],[297,"Add instrument: Cello","",!1,!0],[298,"Add instrument: Tuba","",!1,!0],[299,"Add instrument: Upright bass","",!1,!0],[300,"Add instrument: Vibraphone","",!1,!0],[301,"Add instrument: Voice (soprano)","",!1,!0],[312,"Add instrument: Voice (alto)","",!1,!0],[315,"Add instrument: Voice (tenor)",
"",!1,!0],[319,"Add instrument: Voice (bass)","",!1,!0],[321,"Add instrument: Voice (general)","",!1,!0],[302,"Add instrument: Xylophone","",!1,!0],[303,"Add instrument: Bagpipe","",!1,!0],[304,"Add instrument: Banjo","",!1,!0],[305,"Add instrument: Bassoon","",!1,!0],[307,"Add instrument: Cornet","",!1,!0],[309,"Add instrument: English horn","",!1,!0],[310,"Add instrument: Euphonium","",!1,!0],[313,"Add instrument: Harmonica","",!1,!0],[314,"Add instrument: Harp","",!1,!0],[316,"Add instrument: Horn in F",
"",!1,!0],[317,"Add instrument: Marimba","",!1,!0],[318,"Add instrument: Oboe","",!1,!0],[320,"Add instrument: Organ","",!1,!0],[346,"Add instrument: Pedal steel w/ Emmons copedent","",!1,!0],[322,"Add instrument: Piccolo","",!1,!0],[323,"Add instrument: Recorder","",!1,!0],[324,"Add instrument: Sitar","",!1,!0],[325,"Add instrument: Sousaphone","",!1,!0],[327,"Add instrument: Synthesizer","",!1,!0],[328,"Add instrument: Timpani","",!1,!0],[9,"Set alternate endings","altending",!0,!0],[183,"Append interval 2nd",
"",!1,!0],[184,"Append interval 3rd","",!1,!0],[185,"Append interval 4th","",!1,!0],[186,"Append interval 5th","",!1,!0],[187,"Append interval 6th","",!1,!0],[188,"Append interval 7th","",!1,!0],[189,"Append interval octave","",!1,!0],[234,"Append interval 9th","",!1,!0],[197,"Append interval 2nd (down)","",!1,!0],[198,"Append interval 3rd (down)","",!1,!0],[199,"Append interval 4th (down)","",!1,!0],[200,"Append interval 5th (down)","",!1,!0],[201,"Append interval 6th (down)","",!1,!0],[202,"Append interval 7th (down)",
"",!1,!0],[203,"Append interval octave (down)","",!1,!0],[235,"Append interval 9th (down)","",!1,!0],[150,"Append pitch A","",!1,!0],[151,"Append pitch B","",!1,!0],[152,"Append pitch C","",!1,!0],[153,"Append pitch D","",!1,!0],[154,"Append pitch E","",!1,!0],[155,"Append pitch F","",!1,!0],[156,"Append pitch G","",!1,!0],[192,"Append to selection (left)","",!1,!1],[193,"Append to selection (right)","",!1,!1],[194,"Append to selection (vertical)","",!1,!1],[58,"Toggle arpeggio downward","arpdown",
!0,!0],[57,"Toggle arpeggio upward","arpup",!0,!0],[20,"Toggle augmentation dot","augdot",!0,!0],[21,"Toggle two augmentation dots","augdot2",!0,!0],[246,"Override bar number","barnumber",!0,!0],[48,"Bar commentary","bartext",!0,!0],[62,"Roman numeral position","romannumeral",!0,!0],[23,"Toggle beam to next note","beamright",!1,!0],[37,"Set bend","bend",!0,!0],[217,"Toggle brush downward","brushdown",!0,!0],[216,"Toggle brush upward","brushup",!0,!0],[69,"Toggle enharmonic","enharmonics",!1,!0],[47,
"Chord name/diagram","chord",!0,!0],[55,"Toggle open/harmonic","notecircle",!0,!0],[137,"Change clef: C3","clefc3",!1,!0],[138,"Change clef: C4","clefc4",!1,!0],[136,"Change clef: F4","cleff4",!1,!0],[135,"Change clef: G2","clefg2",!1,!0],[134,"Change clef","clefg2",!1,!1],[70,"Toggle breath mark","notecomma",!0,!0],[160,"Copy","copy",!1,!0],[82,"Copy beat to end of the bar","",!1,!0],[236,"Copy beat to the right","",!1,!0],[247,"Copy notation from another slice","copy-slice-notation",!1,!0],[209,
"Cut","",!1,!0],[211,"Toggle dashed barline","dashedbar",!0,!0],[85,"Set dead note","",!1,!0],[66,"Decrease duration","",!1,!0],[3,"Delete bar","deletebar",!1,!0],[84,"Delete note or rest","",!1,!0],[176,"Set direction: Coda","dircoda",!1,!0],[162,"Set direction: Da Capo","",!1,!0],[163,"Set direction: D.C. Al Coda","",!1,!0],[164,"Set direction: D.C. Al Double Coda","",!1,!0],[165,"Set direction: D.C. Al Fine","",!1,!0],[174,"Set direction: To Coda","",!1,!0],[175,"Set direction: To Double Coda",
"",!1,!0],[166,"Set direction: Da Segno","",!1,!0],[167,"Set direction: D.S. Al Coda","",!1,!0],[168,"Set direction: D.S. Al Double Coda","",!1,!0],[169,"Set direction: D.S. Al Fine","",!1,!0],[170,"Set direction: Da Segno Segno","",!1,!0],[171,"Set direction: D.S.S. Al Coda","",!1,!0],[172,"Set Direction: D.S.S. Al Double Coda","",!1,!0],[173,"Set direction: D.S.S. Al Fine","",!1,!0],[177,"Set direction: Double Coda","dircoda2",!1,!0],[180,"Set direction: Fine","",!1,!0],[178,"Set direction: Segno",
"dirsegno",!1,!0],[179,"Set direction: Segno Segno","dirsegno2",!1,!0],[181,"Set direction (Da Capo, etc.)","dircoda",!0,!1],[215,"Toggle doit","doit",!0,!0],[4,"Toggle double barline","doublebar",!0,!0],[118,"Set dynamics: f","dynf",!0,!0],[119,"Set dynamics: ff","dynff",!0,!0],[120,"Set dynamics: fff","dynfff",!0,!0],[121,"Set dynamics: ffff","dynffff",!0,!0],[122,"Set dynamics: fp","dynfp",!0,!0],[123,"Set dynamics: fz","dynfz",!0,!0],[124,"Set dynamics: mf","dynmf",!0,!0],[125,"Set dynamics: mp",
"dynmp",!0,!0],[126,"Set dynamics: p","dynp",!0,!0],[127,"Set dynamics: pp","dynpp",!0,!0],[128,"Set dynamics: ppp","dynppp",!0,!0],[129,"Set dynamics: pppp","dynpppp",!0,!0],[130,"Set dynamics: sf","dynsf",!0,!0],[131,"Set dynamics: sffz","dynsffz",!0,!0],[132,"Set dynamics: sfz","dynsfz",!0,!0],[133,"Set dynamics: Unset all","",!1,!0],[8,"Toggle end repeat barline","endrepeat",!0,!0],[337,"Export MusicXML","",!1,!0],[338,"Export GPX","",!1,!0],[340,"Export MIDI","",!1,!0],[343,"Export PDF","",!1,
!0],[214,"Toggle fall","fall",!0,!0],[54,"Toggle ghost note","noteghost",!0,!0],[67,"Toggle gracenote (slash)","gracenote",!0,!0],[278,"Toggle gracenote (no slash)","gracenote-noslash",!0,!0],[52,"Toggle heavy accent (marcato)","notehaccent",!0,!0],[29,"Toggle hammer-on/pull-off","hapo",!0,!0],[42,"Toggle natural harmonic","noteharm",!0,!0],[65,"Increase duration","",!1,!0],[89,"Fret 0","",!1,!0],[90,"Fret 1","",!1,!0],[227,"Fret 10","",!1,!0],[228,"Fret 11","",!1,!0],[229,"Fret 12","",!1,!0],[230,
"Fret 13","",!1,!0],[231,"Fret 14","",!1,!0],[232,"Fret 15","",!1,!0],[91,"Fret 2","",!1,!0],[92,"Fret 3","",!1,!0],[93,"Fret 4","",!1,!0],[94,"Fret 5","",!1,!0],[95,"Fret 6","",!1,!0],[96,"Fret 7","",!1,!0],[97,"Fret 8","",!1,!0],[98,"Fret 9","",!1,!0],[286,"Set fingering position to above","",!1,!0],[287,"Set fingering position to below","",!1,!0],[334,"Set fingering position to left","",!1,!0],[335,"Set fingering position to right","",!1,!0],[6,"Change key signature","keysig",!1,!0],[36,"Toggle pull-off to nowhere",
"leftpull",!0,!0],[35,"Toggle left-hand tap","lefttap",!0,!0],[27,"Toggle \u201cLet ring\u201d","letring",!0,!0],[61,"Set fingering","hand1",!0,!0],[218,"Toggle line break after this beat (lyrics-only mode)","",!1,!0],[233,"Toggle stanza break after this beat (lyrics-only mode)","",!1,!0],[210,"Lyrics","lyrics",!0,!0],[242,"Move cursor down","",!1,!1],[140,"Move cursor down","",!1,!1],[190,"Move cursor left","",!1,!1],[191,"Move cursor right","",!1,!1],[241,"Move cursor up","",!1,!1],[139,"Move cursor up",
"",!1,!1],[240,"Move down diatonically","",!1,!0],[239,"Move up diatonically","",!1,!0],[74,"Set multi-bar rest","multirest",!0,!0],[115,"Set octave: 15ma","octave15ma",!1,!0],[116,"Set octave: 15mb","octave15mb",!1,!0],[113,"Set octave: 8va","octave8va",!1,!0],[114,"Set octave: 8vb","octave8vb",!1,!0],[71,"Set octave","8va",!0,!1],[117,"Set octave: Unset","",!1,!0],[272,"Toggle help section","help",!1,!0],[261,"Open preferences","",!1,!0],[263,"Search editor commands","",!1,!1],[267,"Ornament: Turn",
"orn-turn",!0,!0],[268,"Ornament: Inverted turn","orn-invturn",!0,!0],[269,"Ornament: Mordent","orn-mord",!0,!0],[270,"Ornament: Inverted mordent","orn-invmord",!0,!0],[28,"Toggle palm muting","palmmute",!0,!0],[161,"Paste","paste",!1,!0],[345,"Set active pedal/lever (pedal steel guitar)","",!1,!0],[104,"Set fermata: Short","pause1",!1,!0],[105,"Set fermata: Medium","pause2",!1,!0],[106,"Set fermata: Long","pause3",!1,!0],[63,"Set fermata","pause2",!0,!1],[107,"Set fermata: Unset","",!1,!0],[59,"Toggle bow/pick downward",
"pickdown",!0,!0],[60,"Toggle bow/pick upward","pickup",!0,!0],[11,"Toggle whether bar is pickup","pickupbar",!0,!0],[238,"Play/pause","",!1,!0],[212,"Toggle plop","plop",!0,!0],[56,"Toggle closed/plus","noteplus",!0,!0],[40,"Toggle pop","pop",!0,!0],[252,"Recalculate all beaming","",!1,!0],[88,"Redo","",!1,!0],[196,"Set right-hand fingering","hand2",!0,!0],[14,"Set whole note","note1",!1,!0],[18,"Set 16th note","note16",!1,!0],[15,"Set half note","note2",!1,!0],[19,"Set 32nd note","note32",!1,!0],
[282,"Set 64th note","",!1,!0],[283,"Set 128th note","",!1,!0],[284,"Set 256th note","",!1,!0],[16,"Set quarter note","note4",!1,!0],[17,"Set eighth note","note8",!1,!0],[99,"Save","",!1,!1],[213,"Toggle scoop","scoop",!0,!0],[45,"Section name","section",!0,!0],[46,"Section letter","sectionltr",!0,!0],[266,"Seek audio to start","",!1,!0],[281,"Select all in bar","",!1,!0],[86,"Clear notes; set to rest","rest",!1,!0],[143,"Set pitch A","",!1,!0],[144,"Set pitch B","",!1,!0],[145,"Set pitch C","",!1,
!0],[146,"Set pitch D","",!1,!0],[147,"Set pitch E","",!1,!0],[148,"Set pitch F","",!1,!0],[149,"Set pitch G","",!1,!0],[72,"Toggle simile (repeat previous bar)","repeatbar",!0,!0],[262,"Toggle simile (repeat previous two bars)","repeatbar2",!0,!0],[41,"Toggle slap","slap",!0,!0],[31,"Slide down into note","slideindown",!0,!0],[32,"Slide up into note","slideinup",!0,!0],[30,"Slide to next note (legato)","slide2",!0,!0],[258,"Slide to next note (shift)","slide",!0,!0],[33,"Slide down from note","slideoutdown",
!0,!0],[34,"Slide up from note","slideoutup",!0,!0],[207,"Toggle small notehead","smallnotehead",!0,!0],[50,"Toggle staccatissimo","notestaccatissimo",!0,!0],[49,"Toggle staccato","notestaccato",!0,!0],[7,"Toggle start repeat barline","startrepeat",!0,!0],[26,"Flip stem direction","stemdir",!1,!0],[288,"Set drum sticking","sticking",!0,!0],[332,"Shift all grace note stickings to primary notes","",!1,!0],[245,"Move note down a string, retaining pitch","",!1,!0],[244,"Move note up a string, retaining pitch",
"",!1,!0],[76,"Switch to voice 1","voice1",!1,!0],[77,"Switch to voice 2","voice2",!1,!0],[78,"Switch to voice 3","voice3",!1,!0],[79,"Switch to voice 4","voice4",!1,!0],[39,"Toggle tap","tap",!0,!0],[10,"Set tempo marking","tempo",!0,!0],[53,"Toggle tenuto","notetenuto",!0,!0],[43,"Outer text (above)","textup",!0,!0],[44,"Outer text (below)","textdown",!0,!0],[73,"Toggle tie to previous note","tieend",!0,!0],[22,"Toggle tie to next note","tiestart",!0,!0],[248,"Inner text (above)","expressionup",
!0,!0],[249,"Inner text (below)","expressiondown",!0,!0],[5,"Change time signature","timesig",!1,!0],[341,"Toggle full-bar rest","fullbar-rest",!0,!0],[260,"Toggle new passage","passage",!0,!0],[273,"Toggle line break","linebreak",!0,!0],[275,"Prevent line break","linebreak-delete",!0,!0],[280,"Toggle touch input","",!1,!0],[277,"Set note color","note-color",!0,!0],[274,"Reset all line breaks","linebreak",!1,!0],[243,"Toggle cautionary accidental","accparens",!0,!0],[220,"Toggle X notehead","notex",
!0,!0],[264,"Toggle force concert pitch","",!1,!0],[257,"Toggle closed hairpin","hairpin2",!0,!0],[256,"Toggle open hairpin","hairpin1",!0,!0],[251,"Toggle note visibility","notehide",!0,!0],[259,"Show keyboard shortcuts","shortcuts",!1,!0],[339,"Toggle circle-x notehead","",!1,!0],[344,"Move note to opposite staff (for grand staff music)","cross-staff",!0,!0],[329,"Toggle pedal-down marking","pedalon",!0,!0],[330,"Toggle pedal-up marking","pedaloff",!0,!0],[221,"Toggle slash notehead","noteslash",
!0,!0],[223,"Toggle slur for selected notes","slur",!0,!0],[255,"Toggle slur side for selected slur(s)","slurdir",!1,!0],[222,"Toggle stem visibility","hidestem",!0,!0],[254,"Toggle strum downward","strumdown",!0,!0],[253,"Toggle strum upward","strumup",!0,!0],[347,"Toggle synth overlay during playback","",!1,!0],[250,"Toggle grand staff on selected instrument","",!1,!0],[285,"Toggle tuplet side for selected tuplet(s)","",!1,!0],[336,"Toggle tuplet visibility","",!1,!0],[142,"Move down an octave",
"",!1,!0],[141,"Move up an octave","",!1,!0],[342,"Transpose","transpose",!1,!0],[109,"Set tremolo: Slow","tremolo1",!1,!0],[110,"Set tremolo: Medium","tremolo2",!1,!0],[111,"Set tremolo: Fast","tremolo3",!1,!0],[195,"Set tremolo: Buzz roll","tremolobuzz",!1,!0],[108,"Set tremolo","tremolo2",!0,!1],[112,"Set tremolo: Unset","note4",!1,!0],[81,"Trill","trill",!0,!0],[24,"Toggle triplet starting at selection","triplet",!0,!0],[68,"Set triplet feel","tripletfeel",!1,!0],[276,"Set trombone slide position",
"",!1,!0],[25,"Toggle tuplet starting at selection","tuplet",!0,!0],[87,"Undo","",!1,!0],[208,"Upload notation file","upload",!1,!0],[38,"Toggle vibrato","vibrato",!0,!0],[257,"Toggle decrescendo","hairpin2",!1,!0],[256,"Toggle crescendo","hairpin1",!1,!0]],CA=[["Playback",4,[238,266,347]],["General editing",4,[87,88,160,209,161,236,82,190,191,281,192,193,194,208,247,337,338,340,343,252,264,259,280,263,261,272,342]],["Note entry",4,[12,13,86,84,22,73,26,222,23,69,24,25,285,336,71,113,114,115,116,
117,251]],["Note entry (staff only)",2,[241,242,143,144,145,146,147,148,149,150,151,152,153,154,155,156,183,184,185,186,187,188,189,234,197,198,199,200,201,202,203,235,239,240,141,142,220,158,159,157,225,226,243,223,255,256,257]],["Note entry (tablature only)",1,[139,140,89,90,91,92,93,94,95,96,97,98,227,228,229,230,231,232,244,245,85,37,29,35,36,30,258,31,32,33,34,27,28,277]],["Note values",4,[65,66,14,15,16,17,18,19,282,283,284,67,278,207,20,21,221,339]],["Bars",4,[1,2,237,3,4,211,5,6,134,137,138,
136,135,246,11,74,341]],["Tempo and feel",4,[10,68,63,104,105,106,107]],["Repeats and jumps",4,[7,8,9,181,176,162,163,164,165,174,175,166,167,168,169,170,171,172,173,177,180,178,179,72,262]],["Dynamics",4,[118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133]],["Voices",4,[76,77,78,79]],["Articulations and notations",4,[49,50,51,52,53,54,55,56,38,57,58,216,217,81,108,109,110,111,195,112,59,60,61,196,286,287,334,335,70,212,213,214,215,39,40,41,42,253,254,268,270,269,267,329,330,344,345]],
["Text",4,[43,44,248,249,45,46,47,62,48,210,218,233,288,332,276]],["Instruments",4,[103,250,290,303,304,101,305,297,265,307,219,309,310,296,206,205,100,313,314,316,204,317,64,318,320,346,102,322,323,306,311,291,308,271,324,325,327,328,293,292,298,289,299,300,295,294,312,319,321,301,315,302]],["Line breaks",4,[273,275,274,260]]],DA=[["t",!1,!1,!1,!1]];function EA(a,b){return null===a||null===b?a===b:Db(a,b)}function FA(a){return 0!==(a.A&32)?1:0!==(a.A&64)?2:null}
function GA(a){var b={};null!==a.da?(b.string=a.da,b.fret=a.ia):b.pitch=a.M.W;b.a=a.X;uj(a)&&(b.c=uj(a));null!==a.ea&&(b.sp=a.ea);Ii(a)&&(b.tiestart=1);Ki(a)&&(b.tieend=1);hj(a)&&(b.dead=1);a.ba&&(b.vibrato=a.ba);lj(a)&&(b.ghost=1);a.$?b.tro=a.$:a.P&&(b.tr=a.P);null===a.I||1!==a.I&&2!==a.I||(b.slideL=a.I);null!==a.F&&(b.slideR=a.F);Vi(a)&&(b.hpstart=1);Wi(a)&&(b.hpend=1);0!==(a.A&16)&&(b.lefttap=1);0!==(a.A&32)&&(b.leftpull=1);a.N&&(b.harm=[a.N[0],a.N[1]]);a.C&&(b.bend=[a.C.A,a.C.C,a.C.end]);null!==
a.D&&(b.lf=HA(a.D));null!==a.G&&(b.rf=HA(a.G));null!==a.U&&(b.st=a.U);0!==(a.A&256)&&(b.tap=1);null!==a.Y&&(b.head=a.Y);oj(a)&&(b.os=1);0!==(a.A&512)&&(b.sm=1);rj(a)&&(b.p=1);sj(a)&&(b.s=1);qj(a)&&(b.f=1);pj(a)&&(b.d=1);tj(a)&&(b["/"]=1);null!==a.color&&(b.co=a.color);return b}
function IA(a,b){var c={},d;if(b){var e=[];b=0;for(d=a.A.length;b!==d;b++)e.push(GA(a.A[b]));c.notes=e}null===a.D?c.r=a.ha.id:c.grace=a.D;null!==a.Z&&(c.s=a.Z);uk(a)&&(c.hide=1);Kk(a)&&(b=JA(a),b.length&&(c.slur=1===b.length?b[0]:b));null!==a.Y&&(c.dyn=a.Y);a.G&&(c.oct=a.G);null!==a.sa&&(c.pause=a.sa);null!==a.$&&(c.arpeggio=a.$);0!==a.ea&&(c.tremolo=a.ea);a.N&&(c.ot1=KA(a.N));a.M&&(c.ot2=KA(a.M));null!==a.X&&(c.tt1=KA(a.X));null!==a.V&&(c.tt2=KA(a.V));null!==a.oa&&(c.pick=a.oa);null!==a.qa&&(c.brush=
a.qa);null!==a.Ca&&(c.trembar=a.Ca);null!==a.da&&(c.barre=a.da);null!==a.Aa&&(c.fading=a.Aa);2===a.pa?c.pop=1:3===a.pa&&(c.slap=1);null!==a.xa&&(b=a.xa,c.wb=[b.A?Math.round(50*b.A):b.A,b.C?Math.round(50*b.C):b.C,b.end?Math.round(50*b.end):b.end]);null!==a.I&&(c.ly=a.I);yk(a)&&(c.lb=zk(a)?2:1);dk(a)&&(c.ca=1);pk(a)&&(c.lr=1);qk(a)&&(c.pm=1);vk(a)&&(c.stac=1);wk(a)&&(c.sc=1);sk(a)&&(c.acc=1);tk(a)&&(c.hacc=1);xk(a)&&(c.ten=1);rk(a)&&(c.b=1);Ej(a)&&(c.ci=1);ek(a)&&(c.pl=1);0!==(a.C&16384)&&(c.d=1);Ak(a)&&
(c.sd=Bk(a));null!==a.za&&(c.tbp=a.za);null!==a.ia&&(c.ta=a.ia);a.va&&null!==a.wa&&(c.rp=a.wa);return c}function HA(a){var b={};b.t=a.text;a.color&&(b.c=a.color);a.A&&(b.p=a.A);return b}function KA(a){var b={};b.t=a.text;b.f=a.C;b.s=a.A;a.D&&(b.i=1);a.color&&(b.c=a.color);return b}function LA(a){var b={};b.id=a.id;b.val=a.value;a.Ta&&(b.dots=a.Ta);a.gb&&a.mb&&(b.tuplet=[a.gb,a.mb]);return b}function MA(a){var b={};b.i=a.id;b.s=Rh(a)?1:2;return b}
function NA(a,b){var c=a.D,d={},e=[],f=[],g=[],h=[],k=[],l=c.M,m,n;d.v=c.sa;var p=0;for(m=c.A.length;p!==m;p++){var q=e,t=q.push,u=c.A[p],v={};-1!==u.V&&(v.n=u.V);v.time=[u.H,u.I];Gl(u)&&(v.nt=1);if(0!==(u.A&32)||0!==(u.A&64))v.tg=FA(u);var w,y=[],x=u.T,z=x.length;for(w=0;w!==z;w++){var B=y,F=B.push,H,J=x[w],U={},G=[];U.clef=J.I.code;U.key=J.M;var N=0;for(H=J.A.length;N!==H;N++){var R=J.A[N];var K=G,S=K.push,T=R,I=[];var Y=0;for(R=T.length;Y!==R;Y++)I.push(IA(T[Y],!0));S.call(K,I)}U.voices=G;J.N&&
(U.t=JSON.parse(JSON.stringify(J.N)));0<J.C&&(U.mr=J.C);J.F&&(U.simile=J.F);if(J.P){G=[];K=J.P;N=0;for(H=K.length;N!==H;N++)G.push([K[N].A.Na,K[N].A.Ga,K[N].C.code]);U.cc=G}J.U&&(U.hc=1);J.eb&&(U.fr=1);if(J.G.length){G=[];N=0;for(H=J.G.length;N!==H;N++)K=J.G[N],S={},S.f=[K.position.Na,K.position.Ga],S.i=K.A.F,G.push(S);U.c=G}F.call(B,U)}v.tracks=y;Hl(u)&&(v.startrepeat=1);u.F&&(v.endrepeat=u.F);u.C&&(v.altendings=JSON.parse(JSON.stringify(u.C)));0!==(u.A&4)&&(v.doublebar=1);if(u.D){y=[];x=u.D;z=0;
for(B=x.length;z!==B;z++)w=x[z],w.A?y.push(w.code):y.push([w.code,w.A]);v.dirs=y}u.M&&(v.tf=u.M);u.P&&(v.s=u.P);u.S&&(v.l=u.S);u.G&&(v.c=u.G);pl(u)&&(v.p=1);Il(u)?v.b=1:0!==(u.A&128)?v.b=2:Jl(u)&&(v.b=3);t.call(q,v)}d.bars=e;p=0;for(m=c.T.length;p!==m;p++){e=f;q=e.push;t=void 0;u=c.T[p];v=qo(a,u);w=[];v.name=u.name;""!==u.za&&(v.na=u.za);""!==u.Ia&&(v.i=u.Ia);0!==u.Ra&&(v.midi=u.Ra);1!==u.volume&&(v.vol=Math.round(100*u.volume));5!==u.N&&(v.lines=u.N);u.M&&(v.strings=u.M);null!==u.G&&(v.pitches=u.G);
null!==u.ba&&(v.tn=u.ba);null!==u.Oa&&(v.so=u.Oa);u.ia?v.smp=u.ia:u.U&&(v.sm=[u.U.A,u.U.C]);u.Va&&(v.transpose=u.Va);u.Z&&(v.cn=1);u.da||(v.ts=0);u.A&&(v.gs=1);u.H&&(v.capo=u.H);for(t in u.pa)u.pa.hasOwnProperty(t)&&(y=u.pa[t],x={},x.name=y.name,y.ab&&(x.frets=y.A),w.push([y.F,x]));w.length&&(v.chords=w);if(null!==u.P){w=[];x=0;for(y=u.P.length;x!==y;x++)z=u.P[x],w.push([z.Ua,z.jb.Na,z.jb.Ga,z.Qa,z.kb.Na,z.kb.Ga,z.A]);w.length&&(v.h=w)}if(null!==u.S){w=[];x=0;for(y=u.S.length;x!==y;x++)z=u.S[x],w.push([z.A,
z.C.Na,z.C.Ga,z.D]);w.length&&(v.pd=w)}if(null!==u.V){w=[];for(t in u.V)u.V.hasOwnProperty(t)&&(y=u.V[t],x={},x.i=y.id,x.n=y.name,x.d=y.A,w.push(x));v.ta=w}u.Ea||(v.vk=0);u.sa&&(v.vi=1);u.Ha&&(v.vtrb=1);u.Ja&&(v.vtpt=1);q.call(e,v)}d.tracks=f;for(n in c.I)c.I.hasOwnProperty(n)&&g.push(LA(c.I[n]));d.rhythms=g;for(n in l)l.hasOwnProperty(n)&&!l[n].C&&null!==l[n].D&&k.push(MA(l[n]));k.length&&(d.s=k);p=0;for(m=c.F.length;p!==m;p++)a=c.F[p],h.push([a.A,a.C,a.F,a.D,a.I?1:0,a.text,a.G?0:1]);d.tempos=h;
b.V&&(d.lo=1);c.da||(d.bn=0);return d}function JA(a){var b=[];if(Kk(a)){a=a.H;var c;var d=0;for(c=a.length;d!==c;d++)a[d].C||b.push(a[d].id)}return b}function OA(a,b){for(var c=a.M[b],d=c.A,e=d.length,f,g;e--;)g=d[e],f=Ub(g.H,c),-1!==f&&(g.H.splice(f,1),g.H.length||(g.H=null));delete a.M[b]}function PA(a){var b=a.M,c;for(c in b)b.hasOwnProperty(c)&&b[c].C&&OA(a,c)}function QA(a){for(var b=a.length;b--;)if(!a[b].K.J.track.D)return!1;return!0}
function RA(a){for(var b=a.length;b--;)if(a[b].J.track.X)return!1;return!0}function SA(a){for(var b=a.length;b--;)if(a[b].K.J.track.X)return!1;return!0}function TA(a){return!a.F&&!a.O.G&&!a.C}function UA(a,b){for(var c=Fe,d=a.length;d--;)c=c.add(a[d].ha.G);for(d=a.length;d--;){var e=c;var f=a[d].ha.G;f=we(f.Na*b,f.Ga);if(e===f)return!0}return!1}
function VA(a,b){for(var c=we(1,2),d=0,e=a.length,f;d!==e;d++)if(f=a[d],!f.D&&(.125!==f.ha.duration||f.ha.Ta||f.ha.gb)&&(b&&ze(c,f.ga)||!b&&ze(f.ga,c)))return!1;return!0}function WA(a){return a.U?127:36-a.H}function XA(a,b,c){c=a.G[c]+a.H;return b>=c&&b<=c+WA(a)}function YA(a,b,c){for(var d of Uo(b,a.index))if(!d.K.va)for(a=d.K.A,b=a.length;b--;)if(a[b].ka===c)return a[b];return null}function ZA(a,b){a.X&&1===a.N&&(65<b.W?b=pg(65,1):62>b.W&&(b=pg(62,1)));return b}
function $A(a,b,c,d){for(var e=[100,100],f=0,g=a.M;f!==g;f++)if(XA(a,c,f)&&(f===d||!YA(a,b,f))){e=[f,c-a.G[f]-a.H];break}return e}function aB(a,b){return b.ja-a.ja}function bB(a,b){return a.v!==b.v?a.v-b.v:a.i[0]-b.i[0]}var cB={},dB={2:"2.4",3:"3.2",6:"5.8",8:"8.2",10:"9.6",15:"14.7",22:"21.7"};function eB(a){var b=0;switch(a){case 267:b=4;break;case 268:b=5;break;case 269:b=2;break;case 270:b=3}return b}
function fB(a){var b=null;switch(a){case 118:b="f";break;case 119:b="ff";break;case 120:b="fff";break;case 121:b="ffff";break;case 122:b="fp";break;case 123:b="fz";break;case 124:b="mf";break;case 125:b="mp";break;case 126:b="p";break;case 127:b="pp";break;case 128:b="ppp";break;case 129:b="pppp";break;case 130:b="sf";break;case 131:b="sffz";break;case 132:b="sfz"}return b}
function gB(a){a=a.code&&"Digit"===a.code.substring(0,5)?a.code.substring(5):a.code&&/^Numpad\d$/.test(a.code)?a.code:a.key;zA[a]&&(a=zA[a]);return a}function hB(a){for(var b=0,c=BA.length;b!==c;b++)if(BA[b][0]===a)return BA[b];return[0,""]}
function iB(a){return'<li class="editor-command ui-tooltip-wrapper ui-tooltip-wrapper-stop-overflow"><button class="editor-command-button" data-code="'+a[0]+'"><svg class="editor-command-icon"><use xlink:href="#shape-'+a[2]+'"></use></svg><div class="ui-tooltip-outer"><div class="ui-tooltip">'+Qa(a[1])+'<div class="scut"></div></div></div></button></li>'}
function jB(a){if(a.N)a.P=!0;else{var b=a.M;a.G[++a.A]=NA(b.C.A,b.C.F);a.F[a.A]=b.Ja.slice();a.H[a.A]=b.H;a.I[a.A]=b.C.F.S;kB(a,a.A+1);lB(b);a.F[a.A+1]=b.Ja.slice();0<a.A&&Q(a.M.C,177)}}function V(a){a.N||(a.P=!1);a.N++}function W(a){a.N--;!a.N&&a.P&&jB(a)}function kB(a,b){var c=a.G;c.length>b&&(c.splice(b,c.length-b),a.F.splice(b,a.F.length-b),a.H.splice(b,a.H.length-b),a.I.splice(b,a.I.length-b))}
function mB(a,b){var c=a.M;nB(c,a.H[b]);un(c.C.A,a.I[b]);b<a.G.length&&sw(c.C,a.G[b],!1);if(a.F[b+1]){a=a.F[b+1];b=c.C.G;var d;oA(b);var e=0;for(d=a.length;e!==d;e++){var f=a[e];eA(b,f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],!0,!1,!1)}cA(b)}oB(c,!0)}function pB(a){0<a.A&&(a.A--,mB(a,a.A),Q(a.M.C,209))}class qB{constructor(a){this.M=a;this.G=[];this.F=[];this.H=[];this.I=[];this.A=-1;this.N=0;this.P=!1;this.D=this.C=null;Fz(a.C.C,()=>{jB(this)})}}
function rB(a,b){return a.D!==b.D?a.D-b.D:a.A!==b.A?a.A-b.A:a.fa!==b.fa?a.fa-b.fa:null!==a.ja&&null!==b.ja?a.ja-b.ja:-1}function sB(a,b){a=a.M;var c=a.tuplet;return tB(b,a.val,a.dots,c?c[0]:0,c?c[1]:0)}class uB{constructor(a,b,c,d,e,f,g,h){this.A=a;this.M=b;this.C=c;this.G=d;this.F=e;this.H=f;this.D=g;this.I=h}}function vB(a){var b=[],c;for(c=0;c<a.length;c++){var d=a[c],e={};e.a=d.A;e.b=d.M;e.c=d.C;e.d=d.G;e.e=d.F;e.f=d.H;e.g=d.D;e.p=d.I;b.push(e)}return b}
function wB(a,b){if(a.C){var c={items:vB(b)};c=`<span id="${"data"}" ${"data-items"}="${btoa(encodeURIComponent(JSON.stringify(c)))}"</span>`;navigator.clipboard.write([new ClipboardItem({["text/html"]:new Blob([c],{type:"text/html"})})]).catch(()=>{a.A=b})}else a.A=b}
function xB(a,b){var c=b.C,d=[],e=a.A,f=b.A,g=a.D,h=a.G,k=a.H;a=a.F;var l=f.length,m;e.length=0;g.length=0;h.length=0;k.length=0;a.length=0;f.sort(rB);for(k=0;k!==l;k++){var n=Sz(f[k]);a=f[k].C();if(n&&-1===Ub(g,n))g.push(n);else if(!n&&a.va&&-1===Ub(h,a))h.push(a);else continue;if(a.va)d.push([a,[]]);else{var p=!1;for(m=0;m<d.length;m++){var q=d[m];if(a===q[0]){q[1].push(n);p=!0;break}}p||d.push([a,[n]])}}for(k=0;k<d.length;k++){q=d[k];a=q[0];f=a;p=q[1];h=IA(f,!1);var t=[];l=[];q=[];m=Ek(f);for(g=
0;g<p.length;g++){var u=p[g];n=GA(u);u.K.J.track.D&&(u=Zi(u,!0,u.X),q[g]=u.W);t.push(n)}h.notes=t;delete h.slur;n=f.H;if(null!==n)for(g=n.length;g--;)l.push(MA(n[g]));f=new uB(h,LA(f.ha),m?m.A:null,[],f.J.O.W,f.J.track.D,l,q);e.push(f);if(a.ha.gb&&(g=Hz(c.A,a),h=cq(g),h.A[0]===g)){g=[];q=h.A;l=0;for(h=q.length;l!==h;l++)g.push(q[l].K);a:{for(h=g.length;h--;)if(!b.H(g[h])){h=!1;break a}h=!0}if(h){h=Zj(a);l=b;q=[];m=0;n=a.ja;for(p=g[g.length-1].ja;n<=p;n++)a=h[n],-1!==Ub(g,a)&&q.push(m),l.H(a)&&m++;
f.G=q}}}return e}function yB(a,b,c,d){zB(a,b,c.A,c.D,c.ja,b.H,d,!0)}
function AB(a,b,c){var d;a.C?navigator.clipboard.read().then(e=>{var f,g;for(f=0;f<e.length;f++){var h=e[f];for(g=0;g<h.types.length;g++){var k=h.types[g];h.getType(k).then(l=>{l.text().then(m=>{a:{if(m=(new DOMParser).parseFromString(m,"text/html"))if(m=m.getElementById("data"))if(m=m.getAttribute("data-items"))if(m=atob(m),"%7B"===m.slice(0,3)&&(m=decodeURIComponent(m)),m){m=JSON.parse(m);break a}m=null}if(m){m=m.items;var n=[],p;for(p=0;p<m.length;p++){var q=m[p];n.push(new uB(q.a,q.b,q.c,q.d,
q.e,q.f,q.g?q.g:[],q.p?q.p:[]))}m=n}else m=null;if(d=m)a.A=d,yB(a,b,c,a.A)})})}}}).catch(()=>{yB(a,b,c,a.A)}):yB(a,b,c,a.A)}
function zB(a,b,c,d,e,f,g,h){if(a.A.length&&-1!==d&&null!==e){a=b.C;var k=b.D.A,l=a.G,m=g[0].F,n=!g[0].H&&b.D.T[c].D,p=g[0].H&&!b.D.T[c].D,q=b.D.Y,t={},u=[],v,w;V(b.A);h&&oA(l);var y=0;for(w=g.length;y!==w;y++){var x=g[y];x.F!==m&&(d++,e=0,m=x.F,k.length===d&&BB(b,d,!1));CB(b,k[d].T[c]);var z=DB(b,d,c,f,e,x.A.grace?tB(b,.25,0,0,0).id:sB(x,b).id,!1);u.push(z);for(v=0;v<x.D.length;v++){var B=x.D[v].i;t[B]=t[B]+1||1}e++;k[d].T[c].A[f].length>e&&EB(b,d,c,f,e)}y=0;for(w=g.length;y!==w;y++){x=g[y];z=u[y];
if(v=x.A.notes.length)for(;v--;)c=x.A.notes[v],p&&(c.pitch=x.I[v],c.string=void 0,c.fret=void 0),z.J.eb=!1,c=z.vb(c),X(b,z.J.O,!0),n&&FB(b,c),h&&lA(l,c,!1,!1,!1,!0);else h&&mA(l,z,null,!1,!1,null,!1,!0,!1);x.A.grace&&GB(b,z,x.A.grace||null)}y=0;for(w=g.length;y!==w;y++){x=g[y];z=u[y];h=x;l=new $k(b.C.C,z.J,0,0,Fe,sB(h,b).id,h.A);h=b;n=h.D.A[z.J.O.W].T[z.J.track.index].A[z.fa][z.ja];V(h.A);null!==l.Z&&HB(h,n,l.Z,!0);GB(h,n,l.D);IB(h,n,l.G);JB(h,n,l.sa);KB(h,n,l.$);LB(h,n,Bk(l));MB(h,n,l.qa);l.N&&NB(h,
43,n,l.N.text,l.N.C,l.N.A,l.N.D);l.M&&NB(h,44,n,l.M.text,l.M.C,l.M.A,l.M.D);l.X&&NB(h,248,n,l.X.text,l.X.C,l.X.A,l.X.D);l.V&&NB(h,249,n,l.V.text,l.V.C,l.V.A,l.V.D);OB(h,n,l.oa);PB(h,n,l.I);QB(h,n,null!==l.da?String(l.da[0]):"");RB(h,n,l.pa,!1);SB(h,n,dk(l));h.da(n,pk(l));h.ea(n,qk(l));h.oa(n,vk(l));h.ia(n,wk(l));h.$(n,sk(l));h.ba(n,tk(l));h.Ha(n,xk(l));h.Ma(n,rk(l));h.Ca(n,Ej(l));h.Ea(n,ek(l));TB(h,n,l.ea);UB(h,n,0!==(l.C&16384));h.Pa(n,yk(l));h.Oa(n,zk(l));VB(h,n,l.ia);W(h.A);for(v=0;v<x.D.length;v++)B=
x.D[v].i,1<t[B]&&al(b.D,B+q-1,1===x.D[v].s,!1,z);x.C&&WB(b,z.J,z.ga,x.C.name?x.C.name:"",x.C.frets?x.C.frets:null);h=z.ha;if(h.gb)if(0<x.G.length){h=Zj(z);z=z.ja;l=[];p=x.G;n=0;for(x=p.length;n!==x;n++)l.push(p[n]+z);XB(b,h,l)}else-1===Hz(a.A,z).G&&YB(b,z,h.value,h.Ta)}W(b.A)}}class ZB{constructor(){this.C=!!(navigator.clipboard&&navigator.clipboard.read&&navigator.clipboard.write);this.A=[];this.D=[];this.G=[];this.H=[];this.F=[]}}
function $B(a,b){var c="/api/v1/shortcutsets/"+(-1===a.id?"":a.id+"/"),d={name:a.name,shortcuts:JSON.stringify(a.A)};kc("POST",c,d,e=>{a.id=e.id;b()},Mr)}class aC{constructor(a,b,c,d,e,f){this.id=a;this.name=b;this.G=c;this.A=[];this.D=d;this.F=e;this.C=f}load(a){this.C?a():kc("GET",this.G,null,b=>{this.A=b;this.C=!0;a()},Mr)}}
function bC(a){kc("GET","/editorprefs/",null,b=>{var c=a.A.N,d=b.ss,e=c.H,f;var g=0;for(f=d.length;g!==f;g++){var h=d[g];e.push(new aC(h.i,h.n,h.u,h.e,h.a,!1))}a.C=b.d;a.F=b.pi;a.G=b.ps;a.D=b.ma;cC(c,a.C);a.loaded=!0;a.D&&a.A.Y&&(b=a.A.Y,b.status===dC&&b.connect());eC(a)},Mr)}function fC(a){if(a.loaded){var b={play_note_input:a.F,play_note_selection:a.G,midi_autoconnect:a.D};-1!==a.C&&(b.default_shortcutset_id=a.C);kc("POST","/api/v1/editorprefs/",b,Mr,Mr)}}
function eC(a){var b=a.A.Y,c=r("midistatus"),d=!0;if(b){if(!b.D)c.innerHTML='This browser does not support MIDI. <a href="/help/en/creating/basics/308/midi-entry/" target="_blank">Learn more</a>';else if(b.status===gC)c.innerHTML="Checking MIDI status\u2026";else if(b.status===hC)c.innerHTML="Searching for MIDI devices\u2026";else if(b.status===iC||b.status===jC)c.innerHTML='No MIDI devices found. <a href="/help/en/creating/basics/308/midi-entry/" target="_blank">Help</a>';else if(b.status===dC||
b.status===kC)c.innerHTML="No MIDI devices connected.",d=!1;else if(b.status===lC){if(0===b.A.length)c.innerHTML='No MIDI devices found. <a href="/help/en/creating/basics/308/midi-entry/" target="_blank">Help</a>';else{b=b.A;for(var e=b.length,f=[];e--;)f.push(b[e].name);c.textContent=`Connected to ${f.join(", ")}.`}E(a.A.qa,"hidden",!1)}E(r("midiconnect"),"hidden",d)}}
class mC{constructor(a){this.A=a;this.loaded=!1;this.C=-1;this.G=this.F=1;this.D=!1;this.H=r("edprefsform");bC(this);a.C.assign([87],b=>{b=b.data;b!==this.C&&(this.C=b,fC(this))});a.C.assign([208],()=>{eC(this)});L(r("midiconnect"),"click",b=>{b.preventDefault();this.A.Y.connect()});L(r("midiautoconnect"),"click",()=>{var b=this.A.Y;b.status!=kC&&b.status!=dC||b.connect()});L(this.H,"submit",b=>{b.preventDefault();var c=this.H;b=parseInt(c.noteselect.value,10);var d=parseInt(c.noteinput.value,10);
c=c.midiautoconnect.checked;if(b!==this.G||d!==this.F||c!==this.D)this.G=b,this.F=d,this.D=c,fC(this);ce("edprefsmodal")})}}var gC=1,iC=2,dC=3,kC=4,hC=5,lC=6,jC=7;function nC(a){0===a.status&&a.D&&(oC(a,gC),navigator.permissions.query({name:"midi"}).then(b=>{"granted"===b.state?oC(a,dC):"prompt"===b.state?oC(a,kC):oC(a,iC)}))}function oC(a,b){a.status=b;Q(a.C.C,208)}
function pC(a,b){b.inputs.forEach(c=>{qC(a,c)});b.onstatechange=c=>{c=c.port;"input"===c.type&&("connected"===c.state?qC(a,c):"disconnected"===c.state&&(c=a.A.indexOf(c),-1!==c&&a.A.splice(c,1),oC(a,lC)))}}function qC(a,b){-1===a.A.indexOf(b)&&(a.A.push(b),oC(a,lC),b.onmidimessage=c=>{if(144<=c.data[0]&&159>=c.data[0]&&0!==c.data[2]&&a.C.C.S&&!le()){var d=a.C;c=c.data[1];var e=bj(d.C.G.A[0].C().J);c=ng(c,e);rC(d,c)}})}
class sC{constructor(a){this.C=a;this.D="undefined"!==typeof navigator.requestMIDIAccess;this.status=0;this.A=[];nC(this)}connect(){if(this.status===kC||this.status===dC)oC(this,hC),navigator.requestMIDIAccess().then(a=>{pC(this,a);oC(this,lC)}).catch(()=>{oC(this,jC)})}}function lB(a){var b=a.Ja;a=a.C.G.A;var c;var d=b.length=0;for(c=a.length;d!==c;d++){var e=a[d];b.push([e.F,e.I,e.D,e.A,e.fa,e.ja,e.G,e.ka])}}function nB(a,b){a.H=b;a.C.F.ia=b;a.Ba.setAttribute("data-current-voice",b+1)}
function tB(a,b,c,d,e){var f=a.D,g=f.X;b=f.I[Zl(f,null,b,c,d,e)];g!==f.X&&oB(a,!0);return b}
function BB(a,b,c){null===b&&(b=a.D.A.length);var d=a.C,e=a.D,f=!!e.A.length,g=d.G,h=e.A,k=h.length?0===b?h[0]:h[b-1]:null,l=[],m=e.F,n;V(a.A);if(k){var p=0;for(n=k.T.length;p!==n;p++){var q=k.T[p];2===q.F&&CB(a,q);if(q.C&&0<b){var t=b-1+(0<q.C?0:q.C);t+h[t].T[p].C>b&&tC(a,t,p,h[t].T[p].C+1,!1)}t={};t.clef=Aj(q,0===b?Fe:k.Fa).code;t.voices=[];t.key=q.M;t.fr=1;l.push(t)}}p=b;n=k?bj(k.T[0]):0;k=new $l(e,p,-1,k?k.H:4,k?k.I:4,k?Gl(k):!1,k?FA(k):null,n,!1,null,null,!1,null,l,k?k.M:null,!1,null,null,null,
0);e.A.splice(p,0,k);for(p=m.length;p--;)k=m[p],(0!==b||0!==k.A||0!==k.C)&&k.A>=b&&uC(a,p,k.A+1);for(m=e.T.length;m--;){k=e.T[m].S;if(null!==k)for(p=k.length;p--;)k[p].A>=b&&(l=k[p].A+1,n=a.D.T[m].S[p],l!==n.A&&(n.A=l));k=e.T[m].P;if(null!==k)for(p=k.length;p--;)l=k[p],l.Ua>=b&&l.Ua++,l.Qa>=b&&l.Qa++}bm(e,!0);vC(a);lm(e);c||wC(a,null);p=0;for(n=g.A.length;p!==n;p++)e=g.A[p],e.D>=b&&(e.D++,Rz(e));oB(a,!0);jB(a.A);W(a.A);c||Q(d,4);f&&Q(d,184);xC(a)}
function CB(a,b){var c=b.F;c&&(V(a.A),2!==c||Kl(b.O)?3===c&&b.O.W&&(il(b).F=0):kl(b).F=0,b.F=0,X(a,null,!1),W(a.A))}function DB(a,b,c,d,e,f,g){var h=a.D,k=h.A[b],l=k.T[c];V(a.A);l.eb=!1;yC(a,b,c,d,null,!1);var m=l.A[d];f=new $k(h,k.T[c],d,e,Fe,f,{});if(m[e-1]){h=m[e-1].A;for(var n=h.length;n--;)zC(a,h[n],!0)}if(m[e])for(h=m[e].A,n=h.length;n--;)AC(a,h[n],!0);l.N&&BC(a,b,c,d,e,1);m.splice(e,0,f);g||(X(a,k,!0),CC(a,m,e-1,-1));W(a.A);return f}
function EB(a,b,c,d,e){var f=a.D.A[b].T[c].A[d],g=f[e];V(a.A);xz(g)&&DC(a,cq(Hz(a.C.A,g)));g.J.N&&BC(a,b,c,d,e,-1);EC(a,g);f.splice(e,1);PA(a.D);lm(a.D);X(a,null,!1);W(a.A)}function X(a,b,c){wC(a,b);oB(a,!0);jB(a.A);a.sa=!0;xC(a);c&&FC(a);a.pa&&clearTimeout(a.pa);a.pa=setTimeout(a.nb,5E3)}function FB(a,b){var c=b.K,d=c.J.track,e=Dj(b);d.D&&e&&(e=$A(d,Qo(Hz(a.C.A,c)),e,null===b.ka?-1:b.ka),100!==e[0]&&GC(a,b,e[1],e[0],Hh(!1,d,e[0],e[1],aj(b),b.N,c.ia,null,c.J.M).A,!0,!0))}
function GB(a,b,c){if(c!==b.D&&(b.A.length||!c)){V(a.A);if(c){xz(b)&&DC(a,cq(Hz(a.C.A,b)));b.D=c;ak(b,a.D,null);var d=Vj(b,a.D,!1);d&&!d.D&&HC(a,b,!1)}else b.D=c,IC(a,b,.125,0,0,0,!1);CC(a,Zj(b),b.ja,-1);X(a,b.J.O,!!c);W(a.A)}}
function WB(a,b,c,d,e){var f=a.C.A,g=b.track,h=Fk(b,c),k=null===h?null:h.A.A,l=!1;if(d!==(null===h?"":h.A.name)||!EA(e,k)){V(a.A);h=b.G;for(k=h.length;k--;)if(h[k].position===c){h.splice(k,1);break}""!==d||null!==e?(h=!g.$&&Dn(f,g.index,!0,!1,!1),k=!g.ea&&Dn(f,g.index,!1,!0,!1),bl(b,JC(g,d,e),c),l=!0,lo(f,g,!h,!k),Gn(f,g,!1)):Dn(f,g.index,!0,!1,!1)||(lo(f,g,!1,!1),Gn(f,g,!1));X(a,b.O,l);W(a.A);return!0}return!1}
function XB(a,b,c){b=b[0];var d=b.J,e={};e.v=b.fa;e.i=c;if(null===d.N||"undefined"===typeof d.N)d.N=[];d.N.push(e);d.N.sort(bB);X(a,d.O,!0)}function YB(a,b,c,d){var e=null,f=0,g=0;if(TA(b.J)&&!b.D){V(a.A);null===c&&(c=b.ha.value);null===d&&(d=b.ha.Ta);if(xz(b)){var h=Hz(a.C.A,b);e=cq(h).A[0].K;f=b.ha.gb;g=b.ha.mb;DC(a,cq(h))}IC(a,b,c,d,0,0,!0);e&&KC(a,e.J.O.W,e.J.track.index,e.fa,e.ja,f,g);W(a.A)}}
function LC(a){var b="",c="",d="",e=yA.length,f,g,h;for(f=0;f!==e;f++){var k=yA[f];var l=k[3];var m=k[0];b+='<li id="editsec'+m+'" class="tab"><button class="editor-tab-button" data-sec="'+m+'"><span class="editor-tab-button-text">'+Qa(k[1])+"</span></button></li>";c+='<div id="editsubsec'+m+'" class="editsubsec">';k=0;for(g=l.length;k!==g;k++){var n=l[k];c+='<ul class="editorul">';var p=0;for(h=n.length;p!==h;p++)c+=iB(hB(n[p]));c+="</ul>"}c+="</div>";5===m&&(d=c)}a.Za&&(a.Za.innerHTML=b);a.P.innerHTML=
c;a.Sa.innerHTML=d;c="";f=0;for(e=wA.length;f!==e;f++)c+=iB(hB(wA[f]));a.Ba.innerHTML=c;a.Ba.setAttribute("data-current-voice",a.H+1);FC(a)}
function MC(a,b){var c=a.C;if(NC(a,b,c.G)){87!==b&&88!==b&&lB(a);try{var d=a.F,e=a.D,f=d.A,g=f.G,h=rA(g),k=nA(g),l=hA(g,!1),m=hA(g,!0),n=sA(g,!0,!1),p=sA(g,!0,!0),q=h.length?h[0]:-1,t=-1===q?null:e.A[q],u=k.length?k[0]:null,v=u?u.track.index:-1,w=l.length?l[0]:null,y=w?w.fa:-1,x=0,z=!0;switch(b){case 238:Q(f,119);Nv(f.D);break;case 266:iv(f.D,0,!0,!1);break;case 347:Mw(f,!f.xa);break;case 87:pB(a.A);break;case 88:var B=a.A;B.A<B.G.length-1&&(B.A++,mB(B,B.A),Q(B.M.C,210));break;case 99:OC(a,2);break;
case 261:var F=a.za;if(F.loaded){var H=F.H;H.noteselect.value=F.G;H.noteinput.value=F.F;H.midiautoconnect.checked=F.D;be("edprefsmodal")}break;case 263:PC(a.rb,!0);break;case 279:ox(d,"courses",131,null);break;case 272:ox(d,"guide",121,null);break;case 280:ox(d,"edittouch",132,null);break;case 259:QC(a.N,!a.N.I);break;case 139:case 140:case 241:case 242:if(!Xt(f.D)){var J=139===b||241===b,U=a.C.G,G=U.A;if(1===G.length&&!$z(U))RC(a,G[0],J)&&Vz(U,G[0].C(),!0,!0,!0);else if(!U.F()){var N=U.D(!1).C(),
R=N.J.track.D&&N.J.track.Y;oA(U);J?mA(U,N,N.J.track.C&&N.A.length?N.A[N.A.length-1]:null,!1,!1,null,!0,!0,!0):mA(U,N,!R&&N.A.length?N.A[0]:null,R,!1,R?N.J.track.M-1:null,!0,!0,!0)}}break;case 190:case 191:Xt(f.D)||SC(a,191===b);break;case 192:case 193:var K=f.G,S=193===b;if(!K.F()&&1===fA(K).length){gA(K);jA(K);var T=K.C.C,I=K.G?K.G:K.D(S).C(),Y=S?Vj(I,T,!0):Ri(I,T,!0);if(Y)a:{for(var ca=K.A,ba=ca.length,za;ba--;)if(za=ca[ba],za.C()===Y){var Oa=za;break a}Oa=null}else Oa=null;var Qb=Oa;if(Qb&&Qb.I){kA(K,
I);var qa=I;for(I=Y;qa&&(Ml(qa.J.O)||0<qa.J.C);)if(kA(K,qa),qa=S?Vj(qa,T,!0):Ri(qa,T,!0)){if(!S&&0>qa.J.C&&0<=I.J.C)break;I=qa}}else if(Y){do I=Y,iA(K,Y,!1),Y=S?Vj(Y,T,!0):Ri(Y,T,!0);while(Y&&(S&&Ml(Y.J.O)||!S&&(Ml(Y.J.O)||0<Y.J.C)&&0>I.J.C))}cA(K);K.G=I}break;case 194:gA(f.G);break;case 281:var Eb=f.G,zf=a.H,Fb=nA(Eb),Gc=Fb.length,Aa,fa;for(oA(Eb);Gc--;)if(Aa=Fb[Gc].A[zf])for(fa=Aa.length;fa--;)iA(Eb,Aa[fa],!1);jA(Eb);cA(Eb);break;case 160:TC(a);break;case 209:TC(a)&&UC(a);break;case 161:var hb=
a.C.G.D(!1);hb&&AB(a.Z,a,hb);break;case 64:ox(d,"trackform",89,[!0,"","","G2",0,0,!1,"",0]);break;case 103:r("addtrackmodalcontent").scrollTop=0;be("addtrackmainmodal");break;case 100:ox(d,"trackform",89,[!0,"guitar","Guitar","G2",24,-12,!0,"64 59 55 50 45 40",0]);break;case 101:ox(d,"trackform",89,[!0,"bass-guitar","Bass","F4",33,-12,!0,"43 38 33 28",0]);break;case 102:V(a.A);VC(a,"piano","Piano",0,5,[],null,null,0,1,"G2",0,!1,!0,!0,!1,!1,!1);VC(a,"piano","Piano",0,5,[],null,null,0,2,"F4",0,!1,!0,
!0,!1,!1,!1);W(a.A);break;case 204:ox(d,"trackform",89,[!0,"mandolin","Mandolin","G2",25,0,!0,"76 69 62 55",0]);break;case 205:ox(d,"trackform",89,[!0,"","","G2",0,0,!1,"",0]);break;case 206:ox(d,"trackform",89,[!0,"","","F4",0,0,!1,"",0]);break;case 219:ox(d,"trackform",89,[!1,"drums","Drum kit","P",0,0,!1,"",0]);break;case 265:VC(a,"clarinet","Clarinet",71,5,[],null,null,-2,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 271:VC(a,"Percussion","",1E3,1,[],null,2,0,0,"P",0,!1,!0,!1,!1,!1,!1);break;case 289:ox(d,
"trackform",89,[!0,"ukulele","Ukulele","G2",241,0,!0,"69 64 60 67",0]);break;case 290:VC(a,"accordion","Accordion",21,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 291:VC(a,"saxophone","Soprano sax",64,5,[],null,null,-2,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 306:VC(a,"saxophone","Alto sax",65,5,[],null,null,-9,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 308:VC(a,"saxophone","Tenor sax",66,5,[],null,null,-14,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 311:VC(a,"saxophone","Baritone sax",67,5,[],null,
null,-21,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 292:VC(a,"trumpet","Trumpet",56,5,[],null,null,-2,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 293:VC(a,"trombone","Trombone",57,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!0,!1);break;case 294:VC(a,"violin","Violin",40,5,[],null,null,0,0,"G2",0,!1,!0,!0,!0,!1,!1);break;case 295:VC(a,"viola","Viola",41,5,[],null,null,0,0,"C3",0,!1,!0,!0,!1,!1,!1);break;case 296:VC(a,"flute","Flute",73,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 297:VC(a,"cello","Cello",
42,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 298:VC(a,"tuba","Tuba",58,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 299:VC(a,"bass","Bass",32,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 300:VC(a,"vibraphone","Vibraphone",11,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 301:case 312:case 321:VC(a,"voice",301===b?"Soprano":312===b?"Alto":"Voice",52,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 315:VC(a,"voice","Tenor",52,5,[],null,null,0,0,"H2",
0,!1,!0,!0,!1,!1,!1);break;case 319:VC(a,"voice","Bass",52,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 302:VC(a,"xylophone","Xylophone",13,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 303:VC(a,"bagpipe","Bagpipe",109,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 304:ox(d,"trackform",89,[!0,"banjo","Banjo","G2",105,-12,!0,"62 59 55 50 67",0]);break;case 305:VC(a,"bassoon","Bassoon",70,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 307:VC(a,"cornet","Cornet",
56,5,[],null,null,-2,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 309:VC(a,"english-horn","English horn",69,5,[],null,null,-7,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 310:VC(a,"euphonium","Euphonium",58,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 313:VC(a,"harmonica","Harmonica",22,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 314:V(a.A);VC(a,"harp","Harp",46,5,[],null,null,0,1,"G2",0,!1,!0,!0,!1,!1,!1);VC(a,"harp","Harp",46,5,[],null,null,0,2,"F4",0,!1,!0,!0,!1,!1,!1);W(a.A);break;
case 316:VC(a,"horn-in-f","Horn in F",60,5,[],null,null,5,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 317:V(a.A);VC(a,"marimba","Marimba",12,5,[],null,null,0,1,"G2",0,!1,!0,!0,!1,!1,!1);VC(a,"marimba","Marimba",12,5,[],null,null,0,2,"F4",0,!1,!0,!0,!1,!1,!1);W(a.A);break;case 318:VC(a,"oboe","Oboe",68,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 320:V(a.A);VC(a,"organ","Organ",19,5,[],null,null,0,1,"G2",0,!1,!0,!0,!1,!1,!1);VC(a,"organ","Organ",19,5,[],null,null,0,2,"F4",0,!1,!0,!0,!1,!1,!1);
W(a.A);break;case 322:VC(a,"piccolo","Piccolo",72,5,[],null,null,12,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 323:VC(a,"recorder","Recorder",74,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 324:VC(a,"sitar","Sitar",104,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 325:VC(a,"sousaphone","Sousaphone",58,5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 327:VC(a,"synthesizer","Synthesizer",4,5,[],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1);break;case 328:VC(a,"timpani","Timpani",47,
5,[],null,null,0,0,"F4",0,!1,!0,!0,!1,!1,!1);break;case 346:V(a.A);VC(a,"pedal-steel","Pedal steel",27,5,[66,63,68,64,59,56,54,52,50,47],null,null,0,0,"G2",0,!1,!0,!0,!1,!1,!1).V={0:new oi(0,"A",{4:2,9:2}),1:new oi(1,"B",{2:1,5:1}),2:new oi(2,"C",{3:2,4:2}),3:new oi(3,"D",{3:-1,7:-1}),4:new oi(4,"E",{1:-1,8:-1}),5:new oi(5,"F",{3:1,7:1}),6:new oi(6,"G",{0:1,6:1})};W(a.A);break;case 250:var Sa=k[0].track,ab=!1;V(a.A);if(Sa.A)WC(a,Sa),ab=!0;else if(!Sa.D){var bb=a.D.T,cb=Sa.index;cb<bb.length-1&&!bb[cb+
1].D&&!bb[cb+1].A?(Sa.A=1,bb[cb+1].A=2,ab=!0):0===cb||bb[cb-1].D||bb[cb-1].A||(bb[cb-1].A=1,Sa.A=2,ab=!0)}ab&&(lm(a.D),X(a,null,!0));W(a.A);break;case 208:be("uploadmodal");break;case 247:window.soundslice.isNonfree?ox(d,"copyslice",100,null):window.soundslice.openUpgradeModal("Copying notation across slices");break;case 337:case 338:case 340:case 343:if(window.soundslice.isNonfree)if(343===b)hy(a.F);else{var xb;338===b?xb="gpx/":337===b?xb="musicxml/":340===b&&(xb="midi/");a.F.D.open(em(a.D)+xb,
"ssexport")}else window.soundslice.openUpgradeModal("Exporting slices");break;case 252:var mc=a.D.A,sb=mc.length,td=a.D.T.length,Md,Gb;for(V(a.A);sb--;)for(Md=td;Md--;){var ud=mc[sb].T[Md].A;for(Gb=ud.length;Gb--;)CC(a,ud[Gb],0,-1)}W(a.A);break;case 264:un(f.A,!f.F.S);jB(a.A);break;case 1:BB(a,0>q?0:q,!1);break;case 2:q=XC(t).W;BB(a,q===e.A.length-1?null:q+1,!1);break;case 237:BB(a,null,!1);break;case 3:YC(a,h,aA(f.G));break;case 4:var Hc=t=XC(t),dc=0===(t.A&4);dc!==(0!==(Hc.A&4))&&(Hc.A=dc?Hc.A|
4:Hc.A&-5,X(a,Hc,dc));break;case 5:ox(d,"etcmodals",101,t);break;case 6:ox(d,"etcmodals",102,u);break;case 7:var Rb=t,Hb=!Hl(t);Hb!==Hl(Rb)&&(Rb.A=Hb?Rb.A|2:Rb.A&-3,X(a,Rb,Hb),Q(a.C,12));break;case 11:var lb=t,id=!pl(t);id!==pl(lb)&&(lb.A=id?lb.A|8:lb.A&-9,X(a,lb,id));break;case 260:var Ib=t,Wc=!Il(t);Wc===Il(Ib)||Wc&&!Ib.W||(Wc?(Ib.A|=16,Ib.A&=-129,Ib.A&=-257):Ib.A&=-17,X(a,Ib,Wc));break;case 273:ZC(a,t,0===(t.A&128),!1);break;case 275:$C(a,t,!Jl(t),!1);break;case 274:var ec=a.D.A,mb=ec.length,Wa=
!1;for(V(a.A);mb--;)Wa=ZC(a,ec[mb],!1,!0)||Wa,Wa=$C(a,ec[mb],!1,!0)||Wa;Wa&&(dm(a.C.C),X(a,null,!0));W(a.A);break;case 68:ox(d,"etcmodals",104,t);break;case 74:!u.C&&zl(u,!0,!1)||ox(d,"etcmodals",109,u);break;case 72:aD(a,q,v,1===u.F?0:1);break;case 262:aD(a,q,v,2===u.F?0:2);break;case 341:x=k.length;for(V(a.A);x--;){var zc=a,Z=k[x],Xb=!k[x].eb;if(Z.eb!==Xb){var jd=zc.C.G;V(zc.A);oA(jd);Z.eb=Xb;Z.A=[];Xb||DB(zc,Z.O.W,Z.track.index,0,0,tB(zc,1,0,0,0).id,!1);X(zc,Z.O,!0);mA(jd,Z.A[0][0],null,!1,!1,
null,!1,!0,!1);W(zc.A)}}W(a.A);break;case 10:ox(d,"edittempo",103,[w.J.O.W,w.ga.ra/w.J.O.Fa.ra]);break;case 12:case 13:var Jb=w,kd=13===b;if(TA(Jb.J)){V(a.A);var Xc=Jb.fa,Yb=Jb.ha,Sb=Jb.D?tB(a,.25,0,0,0).id:tB(a,Yb.value,Yb.Ta,0,0).id,Tb=kd?Jb.ja+1:Jb.ja,Pa=a.C.G,He=tA(Pa),Ic;if(0<Tb&&Tb<Jb.J.A[Xc].length-1){var yb=Hz(a.C.A,Jb).A.S;for(Ic=yb.length;Ic--;){var de=yb[Ic];var ld=de.A[0].K;ld.J===Jb.J&&ld.fa===Xc&&ld.ja<Tb&&de.A[de.A.length-1].K.ja>=Tb&&DC(a,de)}}Jb=DB(a,Jb.J.O.W,Jb.J.track.index,Xc,
Tb,Sb,!1);oA(Pa);if(Ic=He.length)for(;Ic--;)mA(Pa,Jb,null,!0,!1,He[Ic],!0,!0,!0);else mA(Pa,Jb,null,!1,!1,null,!0,!0,!0);W(a.A)}break;case 47:ox(d,"chord",97,[u,w.ga]);break;case 210:ox(d,"lyric",98,w);break;case 63:ox(d,"etcmodals",106,w);break;case 108:ox(d,"etcmodals",107,w);break;case 71:ox(d,"etcmodals",110,l);break;case 134:ox(d,"etcmodals",105,w);break;case 181:ox(d,"etcmodals",108,t);break;case 276:ox(d,"edittrombone",128,w);break;case 342:ox(d,"edittranspose",206,l);break;case 277:window.soundslice.isNonfree?
ox(d,"editcolor",130,n):window.soundslice.openUpgradeModal("Ability to color notes");break;case 82:if(l){var vd=l.length;l.sort(aB);for(V(a.A);vd--;){var Nd=a,Ac=l[vd],ag=new uA(Nd.C),Kb=Ac.J.O.W,wa=Ac.J.track.index,Bc=Ac.fa;iA(ag,Ac,!1);bD(Nd,ag,Ac,Nd.D.A[Kb].T[wa].A[Bc].length,!1)}W(a.A)}break;case 236:if(w){var fc=w,Ha;V(a.A);iA(g,fc,!0);bD(a,g,fc,fc.ja+1,!0);if(Ha=g.A[0].C())oA(g),iA(g,Ha,!0);W(a.A)}break;case 8:case 9:case 48:case 45:case 46:case 246:case 62:case 81:ox(d,"text",96,[b,w,n[0],
w.J.O]);break;case 61:case 196:ox(d,"fingering",137,[b,w,n[0],w.J.O]);break;case 288:ox(d,"text",96,[b,w,n[0],null]);break;case 332:for(var ra=!1,Xa=a.D.A.length,nc,da,db,ha,sa,ia,xa,Da,nb,Od,Zb,ee;Xa--;)for(ia=a.D.A[Xa],nc=ia.T.length;nc--;)for(xa=ia.T[nc].A,da=xa.length;da--;)for(Da=xa[da],db=Da.length-1;0<db--;)if(nb=Da[db],nb.D)for(ha=nb.A.length;ha--;)if(Od=nb.A[ha],Od.U)for(Zb=Da[db+1],sa=Zb.A.length;sa--;)if(ee=Zb.A[sa],!ee.U){ee.U=Od.U;Od.U=null;ra=!0;break}ra&&X(a,null,!0);break;case 43:case 44:case 248:case 249:ox(d,
"text",94,[b,w]);break;case 76:case 77:case 78:case 79:V(a.A);y=76===b?0:77===b?1:78===b?2:3;u||(u=e.A[0].T[0]);var ib=yC(a,u.O.W,u.track.index,y,1===g.A.length&&g.A[0].F?g.A[0].ka:null,!0),Jc=u,Ya=y,wd=!ib;if(Ya!==a.H){nB(a,Ya);if(wd){var Ca=a.C.G,tb=1===Ca.A.length&&Ca.A[0].F?Ca.A[0].ka:null;oA(Ca);Ya<Jc.A.length&&(null===tb?Zz(Ca,Jc,Ya,!1):mA(Ca,Jc.A[Ya][0],null,!0,!1,tb,!0,!0,!0))}jB(a.A)}W(a.A);break;case 24:if(xz(w)&&3===w.ha.gb&&2===w.ha.mb)DC(a,cq(Hz(f.A,w)));else if(1===l.length)KC(a,w.J.O.W,
w.J.track.index,w.fa,w.ja,3,2);else a:{var Lb=l.length,ub;if(!(2>Lb)){var $b=l[0].J;var fb=l[0].fa;var zb=l[0].ja;for(ub=0;ub!==Lb;ub++){var Ta=l[ub];if(xz(Ta)||Ta.D||Ta.J!==$b||Ta.fa!==fb)break a;if(0!==ub){if(Ta.ja!==zb+1)break a;zb++}}V(a.A);var Cc=[];for(ub=0;ub!==Lb;ub++)Ta=l[ub],IC(a,Ta,Ta.ha.value,Ta.ha.Ta,3,2,!0),Cc.push(Ta.ja);XB(a,Zj(l[0]),Cc);W(a.A)}}break;case 25:xz(w)?DC(a,cq(Hz(f.A,w))):(be("tupletmodal"),setTimeout(cD,200));break;case 14:case 15:case 16:case 17:case 18:case 19:case 282:case 283:case 284:var Kc=
14===b?1:15===b?.5:16===b?.25:17===b?.125:18===b?.0625:19===b?.03125:282===b?.015625:283===b?.0078125:.00390625;x=l.length;for(V(a.A);x--;)YB(a,l[x],Kc,null);W(a.A);break;case 65:case 66:x=l.length;for(V(a.A);x--;){var oc=void 0,Lc=void 0,Ab=void 0,ob=l[x],fe=vA.length;if(ob.D)Ab=.25,Lc=0;else{Ab=ob.J.eb?1:ob.ha.value;if(65===b){for(oc=0;oc!==fe;oc++)if(vA[oc]>Ab){Ab=vA[oc];break}2<Ab&&(Ab=2)}else{for(oc=fe-1;0<=oc;oc--)if(vA[oc]<Ab){Ab=vA[oc];break}.00390625>Ab&&(Ab=.00390625)}Lc=ob.ha.Ta}YB(a,ob,
Ab,Lc)}W(a.A);break;case 20:case 21:var bg=20===b?1:2;for(x=l.length;x--;)if(w=l[x],!w.D&&w.ha.Ta!==bg){z=!1;break}x=l.length;for(V(a.A);x--;)YB(a,l[x],l[x].J.eb?1:null,z?0:bg);W(a.A);break;case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 178:case 179:case 180:var pb=-1;switch(b){case 162:pb=1;break;case 163:pb=2;break;case 164:pb=3;break;case 165:pb=4;break;case 166:pb=5;break;case 167:pb=6;break;
case 168:pb=7;break;case 169:pb=8;break;case 170:pb=9;break;case 171:pb=10;break;case 172:pb=11;break;case 173:pb=12;break;case 174:pb=13;break;case 175:pb=14;break;case 176:pb=15;break;case 177:pb=16;break;case 178:pb=17;break;case 179:pb=18;break;case 180:pb=19}var ge=pb;var vb=e.A[h[0]];dD(a,vb,ge,Ql(vb,[ge])?null:new Zh(ge,!0));break;case 104:case 105:case 106:case 107:case 109:case 110:case 111:case 195:case 112:case 113:case 114:case 115:case 116:case 117:case 135:case 136:case 137:case 138:case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 125:case 126:case 127:case 128:case 129:case 130:case 131:case 132:case 133:x=
l.length;for(V(a.A);x--;)if(w=l[x],104===b||105===b||106===b||107===b)JB(a,w,104===b?1:105===b?2:106===b?3:null);else if(109===b||110===b||111===b||195===b||112===b){var Za=0;switch(b){case 109:Za=1;break;case 110:Za=2;break;case 111:Za=3;break;case 195:Za=4}TB(a,w,Za)}else if(113===b||114===b||115===b||116===b||117===b)IB(a,w,113===b?1:114===b?2:115===b?3:116===b?4:0);else if(135===b||136===b||137===b||138===b)eD(a,w.J,w.ga,135===b?"G2":136===b?"F4":137===b?"C3":"C4");else{var Je=a,Yc=w,Mc=fB(b);
Mc&&Mc===Yc.Y&&(Mc=null);Mc!==Yc.Y&&(Yc.Y=Mc,X(Je,Yc.J.O,!!Mc))}W(a.A);break;case 67:case 278:case 70:case 57:case 58:case 216:case 217:case 60:case 59:case 26:case 40:case 41:case 86:case 251:case 211:case 253:case 254:case 329:case 330:for(x=l.length;x--;)if(w=l[x],67===b&&w.A.length&&1!==w.D||278===b&&w.A.length&&2!==w.D||70===b&&!dk(w)||57===b&&w.A.length&&2!==w.$||58===b&&w.A.length&&1!==w.$||60===b&&w.A.length&&1!==w.oa||59===b&&w.A.length&&2!==w.oa||26===b&&w.A.length&&!w.F||40===b&&w.A.length&&
2!==w.pa||41===b&&w.A.length&&3!==w.pa||211===b&&0===(w.C&16384)||216===b&&w.A.length&&2!==w.qa||217===b&&w.A.length&&1!==w.qa||251===b&&uk(w)||253===b&&1!==Bk(w)||254===b&&2!==Bk(w)||329===b&&1!==rz(w)||330===b&&2!==rz(w)){z=!1;break}x=l.length;for(V(a.A);x--;)if(w=l[x],67===b&&GB(a,w,z?null:1),278===b)GB(a,w,z?null:2);else if(70===b)SB(a,w,!z);else if(57===b)KB(a,w,z?null:2);else if(58===b)KB(a,w,z?null:1);else if(216===b)MB(a,w,z?null:2);else if(217===b)MB(a,w,z?null:1);else if(60===b)OB(a,w,z?
null:1);else if(59===b)OB(a,w,z?null:2);else if(26===b)HB(a,w,z?0:1,!0);else if(40===b)RB(a,w,z?null:2,!0);else if(41===b)RB(a,w,z?null:3,!0);else if(211===b)UB(a,w,!z);else if(251===b)fD(a,w,z);else if(86===b){var Dc=void 0,he=a,Zc=w;V(he.A);var Af=Zc.A,ie=Af.length;if(ie)for(;ie--;)Dc=Af[ie],gD(he,Zc.J.O.W,Zc.J.track.index,Zc.fa,Zc.ja,Jj(Dc));W(he.A)}else 253===b?LB(a,w,z?null:1):254===b?LB(a,w,z?null:2):329===b?hD(a,w,z?null:1):330===b&&hD(a,w,z?null:2);W(a.A);break;case 49:case 50:case 51:case 52:case 53:case 55:case 56:case 27:case 28:case 23:case 218:case 233:case 222:for(x=
m.length;x--;)if(49===b&&!vk(m[x])||50===b&&!wk(m[x])||51===b&&!sk(m[x])||52===b&&!tk(m[x])||53===b&&!xk(m[x])||55===b&&!Ej(m[x])||56===b&&!ek(m[x])||27===b&&!pk(m[x])||28===b&&!qk(m[x])||23===b&&sz(m[x])&&!rk(m[x])||218===b&&!yk(m[x])||233===b&&!zk(m[x])||222===b&&-1!==m[x].Z){z=!1;break}if(49===b)var Bb=a.oa;else 50===b?Bb=a.ia:51===b?Bb=a.$:52===b?Bb=a.ba:53===b?Bb=a.Ha:55===b?Bb=a.Ca:56===b?Bb=a.Ea:27===b?Bb=a.da:28===b?Bb=a.ea:23===b?Bb=a.Ma:218===b?Bb=a.Pa:233===b?Bb=a.Oa:222===b&&(Bb=a.yb);
x=m.length;for(V(a.A);x--;)w=m[x],Bb.apply(a,[w,!z]);W(a.A);break;case 38:case 29:case 30:case 258:case 31:case 32:case 33:case 34:case 35:case 36:case 39:case 42:case 54:case 207:case 22:case 212:case 213:case 214:case 215:case 268:case 267:case 269:case 270:case 220:case 221:case 339:case 243:case 244:case 245:case 344:for(x=n.length;x--;){var ka=n[x];if(38===b&&!ka.ba||29===b&&!Vi(ka)||30===b&&4!==ka.F||258===b&&3!==ka.F||31===b&&2!==ka.I||32===b&&1!==ka.I||33===b&&2!==ka.F||34===b&&1!==ka.F||
35===b&&0===(ka.A&16)||36===b&&0===(ka.A&32)||39===b&&0===(ka.A&256)||42===b&&(null===ka.N||1!==ka.N[0])||54===b&&!lj(ka)||207===b&&0===(ka.A&512)||22===b&&!Ii(ka)||212===b&&!rj(ka)||213===b&&!sj(ka)||214===b&&!qj(ka)||215===b&&!pj(ka)||(268===b||267===b||269===b||270===b)&&ka.P!==eB(b)||220===b&&!hj(ka)||221===b&&!tj(ka)||339===b&&10!==ka.Y||243===b&&1!==uj(ka)){z=!1;break}}x=n.length;for(V(a.A);x--;)if(ka=n[x],38===b){var Mb=a,xd=ka,Ke=z?0:1;Ke!==xd.ba&&(xd.ba=Ke,X(Mb,xd.K.J.O,!!Ke))}else if(29===
b)iD(a,ka,!z);else if(30===b)jD(a,ka,z?null:4);else if(258===b)jD(a,ka,z?null:3);else if(31===b)kD(a,ka,z?null:2);else if(32===b)kD(a,ka,z?null:1);else if(33===b)jD(a,ka,z?null:2);else if(34===b)jD(a,ka,z?null:1);else if(35===b)lD(a,ka,!z);else if(36===b)mD(a,ka,!z);else if(39===b)nD(a,ka,!z);else if(42===b)oD(a,ka,!z,1===n.length);else if(54===b){var jh=a,pc=ka,Dg=!z;Dg!==lj(pc)&&(pc.A=Dg?pc.A|128:pc.A&-129,X(jh,pc.K.J.O,Dg))}else if(207===b){var cg=a,Cf=ka,Nc=!z;Nc!==(0!==(Cf.A&512))&&(Cf.A=Nc?
Cf.A|512:Cf.A&-513,X(cg,Cf.K.J.O,Nc))}else if(22===b)pD(a,ka,!z);else if(212===b){var Le=a,$c=ka,Me=!z;Me!==rj($c)&&($c.A=Me?$c.A|8192:$c.A&-8193,X(Le,$c.K.J.O,Me))}else if(213===b){var qc=a,rc=ka,Df=!z;Df!==sj(rc)&&(rc.A=Df?rc.A|16384:rc.A&-16385,X(qc,rc.K.J.O,Df))}else if(214===b){var Fg=a,yd=ka,zd=!z;zd!==qj(yd)&&(yd.A=zd?yd.A|4096:yd.A&-4097,X(Fg,yd.K.J.O,zd))}else if(215===b){var Ef=a,ef=ka,Ff=!z;Ff!==pj(ef)&&(ef.A=Ff?ef.A|2048:ef.A&-2049,X(Ef,ef.K.J.O,Ff))}else if(268===b||267===b||269===b||
270===b)qD(a,ka,z?0:eB(b));else if(220===b)rD(a,ka,!z);else if(221===b)sD(a,ka,!z);else if(339===b){var gb=a,Cb=ka,Qd=z?null:10;Qd!==Cb.Y&&(Cb.Y=Qd,X(gb,Cb.K.J.O,!!Qd))}else if(243===b)tD(a,ka,z?null:1);else if(244===b||245===b){var dg=void 0,Nb=a,md=ka,je=md.K,ac=je.J.track,Ad=ac.G[md.ka]+md.Da+ac.H,ad=244===b?-1:1,nd=md.ka+ad;for(V(Nb.A);0<=nd&&nd<ac.M;){dg=Ad-ac.G[nd]-ac.H;if(XA(ac,Ad,nd)&&!YA(ac,Qo(Hz(Nb.C.A,je)),nd)){GC(Nb,md,dg,nd,Zi(md,!1,md.X).A,!1,!1);break}nd+=ad}W(Nb.A)}else 344===b&&uD(a,
ka,!oj(ka),!1);W(a.A);break;case 223:var Oc=!1,Rd=!1;V(a.A);if(1===l.length)for(var Bd=JA(l[0]),ke=Bd.length;ke--;)OA(a.D,String(Bd[ke])),Rd=Oc=!0;else{a:{var di=l.length;if(di&&Kk(l[0]))for(var cj=l[0].H,dj=cj.length,fg;dj--;)if(fg=cj[dj],!fg.C&&fg.A.length===di&&Db(fg.A,l)){var Jf=fg;break a}Jf=null}if(null!==Jf)OA(a.D,String(Jf.id)),Rd=Oc=!0;else{var me=a.D,Jg=!1;a:if(1<l.length){for(var mh=0,ei=l.length-1;mh!==ei;mh++)if(Vj(l[mh],me,!0)!==l[mh+1]){var nh=!1;break a}nh=!0}else nh=!1;if(nh){for(var fk=
al(me,me.Y,null,!1,l[0]),Kg=1,gk=l.length;Kg!==gk;Kg++)Oh(fk,l[Kg]);Jg=!0}Oc=Jg}}Oc&&X(a,null,!Rd);W(a.A);break;case 256:case 257:var oh=256===b?1:2;if(l.length){var Lg=l[0],Kf=l[l.length-1],Lf=Lg.J.track,fi=!1,ql;for(ql of pz(Lf,Lg.J.O.W,Lg.ga,Kf.J.O.W,Kf.U)){fi=!0;var hk=ql,ph=Lf.P;if(ph)for(var Pe=ph.length;Pe--;)if(ph[Pe]===hk){ph.splice(Pe,1);break}}fi||(null===Lf.P&&(Lf.P=[]),Lf.P.push(new Wh(Lg.J.O.W,Lg.ga.Na,Lg.ga.Ga,Kf.J.O.W,Kf.U.Na,Kf.U.Ga,oh)));lm(a.D);X(a,null,!fi)}break;case 255:for(var gi=
a.D.M,Mf=!1,gf=[],Td=l.length,hf,qh,ik;Td--;)for(qh=JA(l[Td]),hf=qh.length;hf--;)-1===Ub(gf,qh[hf])&&gf.push(qh[hf]);gf.sort();for(Td=ik=gf.length;-1<=Td--;)if(-1===Td||Rh(gi[gf[Td]])){-1!==Td&&(gi[gf[Td]].D=!1,Mf=!0);for(hf=Td+1;hf<ik;hf++)Mf=gi[gf[hf]].D=!0;break}Mf&&X(a,null,!1);break;case 285:for(var hi=[],jk=l.length,Mg,ne,rh;jk--;)Mg=Hz(a.C.A,l[jk]),(ne=cq(Mg))&&-1===Ub(hi,ne)&&hi.push(ne);rh=hi.length;for(V(a.A);rh--;){var rl=a,sh=hi[rh],ii=sh.A[0];ii.K.J.N[ii.G].s=sh.C?2:1;X(rl,ii.K.J.O,!1)}W(a.A);
break;case 336:var Ng=Hz(a.C.A,w),oe=Ng.K.J.N;cq(Ng).D?delete oe[Ng.G].h:oe[Ng.G].h=1;X(a,Ng.K.J.O,!1);break;case 69:var th=Vf(p[0].H.A);for(x=p.length;x--;)if(ka=p[x],Vf(ka.H.A)!==th){z=!1;break}if(z){x=p.length;for(V(a.A);x--;){var hc=void 0,Ud=a,jf=p[x],ji=jf.K.J.track;if(!(1E3<=ji.Ra)){var Nf=jf.H,tc=Nf.W,Of=Nf.A,Pf=nz(Of,1);-2>Pf.C&&(Pf=nz(Of,-2),-2>Pf.C||2<Pf.C)&&(Pf=nz(Of,-1));hc=pg(tc,Vf(Pf));var pe=jf.K.J;ji.D&&yj(jf)?GC(Ud,jf,jf.Da,jf.ka,og(hc,-zi(ji,Ud.C.F),pe.H,pe.M).A,!1,!1):vD(Ud,jf,
hc,!1)}}W(a.A)}break;case 73:var cd=g.A;x=cd.length;for(V(a.A);x--;){var dd=cd[x];w=dd.C();ka=Sz(dd);a:{var Sc=void 0,ed=a,ic=w,Ed=ka,Og=dd,Qf=Og.F,Rf=Ri(ic,ed.D,!0),Fc=null,Qe=Ed;V(ed.A);if(Ed){if(Ki(Ed)){wD(ed,Ed,!1);W(ed.A);break a}b:{var ej=Ed.K,qe=Ri(ej,ed.D,!0);if(qe)if(ej.J.track.D&&null!==Ed.ka){if(Sc=Dz(ej,Ed.ka),Sc.Da===Ed.Da){Fc=Sc;break b}}else for(var fj=qe.A,gg=fj.length;gg--;)if(Sc=fj[gg],!Ii(Sc)&&kg(Sc.H,Ed.H)){Fc=Sc;break b}Fc=null}Qe=Ed}else Qf?(Fc=Dz(Rf,Og.ka))&&(Qe=xD(ed,ic,Fc.Da,
Fc.ka,Vf(Fc.H.A))):1===Rf.A.length&&(Fc=Rf.A[0],Qe=yD(ed,ic,Ci(ic.J.track,Fc.M,bj(ic.J)),tj(Fc)));Fc&&Qe&&(wD(ed,Qe,!0),Fc.N&&1===Fc.N[0]&&oD(ed,Qe,!0,!1),hj(Fc)&&rD(ed,Qe,!0),Rf.G&&IB(ed,Qe.K,Rf.G),tj(Fc)&&sD(ed,Qe,!0),Uz(Og,Qe,!1));W(ed.A)}}W(a.A);break;case 37:ox(d,"bend",95,n[0]);break;case 141:case 142:V(a.A);for(x=p.length;x--;)zD(a,p[x],7*(141===b?1:-1));W(a.A);break;case 239:case 240:V(a.A);for(x=p.length;x--;)zD(a,p[x],239===b?1:-1);W(a.A);break;case 157:case 158:case 159:case 225:case 226:var Vd=
0;switch(b){case 157:Vd=1;break;case 158:Vd=-1;break;case 225:Vd=2;break;case 226:Vd=-2}var Fd=Vd;cd=g.A;x=cd.length;for(V(a.A);x--;)if(dd=cd[x],!dd.F&&-1!==dd.G){var hg=a,Tc=Sz(dd),Re=Fd,Ba=Tc.H,Se=uj(Tc),Pg=Ba.A.C;V(hg.A);if(Re===Pg&&Tc.V){var pd=Tc.K.J.H;Re=Bf(Ba.A,pd)?0>pd?-1:1:0}vD(hg,Tc,kz(Ba,Re),!1);(Re===Pg||Se)&&tD(hg,Tc,Se?null:2);AD(hg,Tc,0);W(hg.A)}W(a.A);break;case 84:UC(a);break;case 85:cd=g.A;x=cd.length;for(V(a.A);x--;)if(dd=cd[x],dd.F&&-1!==dd.ja){var kf=a,Qg=dd.C(),Rg=dd.ka,Sf=dd,
Te=Dz(Qg,Rg);V(kf.A);Te?rD(kf,Te,!0):(Te=xD(kf,Qg,0,Rg,null))&&rD(kf,Te,!0);W(kf.A);Te&&Uz(Sf,Te,!1)}W(a.A);break;case 89:BD(a,0);break;case 90:BD(a,1);break;case 91:BD(a,2);break;case 92:BD(a,3);break;case 93:BD(a,4);break;case 94:BD(a,5);break;case 95:BD(a,6);break;case 96:BD(a,7);break;case 97:BD(a,8);break;case 98:BD(a,9);break;case 227:BD(a,10);break;case 228:BD(a,11);break;case 229:BD(a,12);break;case 230:BD(a,13);break;case 231:BD(a,14);break;case 232:BD(a,15);break;case 143:case 150:CD(a,
Zf("A"),150===b);break;case 144:case 151:CD(a,Zf("B"),151===b);break;case 145:case 152:CD(a,Zf("C"),152===b);break;case 146:case 153:CD(a,Zf("D"),153===b);break;case 147:case 154:CD(a,Zf("E"),154===b);break;case 148:case 155:CD(a,Zf("F"),155===b);break;case 149:case 156:CD(a,Zf("G"),156===b);break;case 183:DD(a,1);break;case 184:DD(a,2);break;case 185:DD(a,3);break;case 186:DD(a,4);break;case 187:DD(a,5);break;case 188:DD(a,6);break;case 189:DD(a,7);break;case 234:DD(a,8);break;case 197:DD(a,-1);
break;case 198:DD(a,-2);break;case 199:DD(a,-3);break;case 200:DD(a,-4);break;case 201:DD(a,-5);break;case 202:DD(a,-6);break;case 203:DD(a,-7);break;case 235:DD(a,-8);break;case 286:ED(a,n,1);break;case 287:ED(a,n,2);break;case 334:ED(a,n,3);break;case 335:ED(a,n,4);break;case 345:ox(d,"pedallever",231,w)}return!0}catch(uh){hs(c,"Sorry, you ran into an editor bug. :-( Please reload the page.",!0,1)}}return!1}function FC(a){a.La||(requestAnimationFrame(a.tb),a.La=!0)}
function FD(a,b,c){var d=Dj(b);d&&GD(a,b.K.J.track.index,vi(b.K.J.track),[d],c)}function HD(a,b){for(var c=[],d=b.A.length,e;d--;)(e=Dj(b.A[d]))&&c.push(e);GD(a,b.J.track.index,vi(b.J.track),c,0)}function ID(a,b){var c=0<b;a.V=b;c&&(a.Ab.textContent=b,a.Bb.textContent=1===b?"change":"changes");E(a.zb,"hidden",!c);E(r("discard-unsaved-changes-wrapper"),"hidden",!c||!a.C.C.H)}function xC(a){a.Ia||(requestAnimationFrame(a.sb),a.Ia=!0)}
function NC(a,b,c){var d=!1;if(Xt(a.C.D))d=99===b||238===b||266===b||347===b||280===b;else{var e=rA(c),f=nA(c),g=hA(c,!1),h=hA(c,!0),k=sA(c,!0,!1),l=sA(c,!1,!1);switch(b){case 238:case 266:case 347:case 64:case 103:case 100:case 101:case 102:case 204:case 205:case 206:case 219:case 265:case 271:case 289:case 290:case 291:case 306:case 308:case 311:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 300:case 301:case 312:case 315:case 319:case 321:case 302:case 303:case 304:case 305:case 307:case 309:case 310:case 313:case 314:case 316:case 317:case 318:case 320:case 346:case 322:case 323:case 324:case 325:case 327:case 328:case 208:case 247:case 87:case 88:case 99:case 261:case 263:case 279:case 272:case 280:case 139:case 140:case 241:case 242:case 190:case 191:case 192:case 193:case 194:case 281:case 252:case 259:d=
!0;break;case 76:case 77:case 78:case 79:case 332:case 337:case 338:case 340:case 343:d=!!a.D.A.length;break;case 264:d=hm(a.D);break;case 84:case 160:case 209:case 161:d=!c.F();break;case 250:d=1===fA(c).length;break;case 274:d=a.D.U;break;case 1:case 2:case 237:case 4:case 5:case 7:case 8:case 9:case 11:case 260:case 68:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 178:case 179:case 180:case 181:case 246:case 273:case 275:d=
1===e.length;break;case 48:d=1===e.length&&!Ez(a.D.A[e[0]]);break;case 6:d=1===f.length&&RA(g);break;case 3:d=!!e.length;break;case 72:case 262:case 82:d=1===f.length;break;case 341:d=!!f.length;break;case 74:d=1===f.length&&!zl(f[0],!0,!1);break;case 10:case 12:case 13:case 47:case 210:case 108:case 63:case 43:case 44:case 248:case 249:case 45:case 46:case 143:case 144:case 145:case 146:case 147:case 148:case 149:case 150:case 151:case 152:case 153:case 154:case 155:case 156:case 236:d=1===g.length;
break;case 134:case 135:case 136:case 137:case 138:d=1===g.length&&ug(g[0].J.I);break;case 211:d=!1;for(h=g.length;h--;)if(g[h].ga!==Fe){d=!0;break}break;case 62:d=1===g.length&&TA(f[0]);break;case 24:d=1===f.length&&TA(f[0])&&(1===g.length&&!g[0].D||UA(g,3));break;case 25:d=1===g.length&&TA(f[0])&&!g[0].D;break;case 14:case 15:case 16:case 17:case 18:case 19:case 282:case 283:case 284:case 65:case 66:case 20:case 21:case 70:case 73:case 85:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 227:case 228:case 229:case 230:case 231:case 232:case 86:case 251:case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 125:case 126:case 127:case 128:case 129:case 130:case 131:case 132:case 133:case 104:case 105:case 106:case 107:case 253:case 254:case 329:case 330:d=
!!g.length;break;case 223:d=1===g.length&&Kk(g[0])||1<g.length;break;case 256:case 257:d=1===fA(c).length&&!!g.length;break;case 255:d=!1;for(h=g.length;h--;)if(Kk(g[h])){d=!0;break}break;case 285:d=!1;for(h=g.length;h--;)if(xz(g[h])){d=!0;break}break;case 336:d=1===g.length&&xz(g[0]);break;case 71:d=RA(g);break;case 113:case 114:case 115:case 116:case 117:d=!!g.length&&RA(g);break;case 49:case 50:case 51:case 52:case 53:case 55:case 56:case 212:case 213:case 214:case 215:case 268:case 267:case 269:case 270:case 59:case 60:case 26:case 109:case 110:case 111:case 195:case 112:case 67:case 278:case 23:case 218:case 233:case 222:case 276:case 57:case 58:case 216:case 217:d=
!!h.length;break;case 27:case 28:case 40:case 41:case 244:case 245:if(k=!!h.length)a:{for(k=h.length;k--;)if(!h[k].J.track.D){k=!1;break a}k=!0}d=k;break;case 42:case 54:case 207:case 277:case 38:case 31:case 32:case 33:case 34:case 22:case 220:case 221:case 339:case 141:case 142:case 342:case 239:case 240:case 243:d=!!k.length;break;case 69:d=!!l.length&&SA(l);break;case 29:case 30:case 258:case 39:case 35:case 36:d=!!k.length&&QA(k);break;case 344:if(h=!!k.length)a:{for(h=k.length;h--;)if(!k[h].K.J.track.A){h=
!1;break a}h=!0}d=h;break;case 157:case 158:case 159:case 225:case 226:k=bA(c);d=!!l.length&&(2===k||3===k)&&SA(l);break;case 61:case 196:case 288:case 81:case 183:case 184:case 185:case 186:case 187:case 188:case 189:case 234:case 197:case 198:case 199:case 200:case 201:case 202:case 203:case 235:d=1===k.length;break;case 37:d=1===k.length&&QA(k);break;case 286:case 287:case 334:case 335:d=!1;for(h=k.length;h--;)if(k[h].D||k[h].G){d=!0;break}break;case 345:d=1===h.length&&null!==h[0].J.track.V}}return d}
function OC(a,b){return new Promise((c,d)=>{var e=a.C,f=a.D,g=a.V;if(!a.U&&a.X){a.U=!0;var h={v:f.H,j:JSON.stringify(NA(e.A,e.F)),t:b};Q(e,23);kc("POST",`/manage/${f.pa}/jsonpost/`,h,k=>{k.v?(f.H=k.v,ID(a,a.V-g),0===a.V&&(oB(a,!1),JD(a)),Q(e,19,[f.H,k.date,k.bars,b]),Q(e,22,!0),a.U=!1,c()):(Q(e,22,!1),hs(e,k.e,!0,1),a.U=!1,d())},()=>{Q(e,22,!1);hs(e,"There was an error during saving.",!1,1);a.U=!1;d()})}else d()})}
function SC(a,b){var c=a.C,d=a.D,e=c.G,f=e.D(b);if(f){var g=f.F,h=f.C(),k=f.A,l=f.fa,m=h.J.A[l],n=h.J.O,p=d.A,q=p.length,t=f.ka;V(a.A);b?h.J.C?(d=n.W+(El(n)?h.J.C:1),d===q?(BB(a,d,!1),yC(a,d,k,l,t,!0),p=p[d].T[k].A[l][0]):p=p[d].T[k].A[0][0]):(h.ja===m.length-1&&(f=KD(a,h),qz(h)?(f=tB(a,f.value,0,0,0),DB(a,n.W,k,l,h.ja+1,f.id,!1)):n.W===q-1&&(BB(a,q,!1),yC(a,q,k,l,t,!0),p=p[q].T[k].A[l][0],IC(a,p,f.value,0,0,0,!0))),h.ja===m.length-1&&(m=kl(h.J),yC(a,m.O.W,k,l,t,!0)),p=Vj(h,d,!0)):0===h.ja&&0!==h.J.O.W?
(m=il(h.J),n=m.O,Ml(n)?(m=p[n.W+Ll(n)].T[k],l=0,p=m.A[0][m.A[0].length-1]):(yC(a,m.O.W,k,l,t,!0),p=Ri(h,d,!0))):(p=Ri(h,d,!0),!p&&f.I&&(p=h));p&&(d=p.J.O,oA(e),h=g&&null!==t?Dz(p,t):p.A.length?p.A[0]:null,eA(e,g,!1,d.W,k,l,p.ja,h?Jj(h):-1,t,!0,!0,!0),h&&Q(c,223,[h,!0,!1,!0]));W(a.A)}}
function TC(a){var b=a.C,c=b.G;if(!c.F())if(1!==fA(c).length)hs(b,"We only support copying one instrument at a time. Please select only a single instrument.",!1,1);else{a:{var d=c.A;var e=d.length,f,g;for(f=0;f<e-1;f++){var h=d[f];for(g=f+1;g<e;g++){var k=d[g];if(h.D===k.D&&h.A===k.A&&h.fa!==k.fa){d=!0;break a}}}d=!1}if(d)hs(b,"We only support copying one voice at a time. Please select only a single voice at a time.",!1,1);else return a=a.Z,wB(a,xB(a,c)),hs(b,"Notation copied to clipboard. Use Ctrl+V to paste.",
!1,2),!0}return!1}
function VC(a,b,c,d,e,f,g,h,k,l,m,n,p,q,t,u,v,w){var y=a.C,x=a.D,z=x.A,B=x.T.length,F=z.length,H=0!==f.length,J=0===F,U=null;V(a.A);b=new Fi(x.T.length,c,"",b,d,1,e,f.length,H?f:null,g,null,null,null,h,n,k,p,q,[],l,null,null,!0,!0,!1,!0,!0,!0,!0,!0,t,u,v,w);x.T.push(b);l&&(x.ea=!0);Ie(x.oa,5,b);J&&(BB(a,0,!0),F++);for(wi(b)&&(U=0);F--;)l=z[F],c=new Cl(x,l,b,U,fl(l),m,null,0,[],null,0,!1,!0,null),l.T.splice(B,0,c);J&&(m=x.A[0].T[0],m.eb=!1,m.A.push([]),oB(a,!0),jB(a.A),DB(a,0,0,0,0,tB(a,.25,0,0,0).id,
!0),x.A[0].T[0].eb=!1);Fn(y.A);oB(a,!0);jB(a.A);ho(y.A);J&&(wC(a,z[0]),Q(y,4),Q(y,184));Yz(y.G);W(a.A);xC(a);soundslice.closeActiveModal(!1);return b}
function YC(a,b,c){var d=a.C,e=d.C,f=d.A.G,g=e.A,h=d.G,k=b.length;b.sort(Qz);for(V(a.A);k--;){var l=a,m=b[k];var n=l.D;var p=n.A,q=n.T;var t=n.F;var u=p[m],v=p.length;for(n=u.T.length;n--;){var w=u.T[n];2!==w.F&&3!==w.F||CB(l,w);if(0===m){if(1<v){var y=p[1].T[n];1===y.F&&CB(l,y)}2<v&&(y=p[2].T[n],2===y.F&&CB(l,y))}else 1===m&&3<v&&(y=p[3].T[n],3===y.F&&CB(l,y));w.C&&(1<w.C?(y=m,p[y+1].T[n].C=p[y].T[n].C-1):0>w.C&&(y=m+w.C,--p[y].T[n].C))}p.splice(m,1);v--;if(v){for(y=t.length;y--;)t[y].A>m&&uC(l,
y,t[y].A-1);for(n=q.length;n--;){t=q[n].S;if(null!==t)for(y=t.length;y--;)t[y].A===m?LD(l,n,y):t[y].A>m&&(u=t[y].A-1,v=l.D.T[n].S[y],u!==v.A&&(v.A=u));t=q[n].P;if(null!==t)for(y=t.length;y--;){u=t[y];if(u.Ua>=m)if(u.Qa===m){t.splice(y,1);continue}else u.Ua===m?u.jb=Fe:u.Ua--;u.Qa>=m&&(u.Qa===m&&(u.kb=p[m-1].Fa),u.Qa--)}}}else for(y=q.length;y--;)MD(l,y)}bm(e,!0);vC(a);lm(e);X(a,null,!0);if(g.length)if(k=h.A.length?h.A[0].A:0,b=b[0],k=(0===b?g[0].T[k]:g[b-1].T[k]).A[0],b=0===b?k[0]:k[k.length-1],e=
tA(h),oA(h),k=e.length)for(;k--;)mA(h,b,null,!0,!1,e[k],!0,!0,!0);else mA(h,b,null,c,!1,c?0:null,!0,!0,!0);else Yz(h);Xq(d.H)&&(f.length?d.H.A>f.length-1&&d.H.set(d.A,f[f.length-1].index,0,null,!0,!1,!1,0,-1):Yq(d.H));W(a.A);Q(d,17);g.length||Q(d,185)}function ZC(a,b,c,d){var e=!1;c===(0!==(b.A&128))||c&&!b.W||(c?(b.A|=128,b.A&=-17,b.A&=-257):b.A&=-129,d||(dm(a.C.C),en(a.C.A,!0),X(a,b,c)),e=!0);return e}
function $C(a,b,c,d){var e=!1;c===Jl(b)||c&&!b.W||(c?(b.A|=256,b.A&=-17,b.A&=-129):b.A&=-257,d||(dm(a.C.C),en(a.C.A,!0),X(a,b,c)),e=!0);return e}function aD(a,b,c,d){var e=a.D.A[b],f=e.T[c],g=2===d,h=0===d||1===d&&0<b||g&&1<b&&!Kl(e);d&&3!==f.F?h&&d!==f.F&&(V(a.A),CB(a,f),g&&CB(a,kl(f)),ND(a,b,c),g&&ND(a,b+1,c),f.F=d,g&&(kl(f).F=3),X(a,e,!0),W(a.A)):CB(a,f)}
function yC(a,b,c,d,e,f){V(a.A);for(var g=!1,h=a.D.A[b].T[c],k=h.A;d>=k.length;){var l=a,m=h;m.eb=!1;m.A.push([]);oB(l,!0);jB(l.A)}f&&!k[d].length&&(f=a.C.G,g=tB(a,.25,0,0,0).id,oA(f),b=DB(a,b,c,d,0,g,!1),mA(f,b,null,null!==e,!1,e,!0,!0,!0),g=!0);W(a.A);return g}
function DC(a,b){b=b.A;var c=b[0].K,d=c.J,e=d.N,f;V(a.A);for(f=e.length;f--;){var g=e[f];if(g.v===c.fa&&g.i[0]===c.ja){d.N.splice(f,1);break}}for(f=b.length;f--;)e=b[f].K,e.D||(g=e.ha,ak(e,a.D,tB(a,g.value,g.Ta,0,0).id));Yl(d.O);CC(a,d.A[c.fa],c.ja,-1);X(a,d.O,!1);W(a.A)}
function KC(a,b,c,d,e,f,g){var h=a.C,k=a.D.A[b],l=k.T[c],m=l.A[d],n=m[e],p=n.ha,q=p.gb,t=p.mb;if(!n.D&&(q!==f||t!==g)){V(a.A);if(xz(n))DC(a,cq(Hz(h.A,n)));else{if(f&&qz(n)&&e===m.length-1&&(q=we(p.G.Na*g,p.G.Ga),Ce(Ae(xl(k),dl(l,n.fa)).add(p.D),q)))for(l=1;l<f;l++)DB(a,b,c,d,e+l,p.id,!1);c=[];d=!1;b=[];do{if(xz(n))break;if(!n.D&&(b.push(n),c.push(n.ja),1!==b.length&&UA(b,f))){d=!0;break}n=Vj(n,h.C,!1)}while(n);if(!d){W(a.A);return}for(l=b.length;l--;)n=b[l],IC(a,n,n.ha.value,n.ha.Ta,f,g,!0);XB(a,
m,c)}wC(a,k);CC(a,m,e-1,-1);W(a.A)}}function JB(a,b,c){c!==b.sa&&(b.sa=c,X(a,b.J.O,!!c))}function TB(a,b,c){c!==b.ea&&(b.ea=c,X(a,b.J.O,!!c))}function IB(a,b,c){TA(b.J)&&c!==b.G&&(b.G=c,X(a,b.J.O,!!c))}
function eD(a,b,c,d){var e=b;b=Aj(b,c);for(V(a.A);e;){if(c===Fe){var f=a;var g=f.D,h=g.A[e.O.W].T[e.track.index],k=!1;d!==h.I.code&&(h.I=xg(d,h.track.N),lm(g),X(f,null,!0),k=!0);f=k}else{f=a;g=e.O.W;h=e.track.index;k=c.Na;var l=c.Ga,m=d,n=f.D,p=n.A[g].T[h];V(f.A);OD(f,g,h,k,l);gl(p,k,l,m);lm(n);X(f,null,!0);W(f.A);f=!0}if(!(f=!f||Kl(e.O)))a:{if(g=e.P)for(f=g.length;f--;)if(ze(g[f].A,c)){f=!0;break a}f=!1}if(f||kl(e).I!==b)break;e=kl(e);c=Fe}c=e.track.index;d=a.D.A;e=d.length;for(b=0;b!==e;b++)if(g=
d[b].T[c],f=g.I,k=g.P)for(g=0,h=k.length;g!==h;g++)l=k[g],l.C===f&&(OD(a,b,c,l.A.Na,l.A.Ga),g--,h--),f=l.C;W(a.A)}function SB(a,b,c){TA(b.J)&&c!==dk(b)&&(b.C=c?b.C|1:b.C&-2,X(a,b.J.O,c))}function KB(a,b,c){c!==b.$&&(V(a.A),c&&b.qa&&MB(a,b,null),b.$=c,X(a,b.J.O,!!c),W(a.A))}function MB(a,b,c){c!==b.qa&&(V(a.A),c&&b.$&&KB(a,b,null),b.qa=c,X(a,b.J.O,!!c),W(a.A))}function OB(a,b,c){c===b.oa||!b.A.length&&c||(b.oa=c,X(a,b.J.O,!!c))}
function HB(a,b,c,d){if(c!==b.Z&&b.A.length){var e=Hz(a.C.A,b);V(a.A);b.Z=c;if(d&&-1!==e.D){d=Ro(e).A;e=d.length;for(var f;e--;)f=d[e].K,f!==b&&null!==f.Z&&HB(a,f,c,!1)}X(a,b.J.O,!0);W(a.A)}}function RB(a,b,c,d){var e=b.A;if(c!==b.pa&&(b.A.length||!c)){V(a.A);if(d)for(d=e.length;d--;)nD(a,e[d],!1);b.pa=c;X(a,b.J.O,!!c);W(a.A)}}function UB(a,b,c){!TA(b.J)||c===(0!==(b.C&16384))||b.ga===Fe&&c||(b.C=c?b.C|16384:b.C&-16385,X(a,b.J.O,c))}
function fD(a,b,c){c!==uk(b)&&(b.C=c?b.C|256:b.C&-257,X(a,b.J.O,c))}function LB(a,b,c){c!==Bk(b)&&(bk(b,c),X(a,b.J.O,!!c))}function hD(a,b,c){V(a.A);var d=1===b.J.track.A?xj(a.D,b.J.track):b.J.track,e=ri(d,b.J.O.W,b.ga);-1!==e&&LD(a,d.index,e);c&&(d=a.D.T[d.index],e=d.S,b=new Xh(b.J.O.W,b.ga,c),null===e&&(e=[],d.S=e),e.push(b),X(a,null,!0));W(a.A)}
function iD(a,b,c){if(c!==Vi(b)){var d=Hz(a.C.A,b.K);V(a.A);if(c){d=Rq(d,b.ka,!0);if(!d||d.A.Da===b.Da&&EA(b.K.ia,d.A.K.ia)){W(a.A);return}zC(a,b,!1);PD(a,d.A,!0);b.A|=4}else(d=Ji(b,a.C.C,2))&&PD(a,d,!1),b.A&=-5;PA(a.D);lm(a.D);X(a,null,c);W(a.A)}}function jD(a,b,c){if(c!==b.F){var d=Rq(Hz(a.C.A,b.K),b.ka,!0);if(3!==c&&4!==c||d&&d.A.Da!==b.Da)V(a.A),c?zC(a,b,!1):!c&&d&&4===d.A.I&&(d.A.I=null),b.F=c,PA(a.D),lm(a.D),X(a,null,!!c),W(a.A)}}
function kD(a,b,c){var d=Rq(Hz(a.C.A,b.K),b.ka,!1);c!==b.I&&(V(a.A),c?AC(a,b,!1):!d||4!==d.A.F&&3!==d.A.F||jD(a,d.A,null),b.I=c,X(a,b.K.J.O,!!c),W(a.A))}function lD(a,b,c){c!==(0!==(b.A&16))&&(V(a.A),c?(AC(a,b,!1),b.A|=16):b.A&=-17,X(a,b.K.J.O,c),W(a.A))}function mD(a,b,c){c!==(0!==(b.A&32))&&(V(a.A),c?(zC(a,b,!1),b.A|=32):b.A&=-33,X(a,b.K.J.O,c),W(a.A))}function nD(a,b,c){c!==(0!==(b.A&256))&&(V(a.A),b.A=c?b.A|256:b.A&-257,RB(a,b.K,null,!1),X(a,b.K.J.O,c),W(a.A))}
function oD(a,b,c,d){var e=b.K;if(c!==(null!==b.N&&1===b.N[0])&&(!c||0!==b.Da)){var f=qA(a.C.G,b);if(c){var g=null!==b.Da?b.Da:0;g=[1,dB[g]?dB[g]:String(g)]}else g=null;b.N=g;e.J.track.D&&(b.M=Zi(b,!0,null));ck(e);if(f.length)for(g=f.length;g--;)Uz(f[g],b,!1);X(a,e.J.O,c);d&&AD(a,b,0)}}function pD(a,b,c){if(c!==Ii(b)){var d=Hz(a.C.A,b.K);null!==b.ka?(d=Rq(d,b.ka,!0))&&b.Da!==d.A.Da&&(d=null):d=Qq(d,b.H,0,!0);if(d||!c)V(a.A),c?(zC(a,b,!1),b.A|=1):b.A&=-2,d&&wD(a,d.A,c),X(a,b.K.J.O,c),W(a.A)}}
function qD(a,b,c){c!==b.P&&(V(a.A),1!==c&&b.$&&QD(a,b,0),b.P=c,X(a,b.K.J.O,!!c),W(a.A))}function rD(a,b,c){var d=b.K;TA(d.J)&&c!==hj(b)&&(V(a.A),c?b.A|=64:(b.A&=-65,null!==b.ka&&null===b.Da&&RD(a,b,0)),ck(d),X(a,d.J.O,c),W(a.A))}
function sD(a,b,c){var d=b.K,e=d.J,f=a.C.G,g=a.C.C;if(TA(e)&&c!==tj(b)){V(a.A);if(c){var h=f.I(b,null);var k=d.A;if(1<k.length){for(b=k.length;1<b--;)SD(a,d,b);b=k[0]}b.A|=32768;Ii(b)&&(k=Ji(b,g,1))&&sD(a,k,c);Ki(b)&&(k=Li(b,g))&&sD(a,k,c);vD(a,b,oz(Math.ceil(d.J.track.N/2),zj(b),e.H,0),!1);h&&(dA(f,h,!1),lA(f,b,!1,!1,!1,!0))}else if(b.A&=-32769,Ii(b)&&(k=Ji(b,g,1))&&sD(a,k,c),Ki(b)&&(k=Li(b,g))&&sD(a,k,c),d.J.track.D&&(b.ka=0,RD(a,b,0),h=f.I(b,!1)))dA(f,h,!0),lA(f,b,!0,!1,!1,!0);ck(d);X(a,e.O,c);
W(a.A)}}function tD(a,b,c){c!==uj(b)&&(Yi(b,c),X(a,b.K.J.O,!!c))}function uD(a,b,c,d){c!==oj(b)&&(b.A=c?b.A|1024:b.A&-1025,d||X(a,b.K.J.O,c))}function zD(a,b,c){c=mz(b.H,c,b.K.J.H);vD(a,b,c,!1);AD(a,b,0)}
function UC(a){var b=a.C.G,c=b.A,d=c.length,e=!0,f=hA(b,!1),g=f.length?Ri(f[0],a.D,!0):null,h=b.D(!1).ka,k=aA(b),l=f.length?f[0].J.track:null;if(d){for(;d--;){var m=c[d];if(-1!==m.ja&&!m.C().va){e=!1;break}}V(a.A);if(e)for(d=f.length;d--;)c=f[d],TD(a,c.J.O.W,c.J.track.index,c.fa,c.ja);else for(f=sA(b,!0,!1),d=f.length;d--;)e=f[d],c=e.K,gD(a,c.J.O.W,c.J.track.index,c.fa,c.ja,Jj(e));b.F()?(!g&&l&&a.D.A.length&&(d=a.D.A[0].T[l.index],d.A.length&&d.A[0].length&&(g=d.A[0][0])),g&&mA(b,g,null,k,!1,h,!0,
!0,!0)):Yz(b);W(a.A)}}function BD(a,b){var c=a.C.G.A,d=(new Date).getTime(),e=c.length,f=0,g=b,h=a.Ya;for(V(a.A);e--;){var k=c[e];if(k.F&&-1!==k.ja){f||(f=WA(a.D.T[k.A]),a.xa&&750>d-a.xa&&(g+=10*h,g>f&&(g=10<=h?h%10*10+b:b)));var l=a,m=k.C(),n=k.ka,p=g,q=Dz(m,n),t=WA(m.J.track);V(l.A);q?RD(l,q,p):(q=Hh(!1,m.J.track,n,p,0,null,null,null,m.J.M),(q=xD(l,m,p,n,Vf(q.A)))&&1===m.A.length&&UD(l,m));W(l.A);q&&(Uz(k,q,!1),AD(l,q,p%10*10>t?0:.2))}}a.xa=d;a.Ya=g;W(a.A)}
function CD(a,b,c){var d=a.C.G.A[0],e=d.C(),f=Sz(d),g=e.J.track,h=e.J;b=lz(b,0,h.H);var k=!0,l;if(e.va){for(l=e;l&&l.va;)l=Ri(l,a.D,!0);l&&(f=l.A[l.A.length-1],k=!1)}else f||(f=e.A[e.A.length-1]),k=c;f?f=f.H:(f=oz(Math.ceil(g.N/2),Aj(e.J,e.ga),h.H,0),k=!1);l=!c;if(iz(f.A,b,!0)<=iz(f.A,b,!1)||k)if(k=f.A,l&&k===b)b=f;else{l=0;if(k.A>b.A||k.A===b.A&&k.C>=b.C)l=1;b=new mg(b,f.C+l)}else if(k=f.A,l&&k===b)b=f;else{l=0;if(k.A<b.A||k.A===b.A&&k.C<=b.C)l=1;b=new mg(b,f.C-l)}a:{f=e.ga;k=b;l=If(k.A,h.H);var m;
for(q of hl(h)){var n=0;for(m=q.length;n!==m;n++){var p=q[n];if(Ce(p.K.ga,f)){var q=l;break a}p.H.A.A===k.A.A&&p.H.C===k.C&&(l=p.H.A.C)}}q=l}q!==b.A.C&&(b=kz(b,q));V(a.A);if(e.va||c){if(f=yD(a,e,og(b,-zi(g,a.C.F),h.H,h.M),!1))1===e.A.length&&UD(a,e),Uz(d,f,!1)}else f=Sz(d),vD(a,f,b,!1);f&&AD(a,f,0);W(a.A)}
function DD(a,b){V(a.A);var c=a.C.G.A[0],d=Sz(c);V(a.A);var e=d.K,f=e.J.H,g=mz(d.H,b,f);f=og(g,-zi(e.J.track,a.C.F),f,e.J.M);(f=yD(a,e,f,!1))&&oj(d)&&(2===e.J.track.A&&0<b||1===e.J.track.A&&0>b)&&uD(a,f,!0,!1);W(a.A);f&&(Uz(c,f,!1),AD(a,f,0));W(a.A)}function ED(a,b,c){var d=b.length;for(V(a.A);d--;){var e=b[d];e.D&&(e.D.A=c);e.G&&(e.G.A=c)}X(a,null,!0);W(a.A)}function oB(a,b){b!==a.X&&(b?L(window,"beforeunload",a.Xa):Vb("beforeunload",a.Xa),a.X=b,Q(a.C,b?18:186))}
function wC(a,b){b&&Yl(b);cm(a.C.C);Om(a.C.A,!0)}function JD(a){a.sa=!1;try{window.localStorage.removeItem(a.D.D)}catch(b){}}function vC(a){a=a.D.A;var b;var c=0;for(b=a.length;c!==b;c++)a[c].W=c}function VD(a){a=a.C;on(a.A,0);Sn(a.A,0);kn(a.A,36,!0);oA(a.G);Yz(a.G)}
function TD(a,b,c,d,e){var f=a.D,g=a.C.G,h=f.A[b].T[c],k=h.A[d],l=k[e],m=aA(g),n=1===f.T.length&&1===h.A.length&&1===k.length&&1!==f.A.length;1<f.T.length&&1===h.A.length&&1===k.length||!TA(h)||!k.length&&!n||(V(a.A),kA(g,l),EB(a,b,c,d,e),n?YC(a,[b],m):0!==k.length?l.D||CC(a,k,e-1,-1):1!==h.A.length?WD(a,h,d):(e=KD(a,null),e=tB(a,e.value,0,0,0),l=DB(a,b,c,d,0,e.id,!1),mA(g,l,null,!0,!1,0,!0,!0,!0)),n||wC(a,h.O),W(a.A))}
function gD(a,b,c,d,e,f){var g=a.D.A[b],h=g.T[c].A[d][e],k=Hz(a.C.A,h),l=h.A[f],m=h.D&&1===h.A.length;k=-1!==k.D?Ro(k):null;if(TA(h.J)){V(a.A);AC(a,l,!1);zC(a,l,!1);if(m)TD(a,b,c,d,e);else{SD(a,h,f);b=a.C.G;c=b.A;for(d=c.length;d--;)l=c[d],l.C()===h&&(l.I?(e=b,l.I&&(dA(e,l,!0),iA(e,l.C(),!0))):l.G===f&&(dA(b,l,!0),l.I?iA(b,h,!0):l.F?mA(b,h,null,!0,!1,l.ka,!1,!0,!1):b.H(h)||mA(b,h,null,!1,!1,null,!1,!0,!1)));h.A.length?2>h.A.length&&(h.$&&KB(a,h,null),h.qa&&MB(a,h,null)):(null!==h.pa&&RB(a,h,null,
!1),Kk(h)&&EC(a,h),k&&XD(a,k),rk(h)&&HC(a,h,!1),OB(a,h,null),SB(a,h,!1),a.oa(h,!1),a.ia(h,!1),a.$(h,!1),a.ba(h,!1),a.Ha(h,!1),a.Ca(h,!1),a.Ea(h,!1),KB(a,h,null),MB(a,h,null),TB(a,h,0));wC(a,g)}W(a.A)}}function KD(a,b){for(;b&&b.D;)b=Ri(b,a.D,!0);return b?b.ha:tB(a,.25,0,0,0)}
function IC(a,b,c,d,e,f,g){var h=Hz(a.C.A,b),k=b.ha;if(b.D||c!==k.value||d!==k.Ta||e!==k.gb||f!==k.mb)V(a.A),c=tB(a,c,d,e,f),b.J.eb=!1,ak(b,a.D,c.id),null!==k&&k.xb&&!c.xb&&-1!==h.D&&(rk(b)&&HC(a,b,!1),(h=Ri(b,a.D,!1))&&rk(h)&&HC(a,h,!1)),wC(a,b.J.O),oB(a,!0),CC(a,Zj(b),b.ja-1,-1),g&&jB(a.A),W(a.A),xC(a)}
function RC(a,b,c){var d=b.F,e=b.C(),f=Sz(b),g=b.ka,h=!1;if(e){h=a.D.T[b.A];if(d)if(f=h.M,c)if(0===g)if(h.C)d=!1,f=e.A[0],h=!0;else return YD(a,b,h,e,c);else g--,f=Dz(e,g),h=!0;else if(g<f-1)g++,f=Dz(e,g),h=!0;else return YD(a,b,h,e,c);else{var k=f?Jj(f):0;f=e.A.length;if(c)if(k<f-1)f=e.A[k+1],h=!0;else return YD(a,b,h,e,c);else if(f&&0!==k)f=e.A[k-1],h=!0;else if(h.D&&h.Y)d=!0,g=0,f=Dz(e,g),h=!0;else return YD(a,b,h,e,c)}b.F=d;b.G=f?Jj(f):-1;b.ka=g;Rz(b)}f&&Q(a.C,223,[f,!0,!0,!0]);return h}
function YD(a,b,c,d,e){var f=!1,g=a.H;if(c=im(a.D,c.index,e)){f=d.ga;var h=!e,k=d.J.O.T[c.index].A;if(!k.length||g>k.length-1||!k[g].length)f=null;else{k=k[g];var l=null,m=0,n=null,p;for(p=k.length;p--;){var q=k[p];if(q.ga===f){var t=q.va?0:h?q.A[q.A.length-1].H.W:q.A[0].H.W;if(null===l||h&&t&&t>m||!h&&t&&t<m)l=q,m=t;break}if(ze(f,q.ga))break}if(!l)for(p=k.length;p--;)if(q=k[p],Ce(f,q.ga)){var u=Ae(f,q.ga);if(null===n||ze(n,u))if(t=q.va?0:h?q.A[q.A.length-1].H.W:q.A[0].H.W,null===l||h&&t&&t>m||!h&&
t&&t<m)l=q,m=t,n=u}f=l}f||(yC(a,d.J.O.W,c.index,g,null,!0),f=a.D.A[d.J.O.W].T[c.index].A[g][0]);e?c.D&&c.Y?(b.F=!0,Wz(b,f,c.M-1)):(b.F=!1,f.va?Wz(b,f,null):Uz(b,f.A[0],!0)):c.D&&!c.C?(b.F=!0,Wz(b,f,0)):(b.F=!1,f.va?Wz(b,f,null):Uz(b,f.A[f.A.length-1],!0));f=!0}return f}function HC(a,b,c){if(c!==rk(b)){V(a.A);if(c)b.C|=32;else{var d=Hz(a.C.A,b),e=d?$p(d,!1):null;b.C&=-33;d&&(Po(d.A),e&&-1!==e.D&&rk(e.K)&&XD(a,Ro(e)),(e=aq(d,!1))&&-1!==e.D&&XD(a,Ro(e)))}X(a,b.J.O,c);W(a.A)}}
function XD(a,b){b=b.A;var c=b.length,d;if(1===c)HC(a,b[0].K,!1);else{for(d=0;d!==c;d++){var e=b[d].K;if(e.va)HC(a,e,!1);else break}for(d=c;d--;)if(e=b[d].K,e.va)HC(a,b[d-1].K,!1);else break}}function ZD(a,b,c){a=a.wa;var d="",e=b[1];b[3]&&(d+=a?"\u21e7":"Shift ");b[4]&&(d+=a?"\u2303":"Ctrl ");b[5]&&(d+=a?"\u2325":"Alt ");b[6]&&(d+=a?"\u2318":"Win ");AA[e]?d+=AA[e]:a&&"Backspace"===e?d+="\u232b":(d+=1===e.length?e.toUpperCase():e,c&&(d=Qa(d)));return d}
function $D(a,b){if(b){var c=a.C.G.A,d=c.length;b=b.querySelectorAll(".editor-command-button");for(var e=b.length,f,g,h,k,l,m;e--;)if(m=b[e],l=parseInt(m.getAttribute("data-code"),10)){g=null;h=!1;switch(l){case 76:g=0===a.H;break;case 77:g=1===a.H;break;case 78:g=2===a.H;break;case 79:g=3===a.H;break;default:for(f=d;f--;)k=aE(a,c[f],l),null===g?g=k:h||g===k||(h=!0)}E(m,"cur",g&&!h);E(m,"mix",h)}}}
function aE(a,b,c){if(-1===b.D)return!1;var d=-1===b.D?null:b.H.C.A[b.D],e=b.C(),f=Sz(b);b=d.T[b.A];var g=!1;if(a.I===c)return!0;switch(c){case 4:g=0!==(XC(d).A&4);break;case 211:g=0!==(e.C&16384);break;case 7:g=Hl(d);break;case 8:g=null!==XC(d).F;break;case 9:g=null!==d.C;break;case 11:g=pl(d);break;case 260:g=Il(d);break;case 273:g=0!==(d.A&128);break;case 275:g=Jl(d);break;case 10:g=(c=Hz(a.C.A,e))?!!Uq(c).length:!1;break;case 14:g=!e.D&&1===e.ha.value;break;case 15:g=!e.D&&.5===e.ha.value;break;
case 16:g=!e.D&&.25===e.ha.value;break;case 17:g=!e.D&&.125===e.ha.value;break;case 18:g=!e.D&&.0625===e.ha.value;break;case 19:g=!e.D&&.03125===e.ha.value;break;case 20:g=!e.D&&1===e.ha.Ta;break;case 21:g=!e.D&&2===e.ha.Ta;break;case 22:g=!(!f||!Ii(f));break;case 73:g=!(!f||!Ki(f));break;case 23:g=rk(e);break;case 24:g=xz(e)&&3===e.ha.gb&&2===e.ha.mb;break;case 25:g=xz(e)&&!(3===e.ha.gb&&2===e.ha.mb);break;case 67:g=1===e.D;break;case 278:g=2===e.D;break;case 27:g=pk(e);break;case 28:g=qk(e);break;
case 29:g=!(!f||!Vi(f));break;case 30:g=!(!f||4!==f.F);break;case 258:g=!(!f||3!==f.F);break;case 31:g=!(!f||2!==f.I);break;case 32:g=!(!f||1!==f.I);break;case 33:g=!(!f||2!==f.F);break;case 34:g=!(!f||1!==f.F);break;case 35:g=!(!f||0===(f.A&16));break;case 36:g=!(!f||0===(f.A&32));break;case 37:g=!(!f||null===f.C);break;case 38:g=!(!f||!f.ba);break;case 42:g=!(!f||null===f.N||1!==f.N[0]);break;case 39:g=!(!f||0===(f.A&256));break;case 40:g=2===e.pa;break;case 41:g=3===e.pa;break;case 344:g=!(!f||
!oj(f));break;case 43:g=!!e.N;break;case 44:g=!!e.M;break;case 248:g=!!e.X;break;case 249:g=!!e.V;break;case 48:g=!!d.G;break;case 45:g=!!d.P;break;case 46:g=!!d.S;break;case 246:g=-1!==d.V;break;case 341:g=b.eb;break;case 47:g=null!==Ek(e);break;case 210:g=null!==e.I;break;case 49:g=vk(e);break;case 50:g=wk(e);break;case 51:g=sk(e);break;case 52:g=tk(e);break;case 53:g=xk(e);break;case 54:g=!(!f||!lj(f));break;case 55:g=Ej(e);break;case 56:g=ek(e);break;case 212:g=!!f&&rj(f);break;case 213:g=!!f&&
sj(f);break;case 214:g=!!f&&qj(f);break;case 215:g=!!f&&pj(f);break;case 268:case 267:case 269:case 270:g=!!f&&f.P===eB(c);break;case 57:g=2===e.$;break;case 58:g=1===e.$;break;case 216:g=2===e.qa;break;case 217:g=1===e.qa;break;case 253:g=1===Bk(e);break;case 254:g=2===Bk(e);break;case 60:g=1===e.oa;break;case 59:g=2===e.oa;break;case 220:g=!!f&&hj(f);break;case 221:g=!!f&&tj(f);break;case 339:g=!!f&&10===f.Y;break;case 222:g=-1===e.Z;break;case 251:g=uk(e);break;case 61:g=!(!f||null===f.D);break;
case 196:g=!(!f||null===f.G);break;case 288:g=!(!f||null===f.U);break;case 62:g=null!==e.da;break;case 223:a:{if((c=e.H)&&c.length)for(a=c.length;a--;)if(!c[a].C){g=!0;break a}g=!1}break;case 329:case 330:g=rz(e)===(329===c?1:2);break;case 256:case 257:a=-1===e.Ba?null:e.J.track.P[e.Ba];g=(a?a.A:0)===(256===c?1:2);break;case 63:g=null!==e.sa;break;case 108:g=0!==e.ea;break;case 70:g=dk(e);break;case 71:g=0!==e.G;break;case 81:g=!(!f||1!==f.P);break;case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 125:case 126:case 127:case 128:case 129:case 130:case 131:case 132:g=
fB(c)===e.Y;break;case 181:g=!!d.D;break;case 207:g=!(!f||0===(f.A&512));break;case 277:g=!!f&&null!==f.color;break;case 72:g=1===b.F;break;case 262:g=2===b.F||3===b.F;break;case 74:g=0!==b.C;break;case 157:g=!!f&&!hj(f)&&2===f.V&&!(1E3<=f.K.J.track.Ra);break;case 158:g=!!f&&!hj(f)&&3===f.V&&!(1E3<=f.K.J.track.Ra);break;case 159:g=!!f&&!hj(f)&&1===f.V&&!(1E3<=f.K.J.track.Ra);break;case 243:g=!!f&&1===uj(f)}return g}
function bE(a,b,c,d){var e=new FormData,f=new XMLHttpRequest,g=a.D;e.append("score",b,b.name);f.open("POST",`/api/v1/slices/${g.D}/notation/`,!0);f.onload=()=>{if(200===f.status){var h=JSON.parse(f.responseText);sw(a.C,h.data,!1);g.H=h.version;jB(a.A);oB(a,!1);ID(a,0);Q(a.C,19,[g.H,h.date,h.bars,1]);VD(a);if(h.name||h.artist)h.name&&(g.G=h.name),h.artist&&(g.N=h.artist),Q(a.C,211);h.notice&&hs(a.C,h.notice,!0,2);c()}else 422===f.status?d(JSON.parse(f.responseText).error):d("There was an error.")};
f.send(e)}function GD(a,b,c,d,e){var f=a.C,g=Fr;a=a.qb;var h=a.length,k=0;if(f.I&&d.length){for(;h--;)a[h].disconnect();a.length=0;f=f.I.A;for(h=d.length;h--;)(k=js(f,d[h],c,g.currentTime+e,.3,0,0,.6,b,!0,null))&&a.push(k);k=a.length}return k}function AD(a,b,c){var d=a.za.F;1===d?FD(a,b,c):2===d&&HD(a,b.K)}
function CC(a,b,c,d){var e=b[0].J.O;var f=e.H;var g=e.I,h=f+"-"+g;if(cB[h])f=cB[h];else{var k=[];var l=3<f&&0===f%3?3:1,m;for(m=l;m<f;m+=l)k.push(we(m,g));f=cB[h]=k}e=4===e.H&&4===e.I;g=b.length;a:{for(c++;c--;)if(h=b[c],!h.D)break a;c=0}0>c&&(c=0);-1===d&&(d=b.length-1);V(a.A);for(h=c;h<=d;h++)if(c=b[h],k=Hz(a.C.A,c),!c.D){a:{for(m=h+1;m<g;m++)if(l=b[m],!l.D)break a;l=null}m=null!==l?Hz(a.C.A,l):null;if(k=null!==m&&sz(c)&&sz(l)&&(-1===k.G&&-1===m.G||k.G===m.G||k.G!==m.G&&Xk(c)!==Xk(l)))if(e&&.125===
c.ha.duration&&(c.ga===we(1,8)&&VA(b,!0)||c.ga===we(5,8)&&VA(b,!1)))k=!0;else{a:{m=f.length;for(var n=c.ga,p=l.U;m--;)if(l=f[m],ze(l,n)&&ze(p,l)){l=!0;break a}l=!1}l&&(k=!1)}a.Ma(c,k)}W(a.A)}
function tC(a,b,c,d,e){var f=a.D.A,g=f.length,h=f[b],k=h.T[c],l=k.C,m=0;if(d!==l){if(e&&d)for(m=0;m<d;m++)if(b+m<g){var n=f[b+m].T[c];if(zl(n,!0,!1))return hs(a.C,`A ${d}-bar rest is not allowed here, because at least one bar within that range contains a note or chord.`,!0,1),!1;if(n.O.G)return hs(a.C,`A ${d}-bar rest is not allowed here, because at least one bar within that range is a commentary bar.`,!0,1),!1}V(a.A);0>l&&tC(a,b+l,c,-l,e);if(d&&b+m>g)for(m=b+m-g;m--;)BB(a,null,!1);if(l)for(m=0;m<
l;m++)b+m<g&&(f[b+m].T[c].C=0);k.C=d;X(a,h,!0);W(a.A)}return!0}function uC(a,b,c){var d=a.D;b=d.F[b];c!==b.A&&(b.A=c,am(d),cE(a))}function LD(a,b,c){a.D.T[b].S.splice(c,1);X(a,null,!1)}function MD(a,b){var c=a.C,d=a.D,e=d.T,f=d.A,g=e[b],h=aA(c.G);V(a.A);g.A&&(g=xj(d,g),g.A=0,dE(a,g.index));if(1===e.length){var k=[];for(g=f.length;g--;)k.push(g);YC(a,k,h)}for(g=f.length;g--;)f[g].T.splice(b,1);e.splice(b,1);g=b;for(b=e.length;g<b;g++)e[g].index--;lm(d);Yz(c.G);X(a,null,!0);W(a.A);Q(c,16)}
function ND(a,b,c){for(var d=a.D.A[b].T[c].A.length;d--;){var e=a,f=b,g=c,h=d,k=e.D.A[f].T[g],l=k.A[h].length;for(V(e.A);l--;)EB(e,f,g,h,l);WD(e,k,h);W(e.A)}}function dD(a,b,c,d){c=Pl(b,c);d?-1!==c?(c=b.D[c],c.A!==d.A&&(c.A=d.A,X(a,b,!0))):(null===b.D&&(b.D=[]),b.D.push(d),X(a,b,!0)):-1!==c&&(b.D.splice(c,1),b.D.length||(b.D=null),X(a,b,!1))}function cE(a){for(var b=a.D.A,c=b.length;c--;)b[c].X=0;Vv(a.C.D);Q(a.C,239)}
function JC(a,b,c){var d=a.pa,e=-1,f;for(f in d){var g=parseInt(f,10);if(d.hasOwnProperty(f)){var h=d[f];if(h.name===b&&EA(h.ab,c))return h}g>e&&(e=g)}h=new Eg(String(e+1),b,c);return a.pa[h.F]=h}function dE(a,b){var c=a.D.A,d=c.length,e,f,g;for(V(a.A);d--;){var h=c[d].T[b].A;for(e=h.length;e--;){var k=h[e];for(f=k.length;f--;){var l=k[f].A;for(g=l.length;g--;)uD(a,l[g],!1,!0)}}}lm(a.D);X(a,null,!0);W(a.A)}
function eE(a,b){V(a.A);var c=a.D.A;c=VC(a,b.Ia,b.name,b.Ra,b.N,b.G?b.G:[],b.ba,b.ia,b.Va,b.A,c.length?c[0].T[b.index].I.code:"G2",b.H,b.Z,b.da,b.Ea,b.sa,b.Ha,b.Ja);b.V&&(c.V=b.V);W(a.A)}function fE(a,b){V(a.A);2===b.A&&eE(a,xj(a.D,b));eE(a,b);1===b.A&&eE(a,xj(a.D,b));W(a.A)}
function GC(a,b,c,d,e,f,g){var h=b.K,k=h.J.track;if(c<=WA(k)&&TA(h.J)&&(f||b.Da!==c||hj(b)||b.ka!==d||Zi(b,!1,b.X).A!==e)){f=qA(a.C.G,b);h=$i(b,a.D);var l=b.ka!==d,m=b.Da!==c;k=k.G[d]+c+k.H!==k.G[b.ka]+b.Da+k.H;V(a.A);do{var n=Ii(h)?Ji(h,a.C.C,1):null;k&&hj(h)&&rD(a,h,!1);l&&(Vi(h)&&iD(a,h,!1),Wi(h)&&PD(a,h,!1),h.I&&1!==h.I&&2!==h.I&&kD(a,h,null),h.F&&1!==h.F&&2!==h.F&&jD(a,h,null));if(l||m)h.N=null;h.Da=c;h.ka=d;h.ia=c;h.da=d;h.X=Vf(e);h.M=Zi(h,!0,h.X);ck(h.K);h=n}while(h);g||(lm(a.D),X(a,null,!0));
W(a.A);for(a=f.length;a--;)Uz(f[a],b,!1)}}function WC(a,b){var c=xj(a.D,b);c.A=0;dE(a,c.index);b.A=0;dE(a,b.index)}function OD(a,b,c,d,e){var f=a.D;b=f.A[b].T[c];d=we(d,e);e=b.P;c=null;var g;if(e)for(g=e.length;g--;)if(e[g].A===d){c=e[g];e.splice(g,1);e.length||(b.P=null);break}c&&(lm(f),X(a,null,!1))}
function WD(a,b,c){var d=b.A,e,f;V(a.A);d.splice(c,1);var g=c;for(f=d.length;g<f;g++){var h=d[g];for(e=h.length;e--;)h[e].fa--}if(b.N)for(g=0,f=b.N.length;g!==f;g++)b.N[g].v>=c&&b.N[g].v--;wC(a,b.O);Yz(a.C.G);oB(a,!0);jB(a.A);W(a.A);xC(a)}function BC(a,b,c,d,e,f){a=a.D.A[b].T[c].N;b=a.length;for(var g;b--;)if(c=a[b],c.v===d)for(c=c.i,g=c.length;g--;)-1===f&&e===c[g]?c.splice(g,1):c[g]>=e&&(c[g]+=f)}function EC(a,b){if(Kk(b)){var c=b.H,d=c.length;for(V(a.A);d--;)gE(a,b,c[d].id);W(a.A)}}
function bD(a,b,c,d,e){b=xB(a.Z,b);var f=Zl(a.D,null,.25,0,0,0);c=DB(a,c.J.O.W,c.J.track.index,c.fa,d,f,!1);zB(a.Z,a,c.J.track.index,c.J.O.W,c.ja,c.fa,b,e)}function NB(a,b,c,d,e,f,g){var h,k=null;return(h=43===b?c.N:44===b?c.M:248===b?c.X:c.V)&&(!d||h.text!==d||h.C!==e||h.A!==f||h.D!==g)||!h&&d?(d&&(h?(k=h,k.text=d,k.C=e,k.A=f,k.D=g):k=new Mh(d,g,e,f,null)),43===b?c.N=k:44===b?c.M=k:248===b?c.X=k:c.V=k,X(a,c.J.O,!!k),k):null}
function PB(a,b,c){var d=a.C.A,e=b.J.track;if(!EA(b.I,c)){var f=null!==c&&!Dn(d,e.index,!1,!1,!0);b.I=c;f?(mo(d,e,!0),Gn(d,e,!1)):null!==c||Dn(d,e.index,!1,!1,!0)||(mo(d,e,!1),Gn(d,e,!1));X(a,b.J.O,null!==c);return!0}return!1}function QB(a,b,c){var d=b.da;c=c.toUpperCase();if(/^\d+$/.exec(c))var e=parseInt(c,10);else e=Ub(ua,c),-1===e&&(e=null);if(e&&20<e)return!1;e=null===e?null:[e,1];return EA(d,e)?!1:(b.da=e,X(a,b.J.O,!!c),!0)}
function VB(a,b,c){if(!EA(b.ia,c)){V(a.A);var d=b.A,e=d.length;for(b.ia=c;e--;)d[e].M=Zi(d[e],!0,null);ck(b);X(a,b.J.O,null!==c);W(a.A)}}function AC(a,b,c){Wi(b)&&PD(a,b,!1);b.I&&!c&&kD(a,b,null);0!==(b.A&16)&&!c&&lD(a,b,!1);Ki(b)&&wD(a,b,!1)}function zC(a,b,c){Vi(b)&&iD(a,b,!1);b.F&&(!c||c&&1!==b.F&&2!==b.F)&&jD(a,b,null);0!==(b.A&32)&&!c&&mD(a,b,!1);Ii(b)&&pD(a,b,!1)}
function gE(a,b,c){var d=a.D.M[String(c)],e=JA(b);if(d&&!d.C&&e.length){V(a.A);e=d.A;for(var f=e.length;f--;)if(e[f]===b){e.splice(f,1);b.H.splice(Ub(b.H,d),1);0===b.H.length&&(b.H=null);break}1===d.A.length&&gE(a,d.A[0],c);X(a,null,!1);W(a.A)}}function UD(a,b){V(a.A);var c=Ri(b,a.D,!0);c&&(c.G&&IB(a,b,c.G),pk(c)&&a.da(b,!0),qk(c)&&a.ea(b,!0));W(a.A)}function SD(a,b,c){b.A.splice(c,1);ck(b);X(a,b.J.O,!0)}
function xD(a,b,c,d,e){var f=null;c<=WA(b.J.track)&&TA(b.J)&&(f={},f.fret=c,f.string=d,null!==e&&(f.a=e),f=a.vb(b,f));return f}function yD(a,b,c,d){var e=b.J,f=null;if(TA(e)){c=ZA(b.J.track,c);e=Di(b.J.track,c,e.M);var g={};if(115>=e.W&&0<=e.W){if(!d&&b.J.track.D)return d=$A(b.J.track,Qo(Hz(a.C.A,b)),e.W,-1),100===d[0]?null:xD(a,b,d[1],d[0],Vf(c.A));g.pitch=e.W;g.a=Vf(c.A);f=a.vb(b,g)}}return f}
function vD(a,b,c,d){if(!kg(b.H,c)){var e=b.K,f=e.J;c=ZA(e.J.track,og(c,-zi(e.J.track,a.C.F),f.H,f.M));var g=Di(e.J.track,c,f.M);f=qA(a.C.G,b);var h=$i(b,a.D);if(115<g.W||0>g.W)return!1;if(e.J.track.D&&!tj(b)&&(e=$A(e.J.track,Qo(Hz(a.C.A,e)),g.W,null===b.ka?-1:b.ka),100!==e[0]))return GC(a,h,e[1],e[0],c.A,!1,!1),!0;if(kg(b.M,g))return!1;V(a.A);do e=Ii(h)?Ji(h,a.C.C,1):null,h.M=g,h.X=Vf(c.A),h.Da=null,h.ka=null,h.ia=null,h.da=null,ck(h.K),h=e;while(h);d||(lm(a.D),X(a,null,!0));W(a.A);for(a=f.length;a--;)Uz(f[a],
b,!1);return!0}return!1}function RD(a,b,c){var d=b.K;d=Hh(!1,d.J.track,b.ka,c,aj(b),null,null,null,d.J.M);V(a.A);hj(b)&&rD(a,b,!1);GC(a,b,c,b.ka,d.A,!1,!1);W(a.A)}function PD(a,b,c){if(c!==Wi(b)){V(a.A);c?(AC(a,b,!1),b.A|=8):b.A&=-9;if(!c){var d=Rq(Hz(a.C.A,b.K),b.ka,!1);d&&iD(a,d.A,!1)}X(a,b.K.J.O,c);W(a.A)}}
function wD(a,b,c){if(c!==Ki(b)){var d=Hz(a.C.A,b.K);null!==b.ka?(d=Rq(d,b.ka,!1))&&b.Da!==d.A.Da&&(d=null):d=Qq(d,b.H,0,!1);if(!c||d)V(a.A),c?(AC(a,b,!1),b.A|=2):b.A&=-3,d&&pD(a,d.A,c),X(a,b.K.J.O,c),W(a.A)}}function QD(a,b,c){c!==b.$&&(b.$=c,X(a,b.K.J.O,!!c))}
function rC(a,b){var c=a.C.G.A,d=c.length,e=null,f=!1,g;for(V(a.A);d--;){var h=c[d];if(g=h.C()){var k=g.J;var l=Sz(h);var m=Ci(k.track,b,bj(k));a:{var n=g.A;for(var p=n.length;p--;)if(n[p].M.W===b.W){n=n[p];break a}n=null}n?n===l?gD(a,k.O.W,k.track.index,g.fa,g.ja,Jj(n)):(Uz(h,n,!1),e=n):(a.S&&l?(vD(a,l,m,!1),n=l):n=yD(a,g,m,!1),n&&(Uz(h,n,!1),e=n),f=!0)}}e&&AD(a,e,0);a.S&&f&&SC(a,!0);W(a.A)}
class hE{constructor(a,b){this.C=b;this.F=a;this.D=b.C;this.wa=tx();this.G=this.sa=this.U=this.X=!1;this.I=0;this.qb=[];this.xa=0;this.Ya=-1;this.H=0;this.Z=new ZB;this.Sa=r("common-section");this.Za=r("editsections");this.P=r("editsubsections");this.Ba=r("editvoices");this.Wa=r("currentcmds");this.zb=r("unsaved-changes");this.Ab=r("unsaved-changes-num");this.Bb=r("unsaved-changes-plural");this.La=this.Ia=!1;this.sb=()=>{$D(this,this.P);$D(this,this.Ba);$D(this,this.Wa);$D(this,this.Sa);this.Ia=!1};
this.tb=()=>{var c=this.C.G,d=c.A,e=d.length,f="",g=0,h=BA.length;if(10<hA(c,!1).length)f='<li class="current-multiple">Multiple selections</li>';else for(;g!==h;g++)if(BA[g][3]){var k=BA[g][0];for(c=e;c--;)if(aE(this,d[c],k)){f+=iB(hB(k));break}}this.Wa.innerHTML=f;xC(this);this.La=!1};LC(this);this.M=c=>{var d=La(c.target,"data-code");d&&(d=parseInt(d,10),c.preventDefault(),MC(this,d)||(d=null));return d};this.rb=new iE(this);this.fb=new jE(this);this.N=new kE(this);this.za=new mC(this);this.Aa=
0;this.Ja=[];this.qa=r("auto-advance");this.S=!1;this.A=new qB(this);this.Y=new sC(this);this.V=0;this.pa=null;this.nb=()=>{if(!this.U&&this.sa){var c=this.D;try{var d=this.A;window.localStorage.setItem(c.D,JSON.stringify({scoreHash:c.D,scoreVersion:c.H,scoreJSON:0<d.A?d.G[d.A]:null,changeCount:Math.abs(this.V)}))}catch(e){}this.sa=!1}this.pa=null};this.Xa=c=>{c.preventDefault();return c.returnValue="You have unsaved notation changes. Are you sure you want to leave this page?"};b.assign([38],()=>
{this.xa=0;this.Aa=bA(b.G);FC(this);var c=this.N;c.D||(requestAnimationFrame(c.M),c.D=!0)},[223],c=>{var d=this.za.G,e=c.data[0];c.data[1]&&0!==d&&(c.data[2]||1===d?FD(this,e,0):2===d&&HD(this,e.K))},[177,209,210],()=>{ID(this,this.V+1)},[178],()=>{ID(this,0)},[180],c=>{oB(this,!0);ID(this,c.data+1)},[192],()=>{this.X?hs(b,"Please save your changes before printing.",!0,1):hy(this.F)},[207],()=>{E(this.qa,"active",this.S)});cu(b,[195],()=>{var c=610<=window.innerWidth&&620<=window.innerHeight;c!==
this.G&&(this.G=c,E(document.documentElement,"useliveedit",c),-1!==Ub(xA,this.I)&&Q(this.C,c?91:92))});L(window,"MODAL_CLOSE",()=>{this.G&&-1!==Ub(xA,this.I)&&Q(b,92);this.I=0;var c=this.A;c.C=null;c.D=null;xC(this)});L(r("discard-unsaved-changes"),"click",()=>{var c=this.fb;lE(c,c.C.D.H,!0);mE(this.fb,!1)});L(this.qa,"click",()=>{this.S=!this.S;Q(this.C,207)})}Ma(a,b){var c=this.D,d=a;if(b!==rk(a)&&(b&&!a.va&&!a.D&&sz(a)||!b)){if(b){do if((d=Vj(d,c,!1))&&!d.va&&!d.D)break;while(d);if(!d||!sz(d))return}V(this.A);
do a.D||HC(this,a,b),a=Vj(a,c,!1);while(b&&a&&a!==d);W(this.A)}}yb(a,b){HB(this,a,b?-1:null,!0)}da(a,b){TA(a.J)&&b!==pk(a)&&(V(this.A),b&&qk(a)&&this.ea(a,!1),a.C=b?a.C|8:a.C&-9,X(this,a.J.O,b),W(this.A))}ea(a,b){TA(a.J)&&b!==qk(a)&&(V(this.A),b&&pk(a)&&this.da(a,!1),a.C=b?a.C|16:a.C&-17,X(this,a.J.O,b),W(this.A))}oa(a,b){TA(a.J)&&b!==vk(a)&&(V(this.A),b&&wk(a)&&this.ia(a,!1),a.C=b?a.C|512:a.C&-513,X(this,a.J.O,b),W(this.A))}ia(a,b){TA(a.J)&&b!==wk(a)&&(V(this.A),b&&vk(a)&&this.oa(a,!1),a.C=b?a.C|
1024:a.C&-1025,X(this,a.J.O,b),W(this.A))}$(a,b){TA(a.J)&&b!==sk(a)&&(V(this.A),b&&tk(a)&&this.ba(a,!1),a.C=b?a.C|64:a.C&-65,X(this,a.J.O,b),W(this.A))}ba(a,b){TA(a.J)&&b!==tk(a)&&(V(this.A),b&&sk(a)&&this.$(a,!1),a.C=b?a.C|128:a.C&-129,X(this,a.J.O,b),W(this.A))}Ha(a,b){TA(a.J)&&b!==xk(a)&&(a.C=b?a.C|2048:a.C&-2049,X(this,a.J.O,b))}Ca(a,b){TA(a.J)&&b!==Ej(a)&&(a.C=b?a.C|4:a.C&-5,X(this,a.J.O,b))}Ea(a,b){TA(a.J)&&b!==ek(a)&&(a.C=b?a.C|2:a.C&-3,X(this,a.J.O,b))}Pa(a,b){b!==yk(a)&&(a.C=b?a.C|32768:
a.C&-32769,a.C&=-65537,X(this,a.J.O,b))}Oa(a,b){b!==zk(a)&&(b?(a.C|=32768,a.C|=65536):(a.C&=-32769,a.C&=-65537),X(this,a.J.O,b))}vb(a,b){V(this.A);a.J.eb=!1;b=a.vb(b);var c=a.A.length;if(1===c)CC(this,Zj(a),a.ja-1,a.ja),fD(this,a,!1);else for(;c--;)tj(a.A[c])&&SD(this,a,c);X(this,a.J.O,!0);W(this.A);return b}}
function nE(a,b,c,d){var e=a.C,f=a.G.F;a.F=null;a.M=null;Nz(a.V,b,c)&&(1===f.F.A?(a.F=f.F.D,a.S=a.F.ya,V(a.A.A),document.body.style.cursor="ns-resize"):2===f.F.A&&(a.M=f.F.C.K,a.S=f.F.C.C,V(a.A.A),document.body.style.cursor="ns-resize"));f=f.F;dv(e,e.A,b,c,a.I,!0);0!==f.A&&f.C?(e=f.C.A,b=f.C.K.J.track.index):(e=cr(a.I,e.A),b=Jz(e,b-kp(e),c-hr(go(e))));a=a.A;var g=b;c=f.A;0!==c&&26!==c||yC(a,e.O.W,g,a.H,null,!0);if(Lz(f)){c=a.C.G;e=f.C?f.C.K:e.O.T[g].A[a.H][0];g=f.D;var h=e.fa!==a.H,k=23===f.A||24===
f.A;d&&!h||oA(c);h&&nB(a,e.fa);mA(c,e,g,k,!1,k?f.F:null,!0,!0,!0);g&&Q(a.C,223,[g,!0,!1,!0])}if(!d)switch(d=a.F,c=f.C,f.A){case 3:ox(d,"etcmodals",101,f.J.O);break;case 4:ox(d,"etcmodals",102,f.J);break;case 5:ox(d,"etcmodals",105,c.K);break;case 32:ox(d,"etcmodals",145,[f.J.track.S[f.F],f.J.track]);break;case 13:ox(d,"text",96,[45,null,null,f.J.O]);break;case 14:ox(d,"text",96,[46,null,null,f.J.O]);break;case 33:ox(d,"text",96,[9,null,null,f.J.O]);break;case 16:ox(d,"etcmodals",110,[c.K]);break;
case 17:ox(d,"fingering",137,[61,c.K,f.D,null]);break;case 18:ox(d,"fingering",137,[196,c.K,f.D,null]);break;case 26:ox(d,"text",96,[48,null,null,f.J.O]);break;case 28:ox(d,"text",96,[246,null,null,f.J.O]);break;case 15:ox(d,"lyric",98,c.K);break;case 6:ox(d,"text",94,[43,c.K]);break;case 8:ox(d,"text",94,[248,c.K]);break;case 7:ox(d,"text",94,[44,c.K]);break;case 9:ox(d,"text",94,[249,c.K]);break;case 10:ox(d,"edittempo",103,[f.J.O.W,f.F]);break;case 12:ox(d,"etcmodals",104,c.K.J.O);break;case 11:ox(d,
"chord",97,[f.J,f.F]);break;case 21:ox(d,"etcmodals",108,c.K.J.O);break;case 30:ox(d,"etcmodals",123,[c.K.J.O,c.K.J.O.D[f.F]]);break;case 19:ox(d,"text",96,[81,c.K,f.D,null]);break;case 20:ox(d,"etcmodals",106,c.K);break;case 22:ox(d,"text",96,[8,null,null,f.J.O]);break;case 25:ox(d,"etcmodals",109,f.J);break;case 27:ox(d,"text",96,[62,c.K,null,null]);break;case 29:ox(d,"etcmodals",115,f.A);break;case 31:ox(d,"text",96,[288,c.K,f.D,null]);break;case 34:Q(a.C,189);break;case 35:ox(d,"trackform",93,
f.J.track)}return b}function oE(a,b,c,d){var e=a.C;dv(e,e.A,b,c,a.I,!0);a=cr(a.I,e.A);return Iz(a,b-kp(a),d,e.F.ia)}function pE(a,b,c,d){a=a.C;a=Hz(a.A,a.G.D(d).C());var e=a.K.J.track.index,f=go(a.A),g=hr(f)+nr(f,e);e=g+f.$[e];return 20>Math.abs(gq(a)+(d?a.width:0)-b)&&c>g-20&&c<e+20}
class qE{constructor(a,b,c){this.V=a;this.G=a.C;this.C=b;this.A=c;this.X=!1;this.M=this.F=null;this.S=0;this.H=this.D=null;this.I=new dr;this.N=this.P=-1;this.$a=!1;this.ob=()=>{var e=this.C,f=this.D,g=this.H,h=this.G;if(!h.C&&!h.G&&f&&g){h=e.G;var k=f.J.O.W<g.J.O.W||f.J.O.W===g.J.O.W&&f.ja<g.ja?f:g;f=k===f?g:f;oA(h);do{iA(h,k,!1);if(k===f)break;k=Vj(k,e.C,!0)}while(k)}this.$a=!1};this.U=St;var d=this.G.D.H;L(d,"mousemove",e=>{if(b.S&&!b.ia&&!Xt(b.D)){var f=Na(d);Nz(a,e.pageX-f.left,e.pageY-f.top)}});
L(d,"mouseout",()=>{Mz(a,Vt)});Pc(d,d,(e,f,g)=>{if(b.S)a:{var h=g.metaKey||g.ctrlKey,k="touchstart"===g.type;g=this.C;var l=g.G;this.X=k;g.ia=!1;if(!g.Y){if($z(l)){var m=pE(this,e,f,!0)?!0:pE(this,e,f,!1)?!1:null;if(null!==m){this.D=l.D(!m).C();this.H=l.D(m).C();g.ia=!0;this.P=e;this.N=f;break a}}if(!k&&(h=nE(this,e,f,h),k=this.G.F.F,g.ia=0===k.A||Lz(k),g.ia))if(this.P=e,this.N=f,k.C)this.D=k.C.K;else if(e=oE(this,e,f,h))this.D=e.K}}},(e,f)=>{if(b.S){var g=this.V,h=this.C,k=this.F,l=this.M;if(this.D&&
h.ia)if(Mz(g,Vt),k||l)document.body.style.cursor="ns-resize",e=Math.max(Math.min(this.S+Math.round((k?2:1)*(f-this.N)/h.A.A),20),-14),k?(l=vD(this.A,k,oz(e,zj(k),k.K.J.H,k.K.G),!1))&&AD(this.A,k,0):(k=this.A,e=Math.ceil(e),e!==l.wa&&(l.wa=e,X(k,l.J.O,!1)));else if(this.H||10<=qb(e,f,this.P,this.N))if(l=oE(this,e,f,this.D.J.track.index))this.H=l.K,this.U()}},(e,f,g)=>{if(b.S){if(this.F||this.M)document.body.style.cursor="auto",W(this.A.A);this.X&&g&&nE(this,e,f,!1);Yq(this.I);this.C.ia=!1;this.M=this.F=
this.H=this.D=null}},!1);this.G.P.assign([196,197],()=>{b.S&&this.U()});b.assign([43],()=>{b.S&&Mz(a,Vt)})}}
class rE{constructor(a){this.C=a;this.height=this.width=0;this.A=new ae(r("playheadnote"),a.U);this.$a=!1;this.ob=()=>{var b=this.C,c=this.A,d=b.G;Xd(c,0,0,this.width,this.height);if(d&&!d.F()&&b.S&&!Xt(b.D)&&b.A.G.length){var e=b.F.F?"rgba(252, 93, 43, 0.325)":"rgba(252, 93, 43, 0.15)";O(c,e);rd(c,e);if($z(d)){d=hA(d,!1);c=0;e=d.length;var f=null;for(d.sort(zh);c!==e;c++){var g=d[c];f||(f=g);if(c===e-1||Vj(g,b.C,!0)!==d[c+1]){var h=void 0,k=this.A,l=this.C.A,m=5===l.F,n=l.A/2,p=Hz(l,f);g=f===g?p:
Hz(l,g);for(var q=f.J.track.index,t=null;p;){t||(t=p,h=p.A.C);f=aq(p,!0);if(p===g||f.A.C!==h){var u=l.$[h];if(!m||u.G===l.U){var v=gq(t);t=k;var w=v,y=hr(u)+nr(u,q);v=gq(p)+p.width-v;u=u.$[q];var x=n,z=t.A;w+=1;y+=1;v-=2;u-=2;z.beginPath();Kd(t,w+x,y);Ld(t,w+v-x,y);Pd(t,w+v,y,w+v,y+x);Ld(t,w+v,y+u-x);Pd(t,w+v,y+u,w+v-x,y+u);Ld(t,w+x,y+u);Pd(t,w,y+u,w,y+u-x);Ld(t,w,y+x);Pd(t,w,y,w+x,y);z.closePath();z.stroke();z.fill()}t=null}if(p===g)break;p=f}f=null}}}else for(b=d.A,c=b.length;c--;)n=b[c],-1!==n.ja&&
(g=this.C,e=g.A,!(d=(p=n.C())?Hz(e,p):null)||5===e.F&&go(d.A).G!==e.U||(p.J.O.G?(e=d.A,d=d.K.J.track,h=go(e),k=(k=Do(e))?k.A:0,P(this.A,kp(e)+k,Sp(h,d)+Pn(this.C.A),e.width-k,sr(h,d))):(h=e.A,k=Sz(n),f=d.A,l=gq(d),m=Tz(n),p.va&&lq(d,g.C)&&(l=op(f)),n.F?(n=1.3*h,l-=n/2):(n=1.5*h,l=k?l+(d.F+Qp(d,k)+Wp(d)/2-n):l-h),2===e.F&&(l<2*-n||l>e.H+2*n)||Yd(this.A,l+n,m,n,!1))))}this.$a=!1};this.D=St;a.assign([43,51,40,73,30,35,38,218,167,171],()=>{this.D()});cu(a,[49],()=>{var b=this.A,c=this.C,d=c.A.S;c=c.A.H;
this.width!==c&&(gd(b,c),this.width=c);this.height!==d&&(hd(b,d),this.height=d);this.D()})}}function PC(a,b){b!==a.isActive&&(a.isActive=b,E(document.body,"omni-on",b),E(a.M,"active",b&&!a.C.value.trim()),b?(sE(a),a.C.focus(),window.setTimeout(()=>{a.C.focus()},0)):tE(a))}function uE(a,b){b=(b=b.toLowerCase().trim())?b.split(/\s+/):[];Db(b,a.F)||(a.F=b,sE(a))}
function vE(a){var b=a.H,c=Math.max(0,Math.min(a.D,b-1)),d=a.G.querySelectorAll(".omni-search-result.selected");a.D=c;if(b){if(d)for(b=d.length;b--;)D(d[b],"selected");C(a.G.querySelectorAll(".omni-search-result")[c],"selected");a.G.querySelectorAll(".omni-search-result")[c].scrollIntoView({block:"center"})}}
function wE(a,b){if(window.soundslice.isNonfree){xE(a.A.N);PC(a,!1);var c=a.A.N.G.querySelectorAll(`input[${"data-c"}="${b}-0"]`)[0],d=c.closest(".shortcut-wrapper");d&&(d.scrollIntoView({block:"center"}),C(d,"attentionshake-once"),window.setTimeout(()=>{c.focus()},0),d.addEventListener("animationend",e=>{"shake"===e.animationName&&D(d,"attentionshake-twice")},{once:!0}))}else window.soundslice.openUpgradeModal("Customizable keyboard shortcuts")}
function yE(a,b){var c=a.I;-1===Ub(c,b)&&(c.push(b),5<c.length&&c.splice(0,c.length-5),a.isActive&&sE(a))}
function zE(a,b,c){var d=AE(a.A.N,b[0],a.A.Aa);return'<div class="omni-search-result '+(c?"disabled":"")+'" data-code="'+b[0]+'"><div class="editor-search-text-wrapper">'+(b[2]?'<svg class="editor-search-icon"><use xlink:href="#shape-'+b[2]+'"></svg>':'<div class="empty-search-icon editor-search-icon"></div>')+'<div class="editor-search-text">'+Qa(b[1])+"</div></div>"+(d[0]?'<kbd class="editor-search-shortcut">'+ZD(a.A,d[0],!0)+"</kbd>":"")+'<div class="ui-tooltip-wrapper editor-search-more-wrapper"><button class="editor-search-more"><svg class="svg-icon svg-icon-tiny"><use xlink:href="#shape-more-icon"></use></svg></button><div class="ui-tooltip ui-tooltip-no-arrow editor-search-more-tooltip"><button type="button" class="ui-tooltip-button ui-tooltip-button-smaller editor-add-shortcut">'+
(d[0]?"Edit":"Create")+" shortcut\u2026"+(window.soundslice.isNonfree?"":'<span class="badge badge-grad" title="Upgrade"><svg class="svg-icon svg-icon-tiny"><use xlink:href="#shape-plus"></use></svg></span>')+"</button></div></div></div>"}
function sE(a){var b=a.A,c=a.F,d=!c.length,e=a.I,f="",g="",h="",k=0,l=BA.length,m=c.length,n=0,p;if(m)for(;k!==l;k++){var q=BA[k];if(p=q[4])a:{p=q[1];for(var t=c,u=m;u--;)if(-1===p.toLowerCase().search(t[u])){p=!1;break a}p=!0}p&&(p=!NC(b,q[0],b.C.G),q=zE(a,q,p),p?g+=q:f+=q,n++)}else if(e.length)for(k=e.length,h+='<h3 class="heading-6 text-muted margin-bottom-4">Recent commands</h3>';k--;)q=hB(e[k]),h+=zE(a,q,!NC(b,q[0],b.C.G)),n++;a.N.innerHTML=f+g+h;a.H=n;a.D=0;E(a.M,"active",d);E(a.P,"active",
!d&&!n);E(a.N,"showing-recent-commands",d&&!!e.length);vE(a)}function tE(a){a.C.value="";a.F.length=0;sE(a)}
class iE{constructor(a){this.A=a;this.C=r("edsearch");this.N=r("edsearchresults");this.G=r("edsearchresultswrap");this.M=r("edsearchmsg1");this.P=r("edsearchmsg2");r("edrecentcommands");this.I=[];this.F=[];this.isActive=!1;this.H=this.D=0;L(this.C,"change",d=>{uE(this,d.target.value)},"keydown",d=>{var e=gB(d);"ArrowDown"===e||"ArrowUp"===e?(this.D+="ArrowDown"===e?1:-1,vE(this),d.preventDefault()):"Enter"===e&&(this.H&&(d=parseInt(La(this.G.querySelectorAll(".omni-search-result")[this.D],"data-code"),
10),MC(this.A,d),yE(this,d)),PC(this,!1))},"keyup",d=>{var e=gB(d);"ArrowDown"!==e&&"ArrowUp"!==e&&uE(this,d.target.value)},"focus blur",()=>{var d=document.activeElement===this.C;E(this.A.P,"search-input-focused",d&&!!this.F.length);d&&PC(this,!0)});L(window,"keydown",d=>{27===d.which&&this.isActive&&PC(this,!1)});M(r("edsearchcancel"),()=>{PC(this,!1)});L(this.G,"click",d=>{var e=d.target;if(Ea(e,"editor-search-more")){d=document.querySelectorAll(".editor-search-more-tooltip.active")[0];var f=document.querySelectorAll(".editor-search-more.active")[0];
d&&D(d,"active");f&&D(f,"active");f!==e&&(C(e.nextElementSibling,"active"),C(e,"active"))}else Ea(e,"editor-add-shortcut")?wE(this,parseInt(La(e,"data-code"),10)):((e=a.M(d))&&yE(this,e),PC(this,!1))});for(var b=a.F.F.getElementsByClassName("editor-search-button"),c=b.length;c--;)M(b[c],()=>{PC(this,!0)});a.C.assign([87],()=>{var d=AE(a.N,263,4),e=!!d.length;E(r("edsearchscut1"),"active",e);if(e){e=r("edsearchscut2");a:{var f=d.length;if(a.wa)for(;f--;)if(d[f][6]){d=d[f];break a}d=d[0]}e.innerHTML=
ZD(a,d,!0)}})}}var BE={year:"2-digit",month:"2-digit",day:"numeric",hour:"numeric",minute:"numeric"},CE=!1;try{(new Date).toLocaleString("i")}catch(a){a instanceof RangeError&&(CE=!0)}
function DE(a,b){var c=-1===a.version;var d="";1===a.A||5===a.A?d="File upload":3===a.A?d="From another slice":6===a.A&&(d="Automatically saved");if(c)var e="";else e=a.D,e='<span class="bar-count">'+(e+" bar"+(1!==e?"s":""));return'<li class="versionlist-item"><button class="versionlist-button '+(b?"active ":"")+(c?"unsaved ":"")+"version"+a.version+'" data-v="'+a.version+'"><span class="versionlist-name">'+(c?"Unsaved changes":CE?a.C.toLocaleString(void 0,BE):a.C.toLocaleString())+"</span>"+e+(d?
` <em>(${d})</em>`:"")+"</span></button></li>"}class EE{constructor(a,b,c,d){this.version=a;this.C=b?new Date(b):new Date;this.D=c;this.A=d}}function mE(a,b){b&&!a.C.D.H||b===a.D||(E(a.H,"active",b),E(document.body,"show-version-history",b),b&&FE(a),a.D=b)}
function lE(a,b,c){if((c||a.M)&&b!==a.A){var d=a.C;GE(a,!0);kc("GET",`/api/v1/slices/${d.D.D}/versions/${b}/`,null,e=>{sw(d.C,e,!1);JD(d);VD(d);oB(d,!c);jB(d.A);b!==a.A&&(a.A=b,HE(a));GE(a,!1);Q(d.C,178)},()=>{GE(a,!1);hs(d.C,"Sorry, we couldn't load that version.",!0,1)})}}function HE(a){var b=a.G,c=a.A,d="",e=0,f=b.length;for(-1===c&&(d+=DE(a.N,!0));e!==f;e++)d+=DE(b[e],c===b[e].version);a.F.innerHTML=d}
function FE(a){if(!a.I){var b=a.C,c=a.G;a.I=!0;c.length=0;kc("GET",`/api/v1/slices/${b.D.D}/versions/`,null,d=>{for(var e=0,f=d.length;e!==f;e++)c.push(new EE(d[e].version,d[e].date,d[e].bars,d[e].type));HE(a)},Mr)}}function GE(a,b){E(a.C.F.Pa,"loading-notation-version",b)}
class jE{constructor(a){this.C=a;this.G=[];this.I=!1;this.N=new EE(-1,"",0,2);this.F=r("versionlist");this.H=r("version-list-button");this.M=Ea(this.F,"caneditversion");this.A=0;Fz(a.D,()=>{this.A=a.D.H;this.C.D.H?D(this.H,"hidden"):a.C.assign([19],()=>{D(this.H,"hidden")})});this.D=!1;this.M&&L(this.F,"click",d=>{var e=La(d.target,"data-v");null!==e&&(d.preventDefault(),-1===this.A?OC(a,6).then(()=>{lE(this,parseInt(e,10),!1)}).catch(()=>{hs(a.C,"Sorry, we couldn't load that version.",!0,1)}):lE(this,
parseInt(e,10),!1))});a.C.assign([19],d=>{d=new EE(d.data[0],d.data[1],d.data[2],d.data[3]);this.A=d.version;this.I&&(this.G.unshift(d),HE(this))},[18],()=>{-1!==this.A&&(this.A=-1,HE(this))});for(var b=document.querySelectorAll(".version-list-trigger"),c=b.length;c--;)M(b[c],()=>{mE(this,!this.D)});M(r("version-close"),()=>{mE(this,!1)})}}
function cC(a,b){return IE(a,b).F?(a.C=b,IE(a,a.C).load(()=>{Q(a.A.C,87,b);a.D||(requestAnimationFrame(a.M),a.D=!0);var c="",d,e,f;var g=0;for(d=CA.length;g!==d;g++){var h=!1;var k=CA[g][1];var l=CA[g][2];var m=0;for(e=l.length;m!==e;m++){var n=AE(a,l[m],k);if(n.length){h||(c+='<h4 class="shortcut-title text-3 margin-top-30"><b>'+Qa(CA[g][0])+"</b></h4>",h=!0);c+='<div class="shortcut-wrapper"><div class="shortcut-text">'+Qa(hB(l[m])[1])+'</div><div class="shortcut-code">';var p=0;for(f=n.length;p!==
f;p++)c+="<kbd>"+ZD(a.A,n[p],!0)+"</kbd>",p!==f-1&&(c+=' <span class="shortcut-or">or</span> ');c+="</div></div>"}}}r("shortcutlist").innerHTML=c;c=r("shortcut-select");h="";k=a.H;l=0;for(g=k.length;l!==g;l++)m=k[l],h+="<option"+(m.id===a.C?' selected="selected"':"")+' value="'+m.id+'">'+Qa(m.name)+(m.F?"":" (Requires paid account)")+"</option>";c.innerHTML=h}),!0):!1}function QC(a,b){b!==a.I&&(E(r("shortcuts"),"active",b),E(r("shortcut-trigger"),"active",b),a.I=b)}
function AE(a,b,c){var d=a.A.wa;a=IE(a,a.C).A;var e=[],f;var g=0;for(f=a.length;g!==f;g++){var h=a[g];var k=h[2];h[0]!==b||!d&&h[6]||!(1===k&&1===c||2===k&&2===c||4===k)||e.push(h)}return e}
function xE(a){var b=IE(a,a.C),c="",d="",e,f,g;Pb(b.A,a.F);var h=0;for(f=CA.length;h!==f;h++){c+='<div class="shortcut-section">';c+=`<h4 id="shortcutgrp${h}" class="shortcut-title"><b>`+Qa(CA[h][0])+"</b></h4>";var k=CA[h][1];var l=CA[h][2];d+=`<li><button type="button" data-scrollto="shortcutgrp${h}" class="subtle-link text-semibold reset-lh button-reset">`+Qa(CA[h][0])+"</button></li>";var m=0;for(g=l.length;m!==g;m++){var n=AE(a,l[m],k);c+='<div class="shortcut-wrapper"><label>'+Qa(hB(l[m])[1])+
'</label><div class="shortcut-input-section">';var p=n.length||1;for(e=0;e!==p;e++){var q=e<n.length?ZD(a.A,n[e],!0):"";c+='<div class="shortcut-input-wrapper"><input class="modal-inputtext '+(""===q?"empty":"")+'" type="text" placeholder="Type\u2026" value="'+q+'" data-c="'+l[m]+"-"+e+'">';c+='<button class="clear-shortcut" data-d="'+l[m]+"-"+e+'"><span class="clear-shortcut-inner"><span class="clear-shortcut-text">\u00d7</span></span></button></div>'}c+="</div></div>"}c+="</div>"}r("shortsedit").innerHTML=
c;r("shortsname").value=b.D?b.name:"My shortcuts";r("shortcut-sidebar-content").innerHTML=d;r("shortcut-edit-content").scrollTop=0;be("shortcut-edit")}
function JE(a,b,c,d){var e=a.F,f=0;a:{var g=CA.length;for(var h;g--;)for(h=CA[g][2].length;h--;)if(CA[g][2][h]===b){g=CA[g][1];break a}g=0}var k=d?KE(a,!1,d,g,!0):0;h=d?gB(d):"ssdele";var l=!!d&&d.shiftKey,m=!!d&&d.ctrlKey,n=!!d&&d.altKey,p=!!d&&d.metaKey&&a.A.wa;if(d&&k&&k!==b)return b=ZD(a.A,[b,h,g,l,m,n,p],!0),hs(a.A.C,b+" is already being used by another shortcut: \u201c"+hB(k)[1]+"\u201d",!1,1),null;a:{for(d=DA.length;d--;)if(k=DA[d],k[0]===h&&k[1]===l&&k[2]===m&&k[3]===n&&k[4]===p){d=!0;break a}d=
!1}if(d)return b=ZD(a.A,[null,h,g,l,m,n,p],!0),hs(a.A.C,`${b} is unavailable for keyboard shortcuts.`,!1,1),null;d=0;for(k=e.length;d!==k;d++)if(a=e[d],a[0]===b){if(f===c)return a[1]=h,a[3]=l,a[4]=m,a[5]=n,a[6]=p,a;f++}a=[b,h,g,l,m,n,p];e.push(a);return a}
function LE(a){for(var b=IE(a,a.C),c=r("shortsname").value.trim()||"My shortcuts",d=a.F,e=d.length;e--;)"ssdele"===d[e][1]&&d.splice(e,1);b.D?b.name=c:(b=new aC(-1,c,"",!0,!0,!0),a.H.push(b));Pb(d,b.A);$B(b,()=>{cC(a,b.id);hs(a.A.C,"Custom keyboard shortcuts saved!",!1,2)})}
function KE(a,b,c,d,e){var f=0;c.code&&"Digit"===c.code.substring(0,5)&&(f=ME(a,b,c.code.substring(5),d,c.shiftKey,c.ctrlKey,c.altKey,c.metaKey));if(!f&&c.code&&/^Numpad\d$/.test(c.code)&&(f=ME(a,b,c.code,d,c.shiftKey,c.ctrlKey,c.altKey,c.metaKey),e))return f;f||(f=ME(a,b,c.key,d,c.shiftKey,c.ctrlKey,c.altKey,c.metaKey));return f}function IE(a,b){a=a.H;for(var c=a.length;c--;)if(a[c].id==b)return a[c];return new aC(-1,"","",!1,!0,!0)}
function ME(a,b,c,d,e,f,g,h){a=b?IE(a,a.C).A:a.F;b=a.length;for(zA[c]&&(c=zA[c]);b--;){var k=a[b];var l=k[2];if(!(k[1]!==c||4!==l&&4!==d&&l!==d||null!==k[3]&&k[3]!==e)&&k[4]===f&&k[5]===g&&k[6]===h)return k[0]}return 0}
class kE{constructor(a){this.A=a;this.I=!1;this.G=r("shortsedit");this.H=[];this.C=-1;this.F=[];this.D=!1;this.M=()=>{for(var e=this.A.Aa,f=this.A.P.getElementsByTagName("button"),g=f.length,h,k;g--;)if(h=f[g],k=h.getElementsByClassName("scut")[0])h=parseInt(h.getAttribute("data-code"),10),h=AE(this,h,e),k.innerHTML=h.length?"<kbd>"+ZD(this.A,h[0],!0)+"</kbd>":"";this.D=!1};var b=a.F,c=r("shortcuteditform"),d;M(r("shortcut-close"),()=>{QC(this,!1)});L(this.G,"keydown",e=>{e.preventDefault();var f=
document.activeElement,g=La(f,"data-c"),h;if(h=g)h=e.key,h=!("Shift"===h||"Alt"===h||"Control"===h||"Meta"===h);h&&(h=parseInt(g.split("-")[0],10),g=parseInt(g.split("-")[1],10),e=JE(this,h,g,e))&&(f.value=ZD(a,e,!1),D(f,"empty"),f.blur())},"click",e=>{var f=La(e.target,"data-d");f&&(e.preventDefault(),JE(this,parseInt(f.split("-")[0],10),parseInt(f.split("-")[1],10),null),e=c.querySelectorAll("input[data-c='"+f+"']"),e.length&&(e[0].value="",C(e[0],"empty")))});L(c,"submit",e=>{e.preventDefault();
LE(this);ce("shortcut-edit")});M(r("shortcut-edit-button"),()=>{window.soundslice.isNonfree?xE(this):window.soundslice.openUpgradeModal("Customizable keyboard shortcuts")});L(r("shortcut-select"),"change",e=>{cC(this,parseInt(e.target.value,10))||(window.soundslice.openUpgradeModal("Using custom keyboard shortcuts"),cC(this,this.A.za.C))});M(r("shortcut-sidebar-content"),e=>{(e=La(e.target,"data-scrollto"))&&r(e).scrollIntoView({behavior:"smooth"})});this.G.addEventListener("focus",e=>{e=e.target;
La(e,"data-c")&&(d=e.value,e.value="")},!0);this.G.addEventListener("blur",e=>{e=e.target;La(e,"data-c")&&""===e.value&&(e.value=d)},!0);L(window,"keydown",e=>{if(b.A.S&&!Ja()&&!le()&&"undefined"!==typeof e.key){var f=KE(this,!0,e,bA(b.A.G),!1);f&&(e.preventDefault(),MC(a,f))}})}}function NE(a){a=a.C.T;for(var b=a.length,c=0,d="",e,f;c!=b;c++)f=a[c],e=`<div class="edit-list-button ui-tooltip-wrapper ui-tooltip-wrapper-stop-overflow">
            <button class="action-button" data-action="4" data-menu="trackmenu${c}">
                <svg class="svg-icon-small svg-icon-more"><use xlink:href="#shape-more-icon"></use></svg>
            </button>
            <div class="ui-tooltip-outer"><div id="trackmenu${c}" class="ui-tooltip ui-tooltip-tiny ui-tooltip-no-arrow ui-tooltip-instrument-more">
                <button class="ui-tooltip-button ui-tooltip-button-tiny subtle-link" data-action="5">Duplicate instrument</button>
                ${f.D?"":'<button class="ui-tooltip-button ui-tooltip-button-tiny subtle-link" data-action="6">Generate tablature</a>'}
            </div></div>
        </div>`,d+=`<li class="edit-list" data-tr="${f.index}"><div class="edit-list-inner">`+(1<b?'<button class="movegrab" data-action="2"><svg><use xlink:href="#shape-grabby"></use></svg></button>':"")+'<div class="edit-list-title"><button class="edit-list-title-button subtle-link" data-action="1">'+Qa(f.name)+'</button></div><button class="action-button edit-list-button" data-action="1" title="Edit instrument"><svg class="svg-icon-small"><use xlink:href="#shape-edit-icon"></use></svg></button><button class="action-button edit-list-button" data-action="3" title="Delete instrument"><svg class="svg-icon-small"><use xlink:href="#shape-delete-icon"></use></svg></button>'+
e+"</div></li>";r("edittracklist").innerHTML=d}function OE(a,b){var c=b.F,d=a?r(`editsec${a}`):null,e=document.querySelector("#editsections .tab-active"),f=document.querySelector("#editsubsections .editsubsec.active");f&&D(f,"active");e&&D(e,"tab-active");a&&d!==e?(D(c.$,"tabs-deactivated"),a&&(C(d,"tab-active"),C(document.querySelector(`#editsubsections #editsubsec${a}`),"active"))):C(c.$,"tabs-deactivated");xC(b)}function XC(a){var b=El(a);return b&&!Ml(a)?a.N.A[a.W+b-1]:a}
function PE(a,b){var c=a.A;b&&hv(c.M);Tw(a.C);Q(c,218);Om(c.A,!0)}
function QE(a,b){var c=r("edittracklist"),d=null,e=null,f=0,g;Pc(c,c,(h,k,l)=>{l.preventDefault();h=La(l.target,"data-action");var m=La(l.target,"data-tr");d=null;null!==m?(m=parseInt(m,10),"1"===h?ox(a,"trackform",93,b.D.T[m]):"3"===h?MD(b,m):"2"===h?(d=b.D.T[m],f=k,g=Na(c),e=Ma(l.target,"data-tr"),C(e,"indrag"),document.body.style.cursor="move"):"4"===h?(k=La(l.target,"data-menu"),yc(r(k),null,null,!0)):"5"===h?fE(b,b.D.T[m]):"6"===h?ox(a,"tabupgrade",154,b.D.T[m]):wc()):wc()},(h,k)=>{d&&(h=document.elementFromPoint(g.left+
30,k+g.top),h!==e&&h.hasAttribute("data-tr")&&(0<k-f?c.insertBefore(h,e):c.insertBefore(e,h),f=k))},()=>{if(d){var h=0;for(var k=e;k=k.previousSibling;)h++;k=d.index;if(k!==h){var l=b.C,m=b.D,n=m.A,p=m.T,q=p[k],t=l.G.A,u=0<h?p[h>k?h:h-1]:null,v,w;V(b.A);q.A&&WC(b,q);u&&1===u.A&&WC(b,u);for(u=n.length;u--;)q=n[u].T,q.splice(h,0,q.splice(k,1)[0]);p.splice(h,0,p.splice(k,1)[0]);u=0;for(w=p.length;u<w;u++)for(q=p[u],q.index=u,v=n.length;v--;)n[v].T[u].track=q;lm(m);X(b,null,!0);W(b.A);u=0;for(w=t.length;u<
w;u++)m=t[u].A,m===k?t[u].A=h:(m>k&&t[u].A--,t[u].A>=h&&t[u].A++);cA(l.G);Q(l,219)}D(e,"indrag");document.body.style.cursor="default"}},!0)}
function RE(a){var b=a.A;b.G=new uA(b);var c=new hE(a,b),d=b.G,e=!1,f=null,g;window.cc=c;new rE(b);new qE(a,b,c);L(r("slice-more-commands-wrapper"),"click",c.M);M(r("editvoices"),c.M);M(r("common-section"),c.M);M(r("currentcmds"),c.M);M(r("controlbar-editor"),c.M);M(r("player-shortcuts-callout"),c.M);M(r("showeditorguide"),()=>{MC(c,272);e=!0});(g=r("showprivatesharemodal"))&&M(g,()=>{MC(c,279)});var h=()=>{var l=r("editbar-slice-title"),m=Qa(c.D.G);l&&(l.innerHTML=m,l.setAttribute("title",m))};L(r("editsections"),
"click",l=>{(l=La(l.target,"data-sec"))&&OE(parseInt(l,10),c)});M(r("close-editsubection"),()=>{OE(null,c)});cu(b,[195],()=>{var l=780>=a.D.innerWidth;l!==f&&(f=l,OE(f?null:1,c))});Fz(c.D,()=>{h()});b.assign([211],()=>{h()});M(r("addtrack"),()=>{MC(c,103)});L(c.P,"click",l=>{c.M(l);Ka()});M(r("addtrackmainmodal"),c.M);L(c.P,"scrollend",()=>{c.P.style.setProperty("--scroll-postion",c.P.scrollLeft+"px")});L(window,"beforeunload",l=>{if(c.X)return l.returnValue="You have unsaved notation changes. Are you sure you want to leave this page?"});
b.assign([40],()=>{b.S&&!b.V&&c.D.A.length&&pA(b.G,b.H,c.H)},[51],l=>{b.S&&!b.V&&!l.data[1]&&c.D.A.length&&pA(b.G,b.H,c.H)},[43,40,31],()=>{xC(c)},[20],l=>{PE(a,l.data);l.data||QC(c.N,!1)},[21],()=>{OC(c,2)},[5,216,16,219,32],()=>{NE(b)},[86],l=>{MC(c,l.data)},[71],()=>{E(r("toggle-concert"),"active",b.F.S)},[216,5,16],()=>{E(r("toggle-concert"),"hidden",!hm(b.C))});window.userFirstSlice&&b.assign([5],()=>{e||1!==c.D.T.length||(MC(c,272),e=!0)});QE(a,c);L(r("tupletform"),"submit",l=>{l.preventDefault();
l=d.A[0].C();var m=r("tuplet1modal").value.trim(),n=r("tuplet2modal").value.trim();Kz(m)&&Kz(n)&&(KC(c,l.J.O.W,l.J.track.index,l.fa,l.ja,parseInt(m,10),parseInt(n,10)),ce("tupletmodal"))});var k=r("notationupload");L(r("notationuploadform"),"submit",l=>{l.preventDefault();k.files&&k.files[0]?(ce("uploadmodal"),D(k,"error"),be("loaderscreen"),bE(c,k.files[0],()=>{ce("loaderscreen")},m=>{hs(b,Qa(m),!0,1);ce("loaderscreen");be("uploadmodal");C(k,"error")})):hs(b,"Please select a notation file.",!1,1)});
L(document.querySelectorAll("#uploadmodal > .modal-box")[0],"dragover",l=>{l.preventDefault();l.dataTransfer.dropEffect="copy";C(document.body,"drag-over-modal")},"dragleave",l=>{l.preventDefault();D(document.body,"drag-over-modal")},"drop",l=>{l.preventDefault();D(document.body,"drag-over-modal");k.files=l.target.files||l.dataTransfer.files});M(r("addtrackmodalside"),l=>{(l=La(l.target,"data-scrollto"))&&r(l).scrollIntoView({behavior:"smooth"})});PE(a,!0);NE(b);b.I?b.I.A.M():b.assign([74],()=>{b.I.A.M()});
(g=r("sliceimg-image-wrapper"))&&ox(a,"image",141,g.getAttribute("data-engraving"));Oz()&&MC(c,280)}function cD(){var a=r("tuplet1modal");a.focus();a.select()}Ua(()=>{var a=soundslice.webui;a&&RE(a)});function SE(a,b){if(a=a[b])for(b=a.length;b--;)if(a[b].checked)return a[b].value;return null}
function TE(a,b){var c=a.C,d=c.A,e=c.C,f=c.F,g=a.A,h=Cn(d);if(b)UE(a,1),VE(a,g),g.instnames.value=f.X,g.hidenotation.checked=!e.Z,g.canprint.checked=c.pa,g.showtitle.checked=f.U,g.allowsynthoverlay.checked=c.za,g.hidesynth.checked=!f.Z,g.lyricsonlyui.checked=f.V,g.autopitches.value=f.H?"1":null===f.H?"0":"2",E(r("lyricsonlyuigroup"),"active",h);else{WE(a,g);var k=parseInt(g.instnames.value,10),l=!g.hidenotation.checked,m=g.canprint.checked,n=g.showtitle.checked,p=g.allowsynthoverlay.checked,q=!g.hidesynth.checked;
h=h?g.lyricsonlyui.checked:f.V;g=g.autopitches.value;g="0"===g?null:"1"===g;if(f.X!==k||e.Z!==l||c.pa!==m||f.U!==n||c.za!==p||f.Z!==q||f.V!==h||f.H!==g)f.X!==k&&tn(d,k),e.Z=l,g!==f.H&&(f.H=g,sn(d,!!g),Q(c,117)),c.pa=m,c.za=p,f.U!==n&&(f.U=n,Q(c,188)),f.V!==h&&(f.V=h,oB(window.cc,!0),Q(c,222)),f.Z!==q&&(f.Z=q,!q&&Yr(c)&&Jw(c)&&Ew(c,c.N.length-1),Q(c,80)),Q(c,211);XE(a)}b?be("scoredetailsmodal"):ce("scoredetailsmodal")}
function UE(a,b){a=a.A;a.tab.value=b;D(a,"tab1");D(a,"tab2");D(a,"tab3");C(a,"tab"+b)}function VE(a,b){a=a.C.C;b.n.value=a.G;b.a.value=a.N;b.d.value=a.S;setTimeout(()=>{b.n.focus();b.n.select()},200)}function WE(a,b){a=a.C;var c=a.C,d=b.n.value.trim()||"Untitled",e=b.a.value;b=b.d.value;var f=c.G!==d;if(f||c.N!==e||c.S!==b)c.G=d,c.N=e,c.S=b,Q(a,211),f&&a.F.U&&Q(a,188)}
function XE(a){a=a.C;var b=a.F,c=a.C,d={name:c.G,artist:c.N,description:c.S,instrument_names:b.X};window.soundslice.isNonfree&&(d.hide_notation=c.Z?"False":"True",d.can_print=a.pa?"True":"False",d.show_title_in_notation=b.U?"True":"False",d.auto_pitches=b.H?"1":null===b.H?"0":"2",d.allow_synth_overlay=a.za,d.allow_synth=b.Z?"True":"False");kc("POST",`/api/v1/scores/${c.$}/`,d,Mr,Mr)}
class YE{constructor(a){this.C=a;this.A=r("scoredetailsform");var b=r("showscoredetails"),c=this.A.tab,d=c.length;D(b,"hidden");L(b,"click",()=>{TE(this,!0)});for(L(r("closescoredetails"),"click",e=>{e.preventDefault();TE(this,!1)});d--;)L(c[d],"change",()=>{UE(this,parseInt(SE(this.A,"tab"),10))});r("sliceback")&&L(r("sliceback"),"click",e=>{a.S&&Ea(e.target,"slice-title-text")&&(e.preventDefault(),TE(this,!0))})}}
function ZE(a,b,c,d,e){var f=a.C,g=f.A;kc("POST",`/api/v1/scores/${g.C.$}/recordings/`,{source:b,source_data:d,hls_url:e},h=>{h=Ax(f,b,h.id,h.name,"",null,null,null,0,!1,{sd:h.source_data,mediaurl:h.media_url,renwurl:h.renew_url,hls:h.hls_url},!0);g.C.A.length||iw(h)?$E(a.A,!0):aF(a.A,!1);ce(c)},h=>{(h=JSON.parse(h).errors.source_data)&&hs(g,h[0],!0,1)})}
class bF{constructor(a,b){this.C=a;this.A=b;var c=document.getElementsByClassName("back-to-recordings"),d=6,e=c.length,f;L(r("emptyaddrecording"),"submit",g=>{g.preventDefault();be("addrecordingmodal")});M(r("emptyaddrecordingsmall"),()=>{be("addrecordingmodal")});L(r("openmodalYT"),"click",()=>{f=r("addrecordingytid");f.value="";be("addrecordingmodalYT");setTimeout(()=>{f.focus()},200)});L(r("openmodalaudio"),"click",()=>{be("addrecordingmodalfile")});L(r("openmodalvideo"),"click",()=>{be("addrecordingmodalfile")});
L(r("openmodalvideourl"),"click",()=>{if(f=r("addrecordingvidurl"))f.value="",r("addrecordingvidurl2").value="";be("addrecordingmodalvideourl");f&&setTimeout(()=>{f.focus()},200)});L(r("openmodalaudiourl"),"click",()=>{if(f=r("addrecordingmp3url"))f.value="";be("addrecordingmodalaudiourl");f&&setTimeout(()=>{f.focus()},200)});L(r("openmodalwistia"),"click",()=>{r("addrecordingvidservice").textContent="Wistia";d=7;be("addrecordingmodal3rdparty")});for(L(r("openmodalvimeo"),"click",()=>{r("addrecordingvidservice").textContent=
"Vimeo";d=6;be("addrecordingmodal3rdparty")});e--;)M(c[e],()=>{be("addrecordingmodal")});L(r("addrecordingyt"),"submit",g=>{g.preventDefault();ZE(this,1,"addrecordingmodalYT",r("addrecordingytid").value,"")});L(r("addrecordingvidurlform"),"submit",g=>{g.preventDefault();ZE(this,3,"addrecordingmodalvideourl",r("addrecordingvidurl").value,r("addrecordingvidurl2").value)});L(r("addrecordingmp3urlform"),"submit",g=>{g.preventDefault();ZE(this,8,"addrecordingmodalaudiourl",r("addrecordingmp3url").value,
"")});(f=r("addrecordinggotoupload"))&&L(f,"click",()=>{cF(b,`/manage/${a.A.C.D}/upload-recording/`)});(f=r("addrecordinggoto3rdparty"))&&L(f,"click",()=>{cF(b,`/manage/${a.A.C.D}/`+(6===d?"vimeo-recording/":"wistia-recording/"))})}}
function dF(a){var b=a.A,c=a.C,d={name:b.n.value||"Recording"},e=a.D,f=a.F;c&&(d.source_data=b.sd.value,d.hls_url=b.hls.value);kc("POST",`/api/v1/recordings/${e.G}/`,d,g=>{e.name=g.name;c&&(e.A.C=g.source_data,e.A.F=g.hls_url,e===Xr(f)&&e.A.qa(0,Mr));Q(f,215);ce("changerecordingmodal")},()=>{hs(f,"There was an error saving changes.",!1,1)})}
function eF(a,b){var c=a.A.n;a.D=b;a.C=3===b.U;E(r("changerecordingsd"),"active",a.C);a.C&&(a.A.sd.value=b.A.C,a.A.hls.value=b.A.F);c.value=b.name;be("changerecordingmodal");setTimeout(()=>{c.focus();c.select()},200)}class fF{constructor(a){this.F=a;this.A=r("changerecordingform");this.D=null;this.C=!1;L(this.A,"submit",b=>{b.preventDefault();dF(this)})}}
function gF(a,b){kc("POST",`/api/v1/slices/${a.A.C.D}/recordings/order/`,{order:b},()=>{var c=a.A,d=c.N,e=[],f=c.P,g=0,h;d.length&&d[0].F&&e.push(d[0]);d=0;for(h=b.length;d!==h;d++){var k=Fw(c,b[d]);e.push(k);k.index===f&&(g=e.length-1);k.index=e.length-1}c.N=e;c.P=g;Q(c,227)},()=>{hs(a.A,"There was an error reordering.",!1,1)})}function hF(a){Jw(a.A)?iF(a):be("addrecordingmodal")}function iF(a){jF(a);be("recordingeditmodal")}
function kF(a,b){confirm('Are you sure you want to delete the recording "'+Qa(b.name)+'"?')&&kc("DELETE",`/api/v1/recordings/${b.G}/`,null,()=>{var c=a.A,d=b.index,e=c.N,f;c.P===d&&Ew(c,0<d?d-1:0);e.splice(d,1);var g=d;for(f=e.length;g<f;g++)e[g].index--;c.P>=d&&c.P--;Q(c,226);jF(a)},()=>{hs(a.A,"There was an error deleting the recording.",!0,1)})}
function jF(a){var b=a.A,c="",d=b.N,e=2<=Jw(b),f;var g=0;for(f=d.length;g!==f;g++){var h=d[g];h.F||(c+='<div class="edit-recording-list" data-recid="'+h.G+'"><div class="edit-recording-list-inner">'+(e?'<button class="movegrab" action="move-'+h.index+'"><svg><use xlink:href="#shape-grabby"></use></svg></button>':"")+'<button class="recording-list-title-button subtle-link" action="edit-'+h.index+'">'+Qa(h.name)+"</button>"+(e?'<div class="ui-tooltip-wrapper ui-tooltip-wraper-hover"><div class="badge help-el hidden">Default</div><div class="ui-tooltip ui-tooltip-no-arrow ui-tooltip-left-side ui-tooltip-left-side-for-badge">The bottom-most recording in this list will be the default for anybody viewing your slice.</div></div>':
"")+(h.C.length?"":'<div class="ui-tooltip-wrapper ui-tooltip-wraper-hover"><div class="badge help-el">Unsynced</div><div class="ui-tooltip ui-tooltip-no-arrow ui-tooltip-left-side ui-tooltip-left-side-for-badge">This recording has no syncpoints, so it\u2019s only available when this slice is in Edit mode.</div></div>')+'<div class="recording-list-buttons">'+(h.A.ia?'<button class="text-button text-button-muted text-button-small" action="stem-'+h.index+'">Stems ('+h.A.V.length+")</button>":"")+'<button class="action-button edit-list-button" action="edit-'+
h.index+'" title="Edit recording"><svg class="svg-icon-small"><use xlink:href="#shape-edit-icon"></use></svg></button>'+(h.A.U?' <a class="action-button edit-list-button" href="/manage/'+b.C.pa+"/"+h.G+'/subtitles/" title="Manage subtitles" target="_blank"><svg class="svg-icon-small"><use xlink:href="#shape-closedcaptions"></use></svg></a>':"")+(2===h.U||4===h.U?' <a class="action-button edit-list-button" href="/manage/'+b.C.D+"/"+h.G+'/original/" title="Export original file"><svg class="svg-icon-small"><use xlink:href="#shape-export-icon"></use></svg></a>':
"")+'<button class="action-button edit-list-button" action="delete-'+h.index+'" title="Delete recording"><svg class="svg-icon-small"><use xlink:href="#shape-delete-icon"></use></svg></button></div></div></div>')}a.C.innerHTML=c}
class lF{constructor(a,b,c){this.A=b;this.C=r("recordingedit-content");new bF(a,c);var d=new fF(b),e=0,f=null,g=0,h=l=>{l=(l.targetTouches?l.targetTouches[0].pageY:l.pageY)-e;var m=!1;if(0<l){var n=f;for(n=n.nextSibling;n&&1!==n.nodeType;)n=n.nextSibling;n&&l>Na(n).height/2&&(this.C.insertBefore(Ia(n),f),m=!0)}else if(0>l){n=f;for(n=n.previousSibling;n&&1!==n.nodeType;)n=n.previousSibling;n&&-l>Na(n).height/2&&(this.C.insertBefore(Ia(f),n),m=!0)}m&&(e=Na(f).top+g)},k=()=>{Vb("mousemove touchmove",
h);Vb("mouseup touchend",k);D(f,"indrag");document.body.style.cursor="default";var l=this.C.querySelectorAll(".edit-recording-list"),m=[],n;var p=0;for(n=l.length;p!==n;p++)m.push(parseInt(l[p].getAttribute("data-recid"),10));gF(this,m)};M(r("recordingedit-trigger"),()=>{hF(this)});M(r("changerecording-back"),()=>{iF(this)});M(r("addrecording"),()=>{be("addrecordingmodal")});L(this.C,"mousedown touchstart",Pz(l=>{if(1!==l.button&&2!==l.button){var m=La(l.target,"action");if(m){var n=m.split("-");
n=(m=n[0])?parseInt(n[1],10):null;var p=m?b.N[n]:null;"edit"===m?eF(d,p):"delete"===m?kF(this,p):"move"===m?(m=Ma(l.target,"data-recid"),L(window,"mousemove touchmove",h),L(window,"mouseup touchend",k),C(m,"indrag"),document.body.style.cursor="move",e=l.targetTouches?l.targetTouches[0].pageY:l.pageY,f=m,g=e-Na(f).top):"stem"===m&&ox(a,"stems",245,n)}}}))}}
function mF(a){var b=a.C,c=b.C,d=c.P;c.Z?c.A.length?window.channelPostingAllowed?(nF(a,()=>{var e=a.C.Pa;a.A.g0.value=e.length?e[0]:"";a.A.g1.value=1<e.length?e[1]:"";a.A.g2.value=2<e.length?e[2]:""}),VE(a.D.C,a.A),r("publishtitle").textContent=d?"Edit channel post":"Share with community",r("publishsubmit").textContent=d?"Update":"Publish",E(r("unpublishchannel"),"active",d),be("scorepublishmodal")):hs(b,"Slices created via PDF/image import can\u2019t be posted to your channel.",!0,1):hs(b,"Please create some notation/tab before posting this to your channel.",
!0,1):hs(b,"Please uncheck 'Hide notation' in slice details to post this to your channel.",!0,1)}
function oF(a,b,c){var d=a.C,e=d.C;a={is_public:b?"True":"False"};b&&(a.genres=c,a.allow_comments="True",a.hide_notation="False");kc("POST",`/api/v1/scores/${e.$}/`,a,()=>{!e.P&&b?be("channelpublishedmodal"):(ce("scorepublishmodal"),hs(d,b?'This slice is now updated on <a href="'+window.soundslice.profile+'" target="_blank">your channel</a>.':"This slice is no longer published on your channel.",!0,2));if(e.P=b)d.Pa=c,d.La=!0;Q(d,155);Q(d,90)},()=>{hs(d,"There was an error during saving.",!1,1)})}
function nF(a,b){a.F?b():kc("GET","/api/v1/genres/",null,c=>{for(var d='<option value=""></option>',e=0,f=c.length;e!==f;e++)d+='<option value="'+c[e].id+'">'+Qa(c[e].name)+"</option>";a.F=!0;a.A.g0.innerHTML=d;a.A.g1.innerHTML=d;a.A.g2.innerHTML=d;b()},Mr)}
class pF{constructor(a,b){this.C=a;this.D=b;this.A=r("scorepublishform");this.F=!1;M(r("showpublishdetails"),()=>{mF(this)});M(r("unpublishchannel"),()=>{ce("scorepublishmodal");oF(this,!1,[])});L(this.A,"submit",c=>{c.preventDefault();c=this.C;for(var d=[],e=3,f;e--;)(f=this.A["g"+e].value)&&d.push(parseInt(f,10));d.length?(WE(this.D.C,this.A),XE(this.D.C),oF(this,!0,d),Q(c,21)):hs(c,"Please select at least one genre.",!1,1)})}}
function qF(a,b){var c=a.C.C,d=a.A;b?(a=c.P,E(r("slicesharepub"),"active",a),E(r("slicesharepriv"),"active",!a),c.P?r("sliceshareurl").innerHTML=Gz(c):(r("slicesecreturl").innerHTML=`<a href="${Gz(c)}">${Gz(c)}</a>`,d.v.value=c.ba)):c.P||(d=parseInt(SE(d,"v"),10),d!==c.ba&&rF(a,d));b?be("scoresharemodal"):ce("scoresharemodal")}
function rF(a,b){var c=a.C,d=c.C;kc("POST",`/api/v1/scores/${d.$}/`,{status:b},()=>{d.ba=b;Q(c,90);hs(c,1===b?"This slice\u2019s secret link is no longer enabled.":"This slice's secret link is now enabled.",!1,2)},()=>{hs(c,"There was an error during saving.",!1,1)})}class sF{constructor(a){this.C=a;this.A=r("scoreshareform");window.soundslice.isNonfree||C(this.A,"unpaid");r("showsharedetails")&&M(r("showsharedetails"),()=>{qF(this,!0)});L(this.A,"submit",b=>{b.preventDefault();qF(this,!1)})}}
function tF(a){var b=a.C,c=b.C,d=parseInt(SE(a.A,"embed_status"),10);d!==c.ia&&kc("POST",`/api/v1/scores/${c.$}/`,{embed_status:d},()=>{c.ia=d;Q(b,90);hs(b,"The slice\u2019s embed status was successfully changed.",!1,2)},()=>{hs(b,"There was an error during saving.",!1,1)});ce("embed-settings-modal")}function uF(a){var b=parseInt(SE(a.A,"embed_status"),10);E(r("embed-code-src"),"disabled",1===b);E(r("embed-code-message"),"show",!a.D||1===b)}
class vF{constructor(a){this.C=a;this.A=r("embedform");this.D="1"===this.A.getAttribute("data-canembed");if(document.queryCommandSupported("copy")){var b=r("embed-code-button");D(b,"hidden");M(b,()=>{var d=!1;r("embed-code-textarea").select();try{d=document.execCommand("copy")}catch(e){}d&&hs(a,"The embed code has been copied to your clipboard.",!1,2)})}M(r("embed-settings"),()=>{this.A.embed_status.value=this.C.C.ia;r("embed-code-textarea").value='<iframe src="'+Gz(this.C.C)+'embed/" width="100%" height="500" frameBorder="0" allowfullscreen></iframe>';
uF(this);be("embed-settings-modal")});L(this.A,"submit",d=>{d.preventDefault();tF(this)});b=this.A.embed_status;for(var c=b.length;c--;)L(b[c],"change",()=>{uF(this)})}}function cF(a,b){Q(a.A,21);setTimeout(()=>{window.location=b},500)}function $E(a,b){var c=a.A;b===c.V||!Jw(a.A)&&b||(b&&!a.isActive&&aF(a,!0),c.V=b,a.P?Q(c,65,b):b&&(Ra(a.D.H.getAttribute("data-syncjs"),null),a.P=!0))}
function aF(a,b){if(b!==a.isActive){var c=a.A;a.isActive=b;E(document.body,"editmode",b);E(document.body,"viewmode",!b);document.querySelector('meta[name="theme-color"]').setAttribute("content",b?"#FAF8F5":"#ffffff");b&&(a.H=!1);wF(a);b?(xF(a,!0),Q(c,81)):(Q(c,85),$E(a,!1),xF(a,!1))}}
function yF(a){var b=a.A.C,c=b.P,d=1!==b.ba;a=!!a.A.Ca;b=1===b.ia;var e=r("showprivatesharemodal");var f=c?"On channel":d?"Secret link enabled":b?e&&a?"Shared privately":"Private":"Embeddable";r("slice-share-text").textContent=f;E(r("shareicon-lock"),"active",!c&&b&&!d&&!a);E(r("shareicon-link"),"active",!c&&d);E(r("shareicon-channel"),"active",c);E(r("shareicon-embed"),"active",!b);E(r("shareicon-course"),"active",a);E(r("showpublishdetails"),"active",c);E(r("embed-settings"),"active",!b);e&&E(e,
"active",a);r("showsharedetails")&&E(r("showsharedetails"),"active",!c&&d)}function zF(a){E(a.N,"inactive",!a.G&&!a.I)}function wF(a){var b=a.D,c=a.A,d=a.isActive,e=0!==(c.oa.status&2)&&!Jw(c);c=0!==(c.oa.status&4)&&!c.C.A.length;E(ct(b,"player-empty-recording"),"active",d&&e&&!a.H&&!c);E(ct(b,"create-empty-wrapper-editor"),"active",d&&c);E(document.body,"no-notation",d&&c);E(document.body,"no-recording",d&&e);dx(b,c,!1);Tw(b.C)}function AF(a){E(r("synceditortoggle"),"disabled",!Jw(a.A))}
function BF(a){var b=a.A,c=a.D,d=b.C,e=a.N,f=r("synceditortoggle");f&&M(f,()=>{$E(a,!b.V);Ka()});r("upgrade-secretlink")&&M(r("upgrade-secretlink"),()=>{be("upgradesharemodal")});r("upgrade-privateshare")&&M(r("upgrade-privateshare"),()=>{be("upgradesharemodal")});M(r("dismissemptyrecording"),()=>{D(ct(c,"player-empty-recording"),"active");a.H=!0;Tw(c.C)});Fz(b.C,()=>{yF(a)});b.assign([90],()=>{yF(a)},[155],()=>{a.M=!0});L(e,"click",()=>{Q(b,21)});L(window,"keydown",g=>{a.isActive&&(g.ctrlKey||g.metaKey)&&
83===g.which&&(Q(b,21),g.preventDefault())});b.assign([18],()=>{a.G=!0;zF(a)},[186],()=>{a.G=!1;zF(a)},[64],()=>{a.I=!0;zF(a)},[187],()=>{a.I=!1;zF(a)},[23],()=>{a.F++;C(e,"state-saving")},[22],()=>{a.F--;a.F||D(e,"state-saving")},[32,184,185,2,226],()=>{wF(a)},[2],()=>{AF(a)},[226],()=>{$E(a,!1)},[118],()=>{aF(a,!0);hF(a.S)},[134],()=>{aF(a,!0);xF(a,!0);Q(a.A,86,103)},[135],()=>{aF(a,!0)},[189],()=>{TE(a.C,!0)});AF(a);Q(b,83);b.ea&&!d.A.length&&(aF(a,!0),"Untitled"===d.G&&TE(a.C,!0));window.initSync&&
Fz(d,()=>{aF(a,!0);var g=Fw(b,window.initSync);g&&Ew(b,g.index);$E(a,!0)});window.initEditModal&&(aF(a,!0),TE(a.C,!0));window.initUploadModal&&(aF(a,!0),be("uploadmodal"))}function xF(a,b){var c=a.A;b!==c.S&&(b&&!a.isActive&&aF(a,!0),b&&(c.A.Va(0),gy(a.D,!1),a.D.M&&Q(c,237,!1)),c.S=b,c.A.V=b,E(document.body,"editoron",b),Q(c,20,b))}
class CF{constructor(){var a=soundslice.webui;this.D=a;var b=a.A;this.A=b;this.I=this.G=this.P=this.H=this.M=this.isActive=!1;this.U=r("slice-share-menu");this.N=r("editmenusave");this.C=new YE(b);this.S=new lF(a,b,this);new pF(b,this);new sF(b);new vF(b);this.F=0;L(r("emptyopeneditor"),"submit",g=>{g.preventDefault();xF(this,!0);Q(this.A,86,103)});L(r("emptyuploadnotation"),"submit",g=>{g.preventDefault();xF(this,!0);Q(this.A,86,208)});var c=r("slice-view-toggle");a=r("editor-toggle-mobile");cu(b,
[218],()=>{c.textContent=b.S?"View":"Edit"});M(c,()=>{this.M?cF(this,em(b.C)):aF(this,!this.isActive)});M(a,()=>{aF(this,!this.isActive)});L(window,"drop",g=>{g.preventDefault();D(document.body,"drag-over-body")},"dragenter",g=>{g.preventDefault()},"dragover",g=>{g.preventDefault();C(document.body,"drag-over-body")},"dragleave",g=>{g.preventDefault();D(document.body,"drag-over-body")});var d=r("slice-share");Ec(d,this.U,()=>{r("showpublishdetailstext").textContent=b.C.P?"Edit channel post\u2026":
"Share with community\u2026";r("showsecretlinktext").textContent=1===b.C.ba?"Enable secret link\u2026":"Secret link enabled\u2026";C(d,"active")},()=>{D(d,"active")},!0);a=document.querySelectorAll(".track-list-trigger");for(var e=a.length,f=()=>{be(b.C.T.length?"trackeditmodal":"addtrackmainmodal")};e--;)M(a[e],f);Ec(r("help-menu-button"),r("help-menu"),null,null,!0);Ec(r("slice-more-commands-button"),r("slice-more-commands-wrapper"),null,null,!0);b.assign([188],()=>{Om(b.A,!0)})}}
Ua(()=>{if(soundslice.webui){var a=new CF;BF(a);aF(a,!0);xF(a,!0)}});
