class dH{constructor(a){this.C=a;this.A=r("private-note-form");var b=this.C.A.A.sa;(a=r("practice-note-empty"))&&!b&&C(a,"active");E(this.A,"active",b);L(this.A,"submit",f=>{f.preventDefault();f=this.A.note;var g=f.value.trim();g&&(eH(this.C,g,!1),f.value="")});L(r("practice-add-note"),"click",()=>{b?this.A.note.focus():soundslice.openUpgradeModal("Creating private notes")});var c={},d=0,e=r("private-notes-wrapper");L(r("private-notelist"),"click",f=>{var g=Ma(f.target,"data-pracnoteid");if(g){var h=
g.getAttribute("data-pracnoteid"),k=r("pracnotetext"+h);f=La(f.target,"data-pnaction");if("1"===f){if(!b){soundslice.openUpgradeModal("Editing private notes");return}c[h]=k.value;C(g,"editing");d++}else"2"===f?(D(g,"editing"),k.value=c[h],d--):"3"===f?(fH(h,g,k.value),d--):"4"===f&&(fH(h,g,""),d--);E(e,"editing",!!d)}})}}
function eH(a,b,c){var d={practice_date:wb(),practicelist_hash:a.A.N};b&&(d.notes=b);c&&(d.did_practice=!0);kc("POST",`/api/v1/slices/${a.A.A.C.D}/practice-data/`,d,e=>{b&&r("private-notelist").insertAdjacentHTML("afterbegin",e.html)},()=>{})}function fH(a,b,c){kc("POST",`/api/v1/practice-activity/${a}/`,{notes:c},d=>{b.outerHTML=d.html},()=>{})}
function gH(a,b){var c=a.A.A;kc("GET",`/api/v1/slices/${c.C.D}/practice-data/?date=${wb()}`,null,d=>{var e=!!a.A.N;a.F.innerHTML=d.sidebar_html;a.C=r("practice-menu-toggle");a.D=e?r("mark-practiced"):r("mark-practiced-side");hH(a,d.practiced_today);e&&C(r("mark-practiced-side"),"hidden");iH(a);jH(a);kH(a,b,!1);new dH(a);D(a.C,"hidden");M(a.C,()=>{kH(a,!a.G,!0)});var f=r("title-practice-lists");f&&L(f,"library_updated",()=>{var g=f.inLibrary;E(a.C,"hidden",!g);g||kH(a,!1,!1)});L(a.D,"click",()=>{eH(a,
"",!0);hH(a,!0);Q(a.A.A,194)});L(r("toggle-practice-calendar-extended"),"click",()=>{Fa(r("practice-sidebar"),"show-extended-calendar")});L(r("practice-add-clip"),"click",()=>{a.A.A.sa?ry(a.A):soundslice.openUpgradeModal("Creating clips")});L(r("practice-clips"),"click",g=>{(g=La(g.target,"data-clipid"))&&(c.ba===g?dy(a.A,()=>{fy(a.A,!0)}):ey(a.A,g))});c.assign([181],()=>{iH(a)})},()=>{})}
function kH(a,b,c){E(a.F,"nav-active",b);E(a.C,"active",b);E(document.body,"right-sidebar-hidden",!b);a.G=b;c&&Q(a.A.A,164,b)}function jH(a){a=a.A.A.ba;for(var b=document.querySelectorAll("#practice-clips .clip"),c=b.length,d;c--;)d=b[c],E(d,"active",d.getAttribute("data-clipid")===a)}function hH(a,b){E(a.D,"done",b);E(r("practice-history-today"),"practiced",b);r(a.A.N?"mark-practiced-text":"mark-practiced-text-side").innerHTML=b?"Practiced":"Practiced?"}
function iH(a){var b=a.A.G;a=r("practice-clips");var c=r("practice-clips-empty"),d=r("clips-wrapper");a:{var e=b.A;for(var f=e.length;f--;)if(e[f].F){e=!1;break a}e=!0}if(e)D(a,"active"),C(c,"active"),D(d,"has-clips");else{D(c,"active");C(d,"has-clips");b=b.A;c=b.length;d=0;for(e="";d!==c;d++)f=b[d],f.F&&(e+=`<li class="clip truncate-text" data-clipid="${f.A}"><button class="clip-name truncate-text button-reset">`+Qa(f.name)+"</button></li>");a.innerHTML=e;C(a,"active")}}
class lH{constructor(){var a=soundslice.webui;this.A=a;this.G=!0;this.C=null;this.F=r("practice-tools-menu");this.D=null;a.A.assign([133],b=>{gH(this,b.data&&801<=a.D.innerWidth)},[182,183],()=>{kH(this,!1,!0)});cu(a.A,[243,244],()=>{jH(this)})}}new lH;
